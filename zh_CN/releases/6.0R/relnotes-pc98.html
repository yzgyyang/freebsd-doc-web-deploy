<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD/pc98 6.0-RELEASE 发行说明</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD/pc98 6.0-RELEASE 发行说明</a></h1>

<h3 class="CORPAUTHOR">The FreeBSD Project</h3>

<p class="COPYRIGHT">版权 &copy; 2000, 2001, 2002, 2003, 2004, 2005 The FreeBSD
Documentation Project</p>

<p class="PUBDATE">$FreeBSD: www/zh_CN/releases/6.0R/relnotes-pc98.html,v 1.1.1000.1 2005/12/22 17:32:35 delphij Exp $<br />
</p>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD is a registered trademark of the FreeBSD Foundation.</p>

<p>IBM, AIX, EtherJet, Netfinity, OS/2, PowerPC, PS/2, S/390, and ThinkPad are trademarks
of International Business Machines Corporation in the United States, other countries, or
both.</p>

<p>IEEE, POSIX, and 802 are registered trademarks of Institute of Electrical and
Electronics Engineers, Inc. in the United States.</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium, and Xeon are trademarks or
registered trademarks of Intel Corporation or its subsidiaries in the United States and
other countries.</p>

<p>Sparc, Sparc64, SPARCEngine, and UltraSPARC are trademarks of SPARC International, Inc
in the United States and other countries. Products bearing SPARC trademarks are based
upon architecture developed by Sun Microsystems, Inc.</p>

<p>Many of the designations used by manufacturers and sellers to distinguish their
products are claimed as trademarks. Where those designations appear in this document, and
the FreeBSD Project was aware of the trademark claim, the designations have been followed
by the “&trade;” or the “&reg;” symbol.</p>
</div>

<div>
<div class="ABSTRACT"><a id="AEN23" name="AEN23"></a>
<p>这份 FreeBSD 6.0-RELEASE 的发行说明， 概括了 FreeBSD 基本系统在 6-STABLE
开发线上所做的改动。 本文档列举了自前一发行版本以来所有适用的安全公告， 以及对于 FreeBSD
内核以及系统附带的应用程序所做的重要修改。 对在升级时需要注意的一些问题，
也进行了简略的介绍。</p>
</div>
</div>

<hr />
</div>

<div class="TOC">
<dl>
<dt><b>目录</b></dt>

<dt>第1节 <a href="#INTRO">简介</a></dt>

<dt>第2节 <a href="#NEW">最新变动</a></dt>

<dd>
<dl>
<dt>第2.1节 <a href="#SECURITY">安全公告</a></dt>

<dt>第2.2节 <a href="#KERNEL">对内核的改动</a></dt>

<dd>
<dl>
<dt>第2.2.1节 <a href="#BOOT">引导区和 loader 的变化</a></dt>

<dt>第2.2.2节 <a href="#PROC">硬件支持</a></dt>

<dt>第2.2.3节 <a href="#NET-PROTO">网络协议</a></dt>

<dt>第2.2.4节 <a href="#DISKS">磁盘及存储</a></dt>

<dt>第2.2.5节 <a href="#FS">文件系统</a></dt>

<dt>第2.2.6节 <a href="#AEN881">基本系统附带的第三方软件</a></dt>
</dl>
</dd>

<dt>第2.3节 <a href="#USERLAND">应用程序变动</a></dt>

<dd>
<dl>
<dt>第2.3.1节 <a href="#RC-SCRIPTS"><tt class="FILENAME">/etc/rc.d</tt> 脚本</a></dt>
</dl>
</dd>

<dt>第2.4节 <a href="#CONTRIB">基本系统包含的第三方软件</a></dt>

<dt>第2.5节 <a href="#PORTS">Ports/Packages Collection 基础结构</a></dt>

<dt>第2.6节 <a href="#RELENG">发行版建造工程和功能集成</a></dt>

<dt>第2.7节 <a href="#DOC">文档</a></dt>
</dl>
</dd>

<dt>第3节 <a href="#UPGRADE">从先前版本的 FreeBSD 升级</a></dt>
</dl>
</div>

<div class="SECT1">
<h2 class="SECT1"><a id="INTRO" name="INTRO">1 简介</a></h2>

<p>这篇文档包括了在 NEC PC-98x1 硬件平台上 FreeBSD 6.0-RELEASE 的发行说明。
它描述了最近刚刚加入、修改或删除了的 FreeBSD 特性的说明。 同时，它也将给出如何从先前的
FreeBSD 版本完成升级的说明。</p>

<p>这是一份 FreeBSD 6.0-RELEASE 的 release 发布包。 您可以从 <a
href="ftp://ftp.FreeBSD.org/" target="_top">ftp://ftp.FreeBSD.org/</a>
或其他镜像那里得到它的副本。 关于这个 (或其他) release 发布包的更多信息，可以在 <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/" target="_top">FreeBSD
手册</a> 中的 <a
href="http://www.FreeBSD.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html"
target="_top">“如何获得 FreeBSD”附录</a> 中找到。</p>

<p>我们鼓励所有的用户在开始安装 FreeBSD 之前首先参考这一版本所对应的勘误信息。
勘误文档将随时更新，以便为用户提供在发布工程后期或该版本发布之后 “新发现的”
问题和相关信息。 通常，这包括已知的 bug，安全公告，以及对于文档的修订内容。 最新的
FreeBSD 6.0-RELEASE 勘误信息可以从 FreeBSD 网站获得。</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="NEW" name="NEW">2 最新变动</a></h2>

<p>这一节描述了 FreeBSD 自 5.4-RELEASE 以来最明显的新功能和变化。 一般说来， 没有注明
[已合并] 的那些新特性是 6-STABLE 所独有的。</p>

<p>发行说明中的绝大多数条目是在说明自从 5.4-RELEASE
以来的安全公告、新的驱动程序或硬件支持、新的命令或是选项、
重要的错误修补，以及基本系统中来自第三方的软件升级。 重要的 ports 和 packages
变动，或关于交付工程的变动也会在这份文档中体现。 显而易见地，发行说明不可能涵盖 FreeBSD
版本之间的每一个微小变动； 这篇文档主要关注的，仍然是安全公告，用户可以察觉的修改，
以及重要的架构改良。</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="SECURITY" name="SECURITY">2.1 安全公告</a></h3>

<p>在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fetch</span>(1)</span></a>
工具中发现了一处问题， 它可能导致恶意的 HTTP 服务器覆盖客户程序任意部分的内存，
这一问题已经得到修复。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:16.fetch.asc"
target="_top">FreeBSD-SA-04:16.fetch</a>。 [已合并]</p>

<p>在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">procfs</span>(5)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">linprocfs</span>(5)</span></a>
中发现了一处问题， 它能够允许恶意的本地用户读取部分内核内存， 或通过造成系统 panic
来实施本地拒绝服务攻击， 这一问题已经得到修复。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-04:17.procfs.asc"
target="_top">FreeBSD-SA-04:17.procfs</a>。 [已合并]</p>

<p>修正了 TELNET 客户端程序中的两处缓冲区溢出问题. 这些问题有可能导致恶意的 TELNET
服务器或主动地网络攻击者， 使 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a>
以执行它的用户的身份执行任意的代码。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:01.telnet.asc"
target="_top">FreeBSD-SA-05:01.telnet</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sendfile</span>(2)</span></a>
系统调用中的一处信息泄露问题， 这一问题可能导致内核中的一段随机的部分被传递出去。
要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:02.sendfile.asc"
target="_top">FreeBSD-SA-05:02.sendfile</a>。 [已合并]</p>

<p>修正了 <tt class="LITERAL">SIOCGIFCONF</tt> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ioctl</span>(2)</span></a>
的一个信息泄露问题， 这一问题可能导致 12 字节的内核内存被泄露。 要了解更多信息，
请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:04.ifconf.asc"
target="_top">FreeBSD-SA-05:04.ifconf</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cvs</span>(1)</span></a>
中的多处程序设计问题， 这些问题可能导致在 CVS 服务器上执行任意代码。 要了解更多信息，
请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:05.cvs.asc"
target="_top">FreeBSD-SA-05:05.cvs</a>。 [已合并]</p>

<p>修正了 <tt class="FILENAME">/dev/iir</tt> 设备节点上的默认权限错误，
这一失误会导致允许非特权的本地用户发送命令给 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iir&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iir</span>(4)</span></a>
所支持的设备。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:06.iir.asc"
target="_top">FreeBSD-SA-05:06.iir</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=i386_get_ldt&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">i386_get_ldt</span>(2)</span></a>
系统调用中， 对于输入参数的检验代码中的一处问题，
这一问题可能导致将某些内核内存的内容泄露给用户进程。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:07.ldt.asc"
target="_top">FreeBSD-SA-05:07.ldt</a>。 [已合并]</p>

<p>修正了多处可能导致内核内存的内容泄露的漏洞。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:08.kmem.asc"
target="_top">FreeBSD-SA-05:08.kmem</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tcpdump</span>(1)</span></a>
工具中的一处漏洞， 这个漏洞能够使恶意的远程用户通过发送特制的数据报来引发拒绝服务。
要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:10.tcpdump.asc"
target="_top">FreeBSD-SA-05:10.tcpdump</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gzip</span>(1)</span></a>
工具中的两处安全漏洞。 这些漏洞使得本地用户能够在解压缩时修改任意文件的权限，
或覆盖本地文件。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:11.gzip.asc"
target="_top">FreeBSD-SA-05:11.gzip</a>。 [已合并]</p>

<p>修正了 <b class="APPLICATION">BIND 9</b> DNSSEC 的一处漏洞。 当启用 DNSSEC 时，
这一问题会允许远程攻击者通过发送特制的数据报来导致 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
异常终止。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:12.bind9.asc"
target="_top">FreeBSD-SA-05:12.bind9</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
中的一处可能导致包在查询表中无法正确匹配的问题。 这一问题只影响 SMP 和启用了 <tt
class="LITERAL">PREEMPTION</tt> 内核选项的 UP 机器。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:13.ipfw.asc"
target="_top">FreeBSD-SA-05:13.ipfw</a>。 [已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bzip2</span>(1)</span></a>
的两处安全问题。 这包括一处拒绝服务攻击问题， 以及非授权的文件权限修改问题。
要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:14.bzip2.asc"
target="_top">FreeBSD-SA-05:14.bzip2</a>。 [已合并]</p>

<p>修正了 FreeBSD 的 TCP 协议栈中的两处问题。 这些问题会使得攻击者能够让暨存的 TCP
连接挂起， 从而导致拒绝服务状态。 要了解更多信息， 请参见安全公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CERT/advisories/FreeBSD-SA-05:15.tcp.asc"
target="_top">FreeBSD-SA-05:15.tcp</a>。 [已合并]</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="KERNEL" name="KERNEL">2.2 对内核的改动</a></h3>

<p>内核调试器 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ddb&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ddb</span>(4)</span></a> 新增了
<tt class="COMMAND">show alllocks</tt> 命令， 用以显示持有休眠互斥体
(以及当前线程所持有的自旋互斥体) 的情况的了。 [已合并]</p>

<p>将崩溃时的内核转存 (crash dump) 格式改为了 ELF 以支持大内存 (超过 4GB) 的环境。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ichsmb&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ichsmb</span>(4)</span></a>
驱动现在可以作为可加载内核模块使用了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a>
功能现在支持一个新的 sysctl <code class="VARNAME">security.jail.chflags_allowed</code>，
用于控制 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">chflags</span>(1)</span></a> 在
jail 中的行为。 如果设置为 <tt class="LITERAL">0</tt> (默认值)， jail 中的 <tt
class="USERNAME">root</tt> 用户将被认为是非特权用户； 如果设置为 <tt
class="LITERAL">1</tt>， 则 jail 中的 root 用户会被视为与未 jail 的 <tt
class="USERNAME">root</tt> 用户一样。 [已合并]</p>

<p>sysctl 变量 <code class="VARNAME">security.jail.getfsstatroot_only</code> 被改名为
<code class="VARNAME">security.jail.enforce_statfs</code> 并能够支持下述策略：</p>

<div class="INFORMALTABLE"><a id="AEN154" name="AEN154"></a>
<table border="0" frame="void" class="CALSTABLE">
<col width="1*" />
<col width="3*" />
<thead>
<tr>
<th>值</th>
<th>策略</th>
</tr>
</thead>

<tbody>
<tr>
<td>0</td>
<td>对显示全部挂接点 (mount point) 不设任何限制。</td>
</tr>

<tr>
<td>1</td>
<td>只显示 jail 的 chroot 之下的挂接点， 且只显示它在挂接点之下的部分 (例如， 如果 jail
的 chroot 目录是 <tt class="FILENAME">/jails/foo</tt> 而有一个挂接点是 <tt
class="FILENAME">/jails/foo/usr/home</tt>， 则只显示 <tt
class="FILENAME">/usr/home</tt>)。</td>
</tr>

<tr>
<td>2</td>
<td>只显示 jail 的 chroot 目录所在的挂接点。</td>
</tr>
</tbody>
</table>
</div>

<p>加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=memguard&sektion=9&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">memguard</span>(9)</span></a>，
一种用来帮助检测 “悬挂指针操作” 情形的内核内存分配器。 要利用这一功能，
就必须明确地通过 <tt class="LITERAL">options DEBUG_MEMGUARD</tt> 来启用它，
并对内核进行小幅度的修改。 一般而言， 这是为内核开发人员提供的功能。</p>

<p><code class="VARNAME">struct ifnet</code> 以及网络接口 API 发生了变化。 由于 ABI
不兼容， 所有没有在 FreeBSD 基本系统中提供的驱动程序， 都必须进行改写以使用新的 API，
并重新编译方可正常使用。</p>

<p>一系列 ULE 的问题得到了修正。 [已合并]</p>

<p>在 VFS 栈中加入了细锁， 这使得它的大部分得以脱离全局锁。 这一特性在 alpha、 amd64，
以及 i386 平台上被默认打开， 并可以通过设置加载器变量 (以及 sysctl 变量) <code
class="VARNAME">debug.mpsafevfs</code> 为 <tt class="LITERAL">0</tt> 来禁用它。</p>

<p>System V IPC 对象 (消息队列、 信号量和共享内存) 现在提供了强制性访问控制策略， 特别是
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_biba&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mac_biba</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_mls&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mac_mls</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_stub&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mac_stub</span>(4)</span></a>, 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mac_test&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mac_test</span>(4)</span></a>
的支持。</p>

<p>以 “debug” 开头的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(3)</span></a> MIB，
现在需要使用内核选项 <tt class="LITERAL">options SYSCTL_DEBUG</tt> 才能使用了。
这一选项默认不启用。</p>

<p>在许多驱动中加入了通用的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tty&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tty</span>(4)</span></a>
驱动接口， 这包括 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cx&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">cx</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}x</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cy&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">cy</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}c</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=digi&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">digi</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}D</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rc</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}m</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rp&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rp</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}R</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sab&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sab</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}z</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=si&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">si</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}A</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}d</tt>), sx (<tt class="LITERAL">{tty,cua}G</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}u</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ubser&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ubser</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}y</tt>), <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ucom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ucom</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}U</tt>), 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ucycom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ucycom</span>(4)</span></a> (<tt
class="LITERAL">{tty,cua}y</tt>) 并进行了必要的重写。 请注意， <tt
class="FILENAME">/etc/remote</tt> 和 <tt class="FILENAME">/etc/ttys</tt>
也随之进行了更新。</p>

<p>加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vkbd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vkbd</span>(4)</span></a> 驱动。
这个驱动提供了一个可以用于实现类似于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pty&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pty</span>(4)</span></a>
之于终端所完成的功能的虚拟 AT 键盘的软件环回机制。</p>

<p>shell 命令的最大长度， 从原先的 128 变为了 <code class="VARNAME">PAGE_SIZE</code>。
默认情况下， 这个值应该是 4KB (i386, pc98, amd64, 和 powerpc) 或 8KB (sparc64 和 ia64)。
其结果是， 兼容模块需要重新编译， 以便于内核中的数据结构保持同步。</p>

<p>加入了新的 <code class="VARNAME">vm.blacklist</code> 变量。
它可以用于屏蔽一部分物理地址的内存空间， 这些内存不会加入到空闲页表中， 因而会被 FreeBSD
VM 忽略掉。 忽略掉的内存页， 也会在消息缓存中予以列出。</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="BOOT" name="BOOT">2.2.1 引导区和 loader 的变化</a></h4>

<p>加载器命令 <tt class="COMMAND">autoboot</tt> 现在支持提示符参数了。</p>

<p><tt class="COMMAND">autoboot</tt> 加载器命令现在能够在 <code
class="VARNAME">autoboot_delay</code> 变量设置为 <tt class="LITERAL">-1</tt>
时完全禁止用户打断启动过程了。 [已合并]</p>

<p>增加了一个用以设置 <code class="VARNAME">hint.atkbd.0.flags=0x1</code>
的加载器菜单选项。 这一设置使得 USB 键盘能够在没有接 PS/2 键盘时正常使用。</p>

<p>默认禁用了 beastie 引导菜单。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="PROC" name="PROC">2.2.2 硬件支持</a></h4>

<p>对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbdc&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">atkbdc</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">atkbd</span>(4)</span></a> 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=psm&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">psm</span>(4)</span></a>
驱动进行了重写， 以便让它们更加独立于总线， 并提供了对 sparc64 平台的 EBus 的支持。</p>

<p>加入了用于灵活控制处理器速度的框架。 这为许多驱动程序通过调整 CPU
的速度来控制功耗提供了手段。 更多细节， 可以在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cpufreq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cpufreq</span>(4)</span></a>
联机手册中找到。 [已合并] 目前支持的驱动包括 ichss (Intel SpeedStep for ICH), acpi_perf
(ACPI CPU 性能状态), 以及 acpi_throttle (ACPI CPU 减速)。 后两个设备是 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi</span>(4)</span></a>
驱动的一部分。 它们可以通过设置设备的 hints， 例如 <code class="VARNAME">hint.<tt
class="REPLACEABLE"><i>ichss</i></tt>.0.disabled="1"</code> 来禁用。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crypto&sektion=9&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">crypto</span>(9)</span></a>
子系统中加入了对 VIA C3 处理器中内建的 PadLock 安全协处理器的支持。</p>

<p>加入了用于硬件性能监视计数器的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hwpmc</span>(4)</span></a> 驱动。
这个驱动抽象了新式 CPU 中提供的硬件性能监视机制，
并提供了在用户进程中利用这些机制的支持。 要了解更多的细节， 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hwpmc</span>(4)</span></a>
的联机手册、 相关联的函数库， 以及有关的其他工具。</p>

<p>加入了用于支持 GPIB-PCIIA IEEE-488 卡的 pcii 驱动。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">atkbd</span>(4)</span></a>
驱动新增了 <tt class="LITERAL">0x8</tt> (第 3 位) 标志， 用以在设备探测时禁止测试键盘口，
以避免在某些型号， 特别是 Compaq R300Z 系列的 amd64 笔记本上造成挂起的问题。</p>

<p>对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=psm&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">psm</span>(4)</span></a>
进行了改进， 以支持使用 Synaptics Touchpad 的用户。 现在， 它能够更好地识别低速移动，
以及额外的按钮和滚轮。 这些特性， 可以通过 <code class="VARNAME">hw.psm.synaptics.<tt
class="REPLACEABLE"><i>*</i></tt></code> 的 sysctl 变量来调整。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uftdi&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uftdi</span>(4)</span></a>
驱动现在能支持 FTDI FT2232C 芯片了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uplcom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uplcom</span>(4)</span></a>
驱动现在能够处理 <tt class="LITERAL">CTS</tt> 信号了。</p>

<p>改进了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ehci&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ehci</span>(4)</span></a>
驱动。</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="MM" name="MM">2.2.2.1 多媒体支持</a></h5>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_csa&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_csa</span>(4)</span></a>
驱动现在支持挂起和唤醒操作了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uaudio&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uaudio</span>(4)</span></a>
驱动现在增加了一些功能， 其中包括更多输入通道上的音量控制能力， 以及一些设备的录音能力。
[已合并]</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="NET-IF" name="NET-IF">2.2.2.2 网络接口设备支持</a></h5>

<p>更新了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ath</span>(4)</span></a> 驱动，
将流量控制算法放进了一个单独的模块。 在使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ath</span>(4)</span></a> 时，
必须使用 <tt class="LITERAL">device ath_rate_onoe</tt>, <tt class="LITERAL">device
ath_rate_amrr</tt>, 或 <tt class="LITERAL">device ath_rate_sample</tt> 之一。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bge&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bge</span>(4)</span></a>
驱动能够支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 框架了，
以及 BCM5714、 5721、 5750、 5751、 5751M 和 5789 芯片了。 [已合并]</p>

<p>加入了用于支持 USB Communication Device Class Ethernet 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cdce&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cdce</span>(4)</span></a> 驱动。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">cp</span>(4)</span></a> 驱动现在 MPSAFE
了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ctau&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ctau</span>(4)</span></a> 驱动现在
MPSAFE 了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cx&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">cx</span>(4)</span></a> 驱动现在 MPSAFE
了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">dc</span>(4)</span></a> 驱动现在支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 框架，
并且是 MPSAFE 的了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=de&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">de</span>(4)</span></a> 驱动现在 MPSAFE
了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ed</span>(4)</span></a> 驱动现在支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 框架了。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ed</span>(4)</span></a> 驱动现在 MPSAFE
了。</p>

<p>在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a> 驱动程序中，
对于 VLAN 标记 (tagging) 的硬件支持， 由于其和混杂模式之间的一些冲突被默认地禁用。
[已合并]</p>

<p>默认地禁用了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fxp</span>(4)</span></a>
驱动的以太网流控制功能， 以避免系统崩溃或进入内核调试器时同子网的其他系统发生问题。
[已合并]</p>

<p>由于不再被活跃地维护， 而且 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>
驱动能够支持它支持的全部硬件， 删去了 gx(4) 驱动。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hme&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hme</span>(4)</span></a> 驱动现在
MPSAFE 了。 [已合并]</p>

<p>加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipw</span>(4)</span></a> (用于
Intel PRO/Wireless 2100)， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iwi&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iwi</span>(4)</span></a> (用于
Intel PRO/Wireless 2200BG/2225BG/2915ABG)， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ral&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ral</span>(4)</span></a> (用于
Ralink Technology RT2500)， 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ural&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ural</span>(4)</span></a> (用于
Ralink Technology RT2500USB) 驱动。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ixgb&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ixgb</span>(4)</span></a> 驱动现在
MPSAFE 了。 [已合并]</p>

<p>由于无人使用， 删去了用于 LanMedia LMC1504 T1/E1 网卡的 musycc 驱动。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=my&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">my</span>(4)</span></a> 驱动现在 MPSAFE
了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcn&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcn</span>(4)</span></a> 驱动现在
MPSAFE 了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=re&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">re</span>(4)</span></a>
驱动现在能够支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 框架，
并且 MPSAFE 了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sf&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sf</span>(4)</span></a>
驱动现在支持设备混合轮询 (device polling) 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 了。
[已合并]</p>

<p>修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sk&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sk</span>(4)</span></a>
驱动中的多处程序设计错误。 这些问题主要影响 SMP 系统， 可能导致系统崩溃、 内核缺页、 SSH
连接中断， 以及文件传输问题。 更多细节， 可以在勘误公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ERRATA/notices/FreeBSD-EN-05:02.sk.asc"
target="_top">FreeBSD-EN-05:02.sk</a> 上找到。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sk&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sk</span>(4)</span></a> 驱动现在支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 了。
同时， 此驱动提供了对于基于 Yukon 的网卡的巨型帧的支持能力。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ste&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ste</span>(4)</span></a> 驱动支持
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vge&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vge</span>(4)</span></a>
驱动现在提供了混合轮询的支持 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">polling</span>(4)</span></a>)。</p>

<p>支持 802.11 设备的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlan</span>(4)</span></a> 框架，
进行了大规模的改写。 除了架构上的改进之外， 还完成了 802.11g、 WPA、 802.11i、 802.1x、
WME/WMM、 AP-端节能， 以及用于加密模块的插件框架、 验证和访问控制。 清特别注意， WEP
现在需要加载 <tt class="FILENAME">wlan_wep</tt> 模块 (或连入内核)。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xl&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">xl</span>(4)</span></a>
驱动现在能够支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">polling</span>(4)</span></a> 了。
[已合并]</p>
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="NET-PROTO" name="NET-PROTO">2.2.3 网络协议</a></h4>

<p>当发送方写的数据必须分片时， 关闭了 IPv6 中的 MTU 反馈。 [已合并]</p>

<p>实现了共用地址冗余协议 (CARP)。 CARP 来自 OpenBSD， 允许多个主机共享同一个 IP 地址，
从而提供了高可用性和负载均衡。 要了解更多细节， 请参考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=carp&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">carp</span>(4)</span></a>
联机手册。 [已合并]</p>

<p>加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>，
来自 NetBSD 的网桥实现。 它提供了对于 IEEE 802.1D 生成树， 对每个桥使用不同的设备，
以及对桥包进行过滤得能力。 现在可以用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
工具来对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
进行配置了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> <tt
class="LITERAL">IPDIVERT</tt> 选项现在可以通过内核模块的方式来加载了。 如果没有加载模块，
则 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
将拒绝安装 <tt class="LITERAL">divert</tt> 规则， 而 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a>
则会返回错误信息 “protocol not supported”。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> 可以与
<code class="VARNAME">debug.mpsafenet</code>=<tt class="LITERAL">1</tt> (默认情况下是 <tt
class="LITERAL">1</tt>)， 当使用了 <tt class="LITERAL">gid</tt>, <tt
class="LITERAL">jail</tt>, 和/或 <tt class="LITERAL">uid</tt> 规则选项时正常工作了。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dummynet</span>(4)</span></a>
系统能够支持 IPv6 了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a>
现在支持通过转发 socket 来区分并标记 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 包了。
此外， 还可以通过特定的 payload 尺寸来匹配 TCP 包。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a>
现在支持通过转发 socket， 以及 TCP 数据长度来区分并标记 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a>
包了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a> <tt
class="LITERAL">ipfw fwd</tt> 规则现在支持完整的包目的地管理了， 其前提是启用了内核选项
<tt class="LITERAL">options IPFIRWALL_FORWARD</tt> 的基础上打开了 <tt
class="LITERAL">options IPFIREWALL_FORWARD_EXTENDED</tt>。 这个内核选项将禁用所有的限制，
以保证本地生成的包， 和发到配置在本地的 IP 地址的包能够正常地发出和转发。 请注意，
必须细心地编写 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a> 规则，
以确保类似 PMTU 发现这类应用不致发生异常。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a>
系统能够支持只应用于 IPv4 的规则了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipnat&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipnat</span>(8)</span></a>
允许在非 TCP/UDP 包上使用重定向规则了。 [已合并]</p>

<p>目前正在进行的工作， 在逐步去掉网络协议栈中的全局锁， 并改进锁的策略。</p>

<p><tt class="FILENAME">libalias</tt> 库现在可以作为内核模块来构建了。</p>

<p>连接状态变化通知改为发到 <tt class="FILENAME">/dev/devctl</tt> 了。</p>

<p>新的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_ipfw</span>(4)</span></a>
NetGraph 节点， 提供了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netgraph&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">netgraph</span>(4)</span></a>
机制之间的简单接口。</p>

<p>加入了新的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_nat&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_nat</span>(4)</span></a>
NetGraph 节点， 用于实现 NAT 功能。</p>

<p>新的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_netflow&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_netflow</span>(4)</span></a>
NetGraph 节点， 使得采用 FreeBSD 的路由器能够运行 NetFlow version 5 的导出。 [已合并]</p>

<p>加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_tcpmss&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_tcpmss</span>(4)</span></a>
NetGraph 节点。 它支持改变 TCP 包的 MSS 选项。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sppp</span>(4)</span></a>
驱动程序现在提供了帧转发 (Frame Relay) 支持。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sppp</span>(4)</span></a> 驱动现在
MPSAFE 了。</p>

<p>FreeBSD 路由表现在要求路由的网关必须和路由本身同属同一地址族。 现在， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=route&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">route</span>(8)</span></a>
工具会拒绝异种地址族混用了。 例如：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> route add 10.1.1.1 -inet6 fe80::1%fxp0
</pre>

<p>实现了一个新的 sysctl <code class="VARNAME">net.link.tap.user_open</code>。
它允许基于文件系统权限对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tap&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tap</span>(4)</span></a>
设备进行非特权访问。</p>

<p>修正了 TCP 的一处问题， 这一问题有时会导致当接收窗口大小为零时， RST 包被忽略的问题。
[已合并]</p>

<p>改进了 FreeBSD TCP 协议栈中对 <tt class="LITERAL">RST</tt> 的处理，
使得这类攻击变得尽可能地困难， 同时最大限度地保障了和其他 TCP 协议栈的兼容性。 算法如下：
对于所有在 <tt class="LITERAL">ESTABLISHED</tt> 状态的连接， 只有当包的顺序号与 <code
class="VARNAME">last_ack_sent</code> 精确匹配时才将连接复位；
所有不符合的分片都将被直接丢弃。 对于所有其他状态的连接， 则对窗口内的复位请求进行处理。
其它的复位分片则被直接丢弃。 需要说明的是， 这一行为和 RFC 793 标准抵触， 传统的
(但安全性较差) 行为， 可以通过将新增的 sysctl <code
class="VARNAME">net.inet.tcp.insecure_rst</code> 设置为 <tt class="LITERAL">1</tt>
来还原。 [已合并]</p>

<p>在 TCP SACK 实现中的许多错误得到了修正。 [已合并]</p>

<p>删去了 RFC 1644 T/TCP 支持。 这是因为其设计基于一个较弱的安全模型，
使得拒绝服务攻击变得容易。 这一 TCP 扩展被最近的一个 Internet 草案认为是有缺陷的。</p>

<p>已经将 KAME IPv4 IPsec 实现集成到了 FreeBSD 中， 现在它支持 TCP-MD5 了。 [已合并]</p>

<p>短期使用端口的随机分配导致了在高连接速率时的端口重用问题。
这一功能现在在短期内发生大量连接， 即新端口的创建速率快于每秒 <code
class="VARNAME">net.inet.ip.portrange.randomcps</code> 时， 会被自动停用 <code
class="VARNAME">net.inet.ip.portrange.randomtime</code> 秒。 这两个 sysctl 变量的默认值，
分别是 <tt class="LITERAL">10</tt> 和 <tt class="LITERAL">45</tt>。 [已合并]</p>

<p>在 IPX/SPX 协议栈的许多数据结构上应用了细化的锁。 尽管目前还不是完全的 MPSAFE，
基本上已经可以安全地在不用全局锁时使用 IPX/SPX 了 (换言之， 完全可以将 <code
class="VARNAME">debug.mpsafenet</code> sysctl 变量设置为 <tt
class="LITERAL">1</tt>)。</p>

<p>Unix domain socket 现在提供了新增的 <tt class="LITERAL">LOCAL_CREDS</tt> 和 <tt
class="LITERAL">LOCAL_CONNWAIT</tt> 选项。 其中， <tt class="LITERAL">LOCAL_CREDS</tt>
选项提供了一种机制， 使得接收方能够以 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=recvmsg&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">recvmsg</span>(2)</span></a>
控制消息的形式， 收到发送者的进程凭据。 而 <tt class="LITERAL">LOCAL_CONNWAIT</tt> 则将让
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">connect</span>(2)</span></a>
函数阻塞， 直到在监听 socket 上执行了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=accept&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">accept</span>(2)</span></a> 为止。
欲了解进一步的情况， 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=unix&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">unix</span>(4)</span></a>
联机手册。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="DISKS" name="DISKS">2.2.4 磁盘及存储</a></h4>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=amr&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">amr</span>(4)</span></a>
现在可以安全地在使用了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pae</span>(4)</span></a>
的系统上使用了。 [已合并]</p>

<p>对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>
驱动族进行了全面翻新。 它被拆分为模块， 并可以分别加载和卸载了 (<tt
class="FILENAME">atapci</tt> 和 <tt class="FILENAME">ata</tt> 这两个模块是加载子驱动， 即
<tt class="FILENAME">atadisk</tt>、 <tt class="FILENAME">atapicd</tt>、 <tt
class="FILENAME">atapifd</tt>、 <tt class="FILENAME">atapist</tt>， 以及 <tt
class="FILENAME">ataraid</tt> 的前提条件)。 在支持的 SATA 控制器上， 能够热插拔设备了。
对 ATA RAID 支持进行了重写， 新版本支持了一系列新的元数据格式。 而 <tt
class="FILENAME">atapicd</tt> 驱动则不再支持 CD 换盘装置。 这一更新也被称作 “ATA
mkIII”。</p>

<p>加入了 SHSEC GEOM 类。 它提供了在多个 GEOM 提供者之间实现秘密分享的能力。
所有提供者必须都存在， 才能够解开保存的秘密信息。 这一特性可以通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gshsec&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gshsec</span>(8)</span></a>
工具来控制。 [已合并]</p>

<p>加入了新的基于 GEOM 的磁盘加密机制， GEOM_ELI。 它利用了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crypto&sektion=9&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">crypto</span>(9)</span></a>
框架提供的硬件加速， 并支持多种不同的加密算法。 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geli</span>(8)</span></a>
以了解具体的细节。 [已合并]</p>

<p>加入了用于支持 HighPoint RocketRAID 182x 系列硬件的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hptmv&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hptmv</span>(4)</span></a> 驱动。
[已合并]</p>

<p>经过改进的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ips&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ips</span>(4)</span></a>
驱动在较新的 ServeRAID 型号上， 能够支持内核崩溃的转储操作了。 [已合并]</p>

<p>删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=matcd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">matcd</span>(4)</span></a> 驱动。
[已合并]</p>

<p>在 <tt class="FILENAME">GENERIC</tt> 内核中， 默认的 SCSI 引导时探测延时，
从十五秒减少到了五秒。</p>

<p>删去了旧的 vinum(4) 子系统， 新的基于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geom</span>(4)</span></a>
的版本提供了更好的功能。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=twa&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">twa</span>(4)</span></a>
驱动更新到了来自 3ware 网站的 9.2 版 (用于 FreeBSD 5.2.1)</p>

<p>删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wd&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">wd</span>(4)</span></a> 驱动。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ata</span>(4)</span></a>
驱动已经能够在 pc98 平台上很好的工作， 因而不再需要旧的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wd&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">wd</span>(4)</span></a> 驱动了。</p>

<p>关于新挂接的 cd9660 文件系统的信息 (例如， 存在 RockRidge 扩展) 现在只有在内核以详细
(verbose) 模式启动时才会显示了。 这一修改主要是减少 (一般来说不必要的)
内核日志消息的数量。 [已合并]</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FS" name="FS">2.2.5 文件系统</a></h4>

<p>原先在挂接时进行的， 重新计算 “脏” 的 (即， 上次停机时没有正常卸下) UFS 和 UFS2
文件系统摘要信息的工作， 现在转由后台 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fsck</span>(8)</span></a> 进行。
这一修改将极大地改善系统崩溃后挂接大文件系统时的速度。 如果希望恢复原先的行为，
则可以通过将 <code class="VARNAME">vfs.ffs.compute_summary_at_mount</code> sysctl
变量设置为非零值来完成。 [已合并]</p>

<p>修正了由于 NFS 服务器可能导致的一个内核崩溃。 更多细节， 可以在勘误公告 <a
href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ERRATA/notices/FreeBSD-EN-05:01.nfs.asc"
target="_top">FreeBSD-EN-05:01.nfs</a>. 中找到。 [已合并]</p>

<p>加入了针对 ReiserFS 版本 3 的只读支持。 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_reiserfs&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mount_reiserfs</span>(8)</span></a> 以了解细节。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="AEN881" name="AEN881">2.2.6 基本系统附带的第三方软件</a></h4>

<p><b class="APPLICATION">ACPI-CA</b> 由 20040527 更新到了 20041119。 [已合并]</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="USERLAND" name="USERLAND">2.3 应用程序变动</a></h3>

<p>加入了用于处理二进制文件补丁的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdiff&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsdiff</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bspatch&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bspatch</span>(1)</span></a>
工具。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">burncd</span>(8)</span></a>
工具现在能够在光盘定型之后执行命令了 (例如 <tt class="COMMAND">eject</tt>)。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">chflags</span>(1)</span></a>
工具新增了 <code class="OPTION">-h</code> 选项， 用以改变符号连接本身的标记。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=env&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">env</span>(1)</span></a>
工具增加了 <code class="OPTION">-v</code> 选项，
表示在执行之前把命令本身写到标准错误输出上。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=env&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">env</span>(1)</span></a>
程序新增了 <code class="OPTION">-S <tt class="REPLACEABLE"><i>string</i></tt></code>
选项用以分割 <tt class="REPLACEABLE"><i>string</i></tt>
并将它们作为命令的命令行参数。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=env&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">env</span>(1)</span></a>
程序新增了 <code class="OPTION">-P <tt class="REPLACEABLE"><i>altpath</i></tt></code>
选项， 用以设置命令的搜索路径。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a>
程序现在能够正确地为目录和文件的状态使用 <tt class="LITERAL">212</tt> 和 <tt
class="LITERAL">213</tt> 状态代码了 (过去的版本， 曾经长期使用 <tt
class="LITERAL">211</tt>)。 这一行为在 RFC 959 中进行了描述。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gpt</span>(8)</span></a> 的 <tt
class="LITERAL">create</tt> 命令， 新增了 <code class="OPTION">-f</code> 命令行标志，
用以在原先已经存在了 MBR 记录的磁盘上强制创建 GPT。 [已合并]</p>

<p>如果指定了 <tt class="LITERAL">AF_UNSPEC</tt>， 现在的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getaddrinfo&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getaddrinfo</span>(3)</span></a>
函数会在查询 <tt class="LITERAL">AAAA</tt> 记录之前， 首先查询 <tt class="LITERAL">A</tt>
DNS 资源记录。 一些有问题的 DNS 服务器会在 <tt class="LITERAL">AAAA</tt> 记录不存在时返回
<tt class="LITERAL">NXDOMAIN</tt>， 而根据标准， 它应该返回 <tt
class="LITERAL">NOERROR</tt> 和一条空记录。 这类服务器会在 IPv4/IPv6
双栈节点上导致查询停止， 因为对于 <tt class="LITERAL">AAAA</tt> 的查询时返回的 <tt
class="LITERAL">NXDOMAIN</tt> 会导致服务器停止解析 <tt class="LITERAL">A</tt>
记录的尝试。 另外， 这一行为也被视为一种潜在的拒绝服务攻击 (参见 <a
href="http://www.kb.cert.org/vuls/id/714121"
target="_top">http://www.kb.cert.org/vuls/id/714121</a> 以了解更多细节)。 请注意，
虽然改变了查询顺序， 返回的结果仍然是 <tt class="LITERAL">AF_INET6</tt> 记录先于 <tt
class="LITERAL">AF_INET</tt> 记录。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gethostbyname&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">gethostbyname</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gethostbyname2&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">gethostbyname2</span>(3)</span></a>, 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gethostbyaddr&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gethostbyaddr</span>(3)</span></a>
函数现在是线程安全的了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetent&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetent</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetbyname&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetbyname</span>(3)</span></a>,
以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetbyaddr&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetbyaddr</span>(3)</span></a>
函数现在是线程安全的了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getprotoent&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getprotoent</span>(3)</span></a>，
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getprotobyname&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">getprotobyname</span>(3)</span></a>， 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getprotobynumber&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">getprotobynumber</span>(3)</span></a> 函数现在是线程安全的了。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getservent&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getservent</span>(3)</span></a>，
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getservbyname&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">getservbyname</span>(3)</span></a>， 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getservbyport&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getservbyport</span>(3)</span></a>
函数现在是线程安全的了。 [已合并]</p>

<p>为遵循 IEEE Std 1003.1-2001 标准 (也称作 POSIX 2001)， <code class="VARNAME">struct
netent</code> 结构的 <code class="VARNAME">n_net</code> 成员， 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetbyaddr&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetbyaddr</span>(3)</span></a>
的第一个参数的类型， 被改为了 <tt class="LITERAL">uint32_t</tt>。 由于这些修改， 在 64-位
平台上的 ABI 与 FreeBSD 先前的版本不再兼容， 而 <tt class="FILENAME">libpcap</tt>
共享库的主版本号也随之增加。 在 64-位 平台上， 如果从较早版本的 FreeBSD 升级， 则所有使用
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetbyaddr&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetbyaddr</span>(3)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetbyname&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetbyname</span>(3)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnetent&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnetent</span>(3)</span></a>,
以及 <tt class="FILENAME">libpcap</tt> 的程序都必须重新编译。</p>

<p>gvinum(8) 工具现在支持 <tt class="COMMAND">checkparity</tt>、 <tt
class="COMMAND">rebuildparity</tt>， 以及 <tt class="COMMAND">setstate</tt>
这三个子命令了。 [已合并]</p>

<p>对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
工具进行了重构。 现在其模块化更为清晰， 并且在处理某些网络接口专有的功能时更为灵活。 对
802.11 支持进行了更新， 以便支持最近对于 802.11 子系统和驱动程序所进行的改进。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
工具新增了 <code class="OPTION">-tunnel</code> 参数， 它实际上等价于 <code
class="OPTION">deletetunnel</code>， 以简化操作并方便输入。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> 的
<code class="OPTION">-vlandev</code> 参数， 不再要求必须附带网络接口的名字的参数了。
为了保持向下兼容， 原有的参数仍然保留， 但不再鼓励使用。</p>

<p>对于相当数量的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(8)</span></a>
选项的简写形式的支持， 不再推荐使用。 如果使用了这些简写， 则会在 stderr 输出警告，
以及对应的、 正确的全称形式。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kldstat</span>(8)</span></a>
工具提供了用以返回指定内核模块状态的 <code class="OPTION">-m</code> 选项。 [已合并]</p>

<p>磁盘上的 <tt class="LITERAL">LC_CTYPE</tt> 文件格式，
现在已经改为机器无关的格式了。</p>

<p><b class="APPLICATION">libkvm</b> 现在能够支持 amd64 以及 i386 平台上的 ELF
崩溃内核转存， 以及 32-位平台上的大型崩溃内核转存 (超过 4GB) 和 i386 平台上的 PAE
崩溃内核转存格式了。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mixer</span>(8)</span></a>
工具新增了 <code class="OPTION">-S</code> 参数。 它的功能和 <code
class="OPTION">-s</code> 一样， 但并不输出混音字段间隔符。</p>

<p>修正了 <tt class="FILENAME">libalias</tt> 函数库中的一处问题， 该问题可能导致使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">natd</span>(8)</span></a> 的 <code
class="OPTION">-reverse</code> 选项时出现 core dump。</p>

<p><tt class="FILENAME">libarchive</tt> 库 (以及使用它的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> 命令)
现在能够读取 ISO 镜像文件 (包括可选的 RockRidge 扩展) 和 ZIP 压缩文件 (采用 <tt
class="LITERAL">deflate</tt> 和 <tt class="LITERAL">none</tt> 的压缩) 了。 [已合并]</p>

<p><tt class="FILENAME">libarchive</tt> 库现在能够支持处理包含压缩容量超过 4GB 的 ZIP
文件项 (ZIP64 扩展) 和 Unix 扩展了。</p>

<p>加入了用于访问 GPIB 设备 (通过使用 pcii 驱动程序) 的 <code class="FUNCTION">ib<tt
class="REPLACEABLE"><i>foo</i></tt></code> API 的 <tt class="FILENAME">libgpib</tt> 库。
[已合并]</p>

<p>增加了在 <tt class="FILENAME">libpthread</tt>、 <tt class="FILENAME">libthr</tt>，
以及 <tt class="FILENAME">libc_r</tt> 的堆栈大小。 在 32-位 的平台上，
主线程的默认堆栈尺寸为 2MB， 而其他线程的默认堆栈尺寸， 则是 1MB。 在 64-位平台上，
默认的堆栈大小相应的是 4MB 和 2MB。 [已合并]</p>

<p>删去了 <tt class="FILENAME">libxpg4</tt> 库， 因为很久以前它的功能就已经被并入了 <tt
class="FILENAME">libc</tt>。 所有连接了 <tt class="FILENAME">libxpg4</tt>
的二进制执行文件， 都必须重新编译， 或者使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libmap.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libmap.conf</span>(5)</span></a>。
请注意， 在 FreeBSD 基本系统中没有这样的程序。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lpd</span>(8)</span></a>
程序现在会进行检查， 以确保在打印来自其他主机的数据文件时， 在开始打印之前已经传送完成。
某些 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lpr</span>(1)</span></a> 实现，
会在发送对应的数据文件之前发送控制文件， 在繁忙的打印服务器上， 这可能会造成问题。
[已合并]</p>

<p>为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=math&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">math</span>(3)</span></a>
函数库实现了一系列新的函数。 其中包括 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ceill&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ceill</span>(3)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=floorl&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">floorl</span>(3)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ilogbl&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ilogbl</span>(3)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fma&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fma</span>(3)</span></a>
及其变体， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lrint&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lrint</span>(3)</span></a>
及其变体， 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lround&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lround</span>(3)</span></a>
及其变体。 [已合并]</p>

<p>不再推荐使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mknod&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mknod</span>(8)</span></a> 工具。
设备节点从 FreeBSD 5.0 开始， 由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(5)</span></a>
设备文件系统自动管理。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">moused</span>(8)</span></a>
服务能够支持 “虚拟滚轮” 了， 这一模式下， 按住鼠标中键时移动鼠标将被解释为滚轮操作。
这一功能可以通过 <code class="OPTION">-V</code> 标志来启用。 [已合并]</p>

<p>为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
加入了属主为 <tt class="USERNAME">bind</tt> 用户 (用于创建区域的日志文件)
的用于动态域的隔离目录。 要了解进一步的情况， 请参见示范的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named.conf</span>(5)</span></a>
中动态域的例子。 [已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ncal&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ncal</span>(1)</span></a>
工具提供了一个 <code class="OPTION">-m</code> 选项， 用以生成当前年份指定月份的日历。
[已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
提供了一个 <code class="OPTION">-n</code> 标志， 来禁止在新文件系统上创建 <tt
class="FILENAME">.snap</tt> 目录。 这一特性主要是为那些不需要快照支持的文件系统，
如内存或 vnode 文件系统准备的。 [已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
会在创建 UFS 或 UFS2 文件系统， 而无法在其上产生快照时给出警告。
这一情况会在很大的文件系统使用很小尺寸的块时发生。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newsyslog</span>(8)</span></a>
工具现在提供了 <code class="OPTION">-d</code> 选项， 用于为日志文件指定根目录， 类似于
BSD make 过程中的 <code class="VARNAME">DESTDIR</code>。 这一变化只影响日志文件的路径，
而不会影响配置文件 (<code class="OPTION">-f</code>) 或存档目录 (<code
class="OPTION">-a</code>) 的路径。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newsyslog</span>(8)</span></a>
工具能够使用 <code class="OPTION">-N</code> 参数， 以禁止对文件的轮转了。</p>

<p>加入了编译用户应用时的 <tt class="LITERAL">NO_NIS</tt> 开关。 如其名称所暗示的，
启用这个 <tt class="FILENAME">Makefile</tt> 变量将使许多程序中不再包含 NIS 支持，
并不再构建 NIS 工具。 [已合并]</p>

<p>多年以来， FreeBSD 同时使用了 <tt class="FILENAME">Makefile</tt> 变量 <code
class="VARNAME">NO<tt class="REPLACEABLE"><i>FOO</i></tt></code> 和 <code
class="VARNAME">NO_<tt class="REPLACEABLE"><i>FOO</i></tt></code>。 为了一致性，
所有的变量都改为了 <code class="VARNAME">NO_<tt
class="REPLACEABLE"><i>FOO</i></tt></code> 的形式。 在 <tt
class="FILENAME">/usr/share/mk/bsd.compat.mk</tt> 文件中， 提供了这些变量的一份完整列表；
此外， 它也提供了对于旧名字的临时性向下兼容支持。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">periodic</span>(8)</span></a>
安全检查输出， 能够支持显示由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a>
所阻止的包的统计数据了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a>
现在提供了 <code class="OPTION">-S</code> 选项， 用于匹配系统进程 (内核线程)。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
现在支持了一个新的 <code class="OPTION">-F</code> 选项， 允许在一个包含 PID
的文件所指定的范围内进行匹配。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
现在支持 <code class="OPTION">-i</code> 选项， 在匹配进程时忽略大小写。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
现在支持 <code class="OPTION">-j</code> 选项， 允许按 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(2)</span></a> ID
来进行匹配。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pgrep&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pgrep</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
现在支持 <code class="OPTION">-o</code> 选项， 来匹配所有进程中最老的 (最新近启动的)
进程。</p>

<p>加入了用于管理电源功耗的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=powerd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">powerd</span>(8)</span></a>
程序。</p>

<p>加入了用于下载、 更新， 并释放压缩格式的 FreeBSD ports tree 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portsnap</span>(8)</span></a>
工具。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
程序实现了 <code class="OPTION">echo</code> 参数， 这使得分别地启用 LCP ECHO 和 LQR
报告成为可能。 较早版本的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
会在协商失败时返回到 LCP ECHO 模式。 现在需要指定 <tt class="COMMAND">enable echo</tt>
来获得这一行为。 [已合并]</p>

<p>在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(8)</span></a>
程序中加入了用于支持 RFC 2865 之前的 RADIUS 服务器的 <code class="OPTION">disable
NAS-IP-Address</code> 和 <code class="OPTION">disable NAS-Identifier</code> 选项。</p>

<p>在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pppd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pppd</span>(8)</span></a>
程序中的两个问题得以修正。 这些错误可能会导致不正确的 CBCP 响应， 而违反了 微软 PPP
回呼控制协议的 3.2 节。 [已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&sektion=1&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ps</span>(1)</span></a> 的 <code
class="OPTION">-o</code> 选项能够支持 <tt class="LITERAL">jid</tt> 关键字了。
它用于显示每一个进程的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=2&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(2)</span></a> ID。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pstat&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pstat</span>(8)</span></a> 提供了
<code class="OPTION">-h</code> 选项， 用以在显示交换区尺寸时显示 SI 后缀， 例如 K、 M，
和 G。</p>

<p>在 <tt class="FILENAME">/rescue</tt> 中的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rescue&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rescue</span>(8)</span></a> 工具，
现在使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdtar&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsdtar</span>(1)</span></a> 代替了
GNU tar。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a>
工具又能够处理 FreeBSD 版本 1 的转储磁带了。 [已合并]</p>

<p>修正了一个导致 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rexecd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rexecd</span>(8)</span></a>
工具总是以 <code class="OPTION">-i</code> 参数运行的问题。 [已合并]</p>

<p>删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rexecd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rexecd</span>(8)</span></a> 工具。
在 FreeBSD 源代码中已经没有 rexec 的客户程序， 而客户函数 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rexec&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rexec</span>(3)</span></a>
也只存在于 <tt class="FILENAME">libcompat</tt> 中。</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&sektion=1&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rm</span>(1)</span></a> 工具提供了一个
<code class="OPTION">-I</code> 选项。 如果选择递归地删除目录，
或者在命令行上指定一次删除超过 3 个文件， 这个选项会提供一次确认的机会。 [已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&sektion=1&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rm</span>(1)</span></a> 会在使用 <code
class="OPTION">-r</code> 和 <code class="OPTION">-f</code> 递归地删除非空目录时，
屏蔽掉诊断信息。 这一行为是单一 UNIX 标准第 3 版 (SUSv3) 所要求的。</p>

<p>加入了用于检查字符串是否是当前 locale 的编码的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rpmatch&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rpmatch</span>(3)</span></a>
库函数。</p>

<p>下列 ISO/IEC 9899:1999 标准函数得以实现： <code class="FUNCTION">roundl()</code>、
<code class="FUNCTION">lroundl()</code>、 <code class="FUNCTION">llroundl()</code>、
<code class="FUNCTION">truncl()</code>， 以及 <code
class="FUNCTION">floorl()</code>。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rtld&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rtld</span>(1)</span></a>
动态连接器现在支持通过 <code class="VARNAME">LD_LIBMAP</code>
环境变量来指定库映射关系了。 这一选项能够覆盖 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libmap.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libmap.conf</span>(5)</span></a>
的设置。 [已合并]</p>

<p>删去了非标准的多字节和宽字符支持 rune(3) 接口。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sed&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sed</span>(1)</span></a>
现在支持使用 <code class="OPTION">-l</code> 选项， 来启用输出的行缓冲。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=strftime&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">strftime</span>(3)</span></a>
现在对某些 GNU 扩展， 例如 <tt class="LITERAL">-</tt> (不填充)， <tt
class="LITERAL">_</tt> (使用空格填充)， 以及 <tt class="LITERAL">0</tt> (使用零来填充)，
提供了支持。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syslog</span>(3)</span></a>
函数现在是线程安全的了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syslogd</span>(8)</span></a>
工具现在会打开一个额外的域 socket (默认为 <tt class="FILENAME">/var/run/logpriv</tt>)，
其权限是 <tt class="LITERAL">0600</tt>， 作为和特权程序的接口。
者避免了发生本地的拒绝服务攻击时， 特权程序由于域 socket 的缓冲区耗尽而死锁。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syslogd</span>(8)</span></a>
新增了 <code class="OPTION">-S</code> 选项， 用以改变特权 socket 的路径名。
如果您不希望服务接受来自本地 socket 的消息 (默认使用的是 <tt
class="FILENAME">/var/run/log</tt> 和 <tt class="FILENAME">/var/run/logpriv</tt>) 时，
这个选项就很有用了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syslogd</span>(8)</span></a>
工具现在允许在主机名标识符中使用 <tt class="LITERAL">:</tt> 和 <tt class="LITERAL">%</tt>
这两个字符了。 这些字符被 IPv6 地址和 scope ID 使用。 [已合并]</p>

<p>现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=systat&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">systat</span>(1)</span></a> <code
class="OPTION">-netstat</code> 的显示也包括了 IPv6 的数据。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tail&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tail</span>(1)</span></a> 的 <code
class="OPTION">-f</code> 选项能够支持同时查看多个文件了。 [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnetd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">telnetd</span>(8)</span></a>
程序， 现在支持通过 <code class="OPTION">-S</code> 来指定数字化的 TOS 字节了。</p>

<p>在为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a>
指定端口号时使用 <tt class="LITERAL">+</tt> 字符， 现在可以关闭选项协商，
并允许发出置了高位的字符了。 这一特性能够帮助利用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">telnet</span>(1)</span></a>
作为协议测试工具来使用。</p>

<p>增加了用于关闭选定的 TCP 连接的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdrop&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tcpdrop</span>(8)</span></a>
命令。 它来自 OpenBSD. [已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=what&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">what</span>(1)</span></a> 新增了
<code class="OPTION">-q</code> 选项， 其功能是， 显示匹配的文字，
但不对文字的格式进行处理。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=whois&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">whois</span>(1)</span></a>
现在支持 <code class="OPTION">-k</code> 标志， 用以查询 <tt
class="HOSTID">whois.krnic.net</tt> (韩国国家 Internet 开发局)， 它提供了在韩国境内的 IP
地址分配的详细资料。 [已合并]</p>

<p>修改了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=xargs&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">xargs</span>(1)</span></a> 命令的
<code class="OPTION">-I</code> 选项， 以顺应 IEEE Std 1003.1-2004。
这一标准要求创建的参数不能超过 255 字节。</p>

<p>修正了一个导致类似 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hosts</span>(5)</span></a>， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=services&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">services</span>(5)</span></a>
等配置文件在结尾处不是一个新的换行符时被忽略的问题。 [已合并]</p>

<p>加入了新的系统用户/组 <tt class="USERNAME">_dhcp</tt> 用于支持来自 OpenBSD 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">dhclient</span>(8)</span></a>。</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="RC-SCRIPTS" name="RC-SCRIPTS">2.3.1 <tt
class="FILENAME">/etc/rc.d</tt> 脚本</a></h4>

<p>加入了用于启动 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bsnmpd&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bsnmpd</span>(1)</span></a>
的启动脚本， <tt class="FILENAME">rc.d/bsnmpd</tt>。</p>

<p>现在 <tt class="FILENAME">rc.d/jail</tt> 启动脚本能够支持通过 <code
class="VARNAME">jail_<tt class="REPLACEABLE"><i>name</i></tt>_flags</code> 变量来指定 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a> 参数了。
[已合并]</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
现在支持在引导时修改网络接口的名字了。 [已合并] 例如：</p>

<pre class="PROGRAMLISTING">
ifconfig_fxp0_name="net0"
ifconfig_net0="inet 10.0.0.1/16"
</pre>

<p>如果将设备名作为脚本的第二个参数， <tt class="FILENAME">rc.d/moused</tt> 脚本现在会
start/stop/check 某一特定的设备：</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> /etc/rc.d/moused start ums0
</pre>

<p>要在不同的鼠标上使用不同的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
开关， 只需把它们作为开关的一部分。 例如， 对于 <tt class="FILENAME">/dev/ums0</tt>
可以使用：</p>

<pre class="PROGRAMLISTING">
moused_ums0_enable=yes
moused_ums0_flags="-z 4"
moused_ums0_port="/dev/ums0"
</pre>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a>
现在支持 <code class="VARNAME">tmpmfs_flags</code> 和 <code
class="VARNAME">varmfs_flags</code> 两个变量了。 这些变量， 可以用来向 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdmfs</span>(8)</span></a>
工具提供额外的选项， 从而更好地定制 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=md&sektion=4&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">md</span>(4)</span></a>
文件系统的创建过程， 包括是否打开 softupdates， 指定文件系统的默认属主， 等等。
[已合并]</p>

<p>由于下列脚本是 NetBSD 专用的， 而且从未在 FreeBSD 中用到， 因此全部删去： <tt
class="FILENAME">altqd</tt>, <tt class="FILENAME">dhcpd</tt>, <tt
class="FILENAME">dhcrelay</tt>, <tt class="FILENAME">downinterfaces</tt>, <tt
class="FILENAME">gated</tt>, <tt class="FILENAME">ifwatchd</tt>, <tt
class="FILENAME">kdc</tt>, <tt class="FILENAME">lkm1</tt>, <tt
class="FILENAME">lkm2</tt>, <tt class="FILENAME">lkm3</tt>, <tt
class="FILENAME">mixerctl</tt>, <tt class="FILENAME">mopd</tt>, <tt
class="FILENAME">mountall</tt>, <tt class="FILENAME">ndbootd</tt>, <tt
class="FILENAME">network</tt>, <tt class="FILENAME">poffd</tt>, <tt
class="FILENAME">postfix</tt>, <tt class="FILENAME">ppp</tt>, <tt
class="FILENAME">racoon</tt>, <tt class="FILENAME">raidframe</tt>, <tt
class="FILENAME">rbootd</tt>, <tt class="FILENAME">rtsold</tt>, <tt
class="FILENAME">screenblank</tt>, <tt class="FILENAME">swap2</tt>, <tt
class="FILENAME">sysdb</tt>, <tt class="FILENAME">wscons</tt>, <tt
class="FILENAME">xdm</tt>, 以及 <tt class="FILENAME">xfs</tt></p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="CONTRIB" name="CONTRIB">2.4 基本系统包含的第三方软件</a></h3>

<p><b class="APPLICATION">awk</b> 从 2004 年 2 月 7 日的版本， 升级到了 2005 年 4 月 24
日的版本。</p>

<p><b class="APPLICATION">BIND</b> 从 9.3.0 升级到了 9.3.1。 [已合并]</p>

<p><b class="APPLICATION">bsnmp</b> 从 1.7 升级到了 1.10。</p>

<p><b class="APPLICATION">bzip2</b> 从 1.0.2 升级到了 1.0.3。</p>

<p>导入了 OpenBSD 3.7 的 <b class="APPLICATION">OpenBSD dhclient</b>。 它取代了先前的
FreeBSD 版本中的 ISC DHCP 客户端。</p>

<p><b class="APPLICATION">FILE</b> 从 4.10 升级到了 4.12。</p>

<p><b class="APPLICATION">GNU GCC</b> 从 2004 年 6 月 28 日的 3.4.2-prerelease
版本升级到了 3.4.4。</p>

<p>从 Fedora 的 grep-2.5.1-48 源代码 RPM 中获得的一系列错误修正和性能改进， 业已加入到 <b
class="APPLICATION">GNU grep</b> 中。</p>

<p><b class="APPLICATION">GNU readline</b> 从 4.3 升级到了 5.0。</p>

<p><b class="APPLICATION">IPFilter</b> 从 3.4.35 升级到了 4.1.18。</p>

<p><b class="APPLICATION">Heimdal</b> 从 0.6.1 升级到了 0.6.3。 [已合并]</p>

<p>导入了 <b class="APPLICATION">hostapd</b> v0.3.9。 这是一个以用户态运行的 IEEE 802.11
AP 和 IEEE 802.1X/WPA/WPA2/EAP 验证服务和 RADIUS 验证服务期。 要了解更多细节， 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hostapd&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hostapd</span>(8)</span></a>。</p>

<p><b class="APPLICATION">libpcap</b> 从 v0.8.3 升级到了 v0.9.1 (alpha 096)。</p>

<p><b class="APPLICATION">libregex</b> 从来自 <b class="APPLICATION">GNU grep</b> 2.5.1
的快照， 更新为 <b class="APPLICATION">glibc</b> CVS 代码库中的 <tt
class="LITERAL">fedora-glibc-2_3_4-21</tt> tag 的版本。</p>

<p><b class="APPLICATION">libz</b> 从 1.2.1 升级到了 1.2.2。</p>

<p><b class="APPLICATION">lukemftp</b> 从来自 NetBSD 源代码在 2004 年 4 月 26 日的快照，
升级到了 2005 年 5 月 16 日的快照。</p>

<p>引入了来自 OpenBSD 的 2005 年 2 月 4 日快照的 <b class="APPLICATION">netcat</b>。
更多信息， 可以在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nc&sektion=1&manpath=FreeBSD+6.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">nc</span>(1)</span></a>
联机手册中找到。 [已合并]</p>

<p><b class="APPLICATION">NgATM</b> 从 1.0 升级到了 1.2。</p>

<p><b class="APPLICATION">OpenPAM</b> 从 Eelgrass 版升级到了 Figwort 版。</p>

<p><b class="APPLICATION">OpenSSH</b> 从 3.8p1 升级到了 4.1p1。</p>

<p><b class="APPLICATION">OpenSSL</b> 从 0.9.7d 升级到了 0.9.7e。 [已合并]</p>

<p><b class="APPLICATION">pf</b>， 从之前 <b class="APPLICATION">OpenBSD</b> 3.5
所包含的版本， 升级到了 <b class="APPLICATION">OpenBSD</b> 3.7 中的版本。</p>

<p><b class="APPLICATION">sendmail</b> 从 8.13.1 升级到了 version 8.13.4。 它现在支持 <tt
class="LITERAL">OSTYPE(freebsd6)</tt> 了。</p>

<p><b class="APPLICATION">tcpdump</b> 从 v3.8.3 升级到了 v3.9.1 (alpha 096)。</p>

<p><b class="APPLICATION">tcsh</b> 从 6.13.00 升级到了 6.14.00。</p>

<p><b class="APPLICATION">texinfo</b> 从 4.6 升级到了 4.8。</p>

<p>时区数据库从 <b class="APPLICATION">tzdata2004e</b> 版升级到了 <b
class="APPLICATION">tzdata2004g</b> 版。 [已合并]</p>

<p>加入了 <b class="APPLICATION">WPA Supplicant</b> v0.3.9。 它提供了 WPA/IEEE 802.11i
功能的 WPA 请求组件。 要了解进一步的详情， 请参考 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_supplicant&sektion=8&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">wpa_supplicant</span>(8)</span></a>。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="PORTS" name="PORTS">2.5 Ports/Packages Collection
基础结构</a></h3>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_create&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_create</span>(1)</span></a>
新增了 <code class="OPTION">-R</code> 参数。 当从本地安装的预编译包进行打包时，
它会对该包依赖的所有其他包进行打包操作。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_version</span>(1)</span></a>
工具提供了一个新的 <code class="OPTION">-q</code> 选项， 来屏蔽掉 port 版本比较算符 <tt
class="LITERAL">&lt;</tt>、 <tt class="LITERAL">=</tt> 和 <tt class="LITERAL">&gt;</tt>
的输出。</p>

<p><a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&sektion=1&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkg_version</span>(1)</span></a>
工具提供了新的 <code class="OPTION">-I</code> 选项， 用于指定只使用 <tt
class="FILENAME">INDEX</tt> 文件来判断包是否已经过时。 [已合并]</p>

<p>从 CVS 库中删去了用于保存 Ports Collection 中所有项的 <tt
class="FILENAME">ports/INDEX<tt class="REPLACEABLE"><i>*</i></tt></tt>。 [已合并]
这些文件过去并不经常性地重新生成， 因此可能会过时和不再准确。 需要使用 INDEX 文件的用户
(例如用于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&sektion=1&manpath=FreeBSD+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portupgrade</span>(1)</span></a>)
可以使用两种方法来获取一份副本：</p>

<ul>
<li>
<p>使用 <tt class="COMMAND">make index</tt> 在 <tt class="FILENAME">ports/</tt> tree
的顶部构建一份当前 ports tree 的索引。</p>
</li>

<li>
<p>在 <tt class="FILENAME">ports/</tt> tree 顶部执行 <tt class="COMMAND">make
fetchindex</tt> 来从网上下载。 这个索引文件 (通常) 在一天之内是准确的。</p>
</li>
</ul>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="RELENG" name="RELENG">2.6 发行版建造工程和功能集成</a></h3>

<p>在先前的 FreeBSD 版本中， <tt class="FILENAME">disc1</tt> CD-ROM (或 ISO 镜像文件)
是一张包含基本系统、 ports tree 和常用 package 的可以引导的光盘。 而 <tt
class="FILENAME">disc2</tt> CD-ROM (或 ISO 镜像文件) 则是可以引导的 “fix it” 盘，
它提供了现场 (live) 文件系统， 用于进行紧急修复操作。 这一格局发生了变化。 对于除了 ia64
以外的所有平台， 现在 <tt class="FILENAME">disc1</tt> 包含了基本系统的安装包文件、 ports
tree， 以及现场文件系统， 使得它适合于初始安装， 以及修复工作。 (在 ia64 上，
由于现场文件系统的尺寸太大， 以至于不得不将其放到另一张盘上。) 第三方 package
都在另一张盘上； 特别地， 在 <tt class="FILENAME">disc2</tt> 上提供了常用的第三方软件包，
例如桌面环境等。 来自 FreeBSD Documentation Project 的文档， 也都在 <tt
class="FILENAME">disc2</tt> 上。 [已合并]</p>

<p>支持的 <b class="APPLICATION">GNOME</b> 桌面环境的版本， 由 2.6.2 升级到了 2.10.2。
更多关于在 FreeBSD 上运行 <b class="APPLICATION">GNOME</b> 的详细资料， 可以在 the <a
href="http://www.FreeBSD.org/gnome/" target="_top">FreeBSD GNOME Project</a> Web
页面上找到。 [已合并]</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>注意:</b> 使用较早版本的 <b class="APPLICATION">GNOME</b> 桌面 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/gnome2/pkg-descr"><tt
class="FILENAME">x11/gnome2</tt></a>) 的用户在升级时需要特别小心。 简单地使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&sektion=1&manpath=FreeBSD+Ports">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">portupgrade</span>(1)</span></a>
(<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a>) 配合 FreeBSD Ports Collection
进行升级可能会造成严重的问题。 <b class="APPLICATION">GNOME</b> 桌面的用户， 应仔细阅读
<a href="http://www.FreeBSD.org/gnome/docs/faq210.html"
target="_top">http://www.FreeBSD.org/gnome/docs/faq210.html</a> 给出的说明， 并使用 <a
href="http://www.FreeBSD.org/gnome/gnome_upgrade.sh" target="_top"><tt
class="FILENAME">gnome_upgrade.sh</tt></a> 脚本来正确地升级到 <b
class="APPLICATION">GNOME</b> 2.10。</p>
</blockquote>
</div>

<br />
<br />
<p>支持的 <b class="APPLICATION">KDE</b> 桌面环境的版本， 从 3.3.0 升级到了 3.4.2。
更多关于在 FreeBSD 上运行 <b class="APPLICATION">KDE</b> 的信息， 可以在 <a
href="http://freebsd.kde.org/" target="_top">FreeBSD 上的 KDE</a> Web 页面上找到。
[已合并]</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>注意:</b> 使用较早版本的 <b class="APPLICATION">KDE</b> 的用户， 应使用 <a
href="http://freebsd.kde.org/" target="_top">FreeBSD 上的 KDE</a> Web 页面或 <tt
class="FILENAME">ports/UPDATING</tt> 中给出的方法升级。</p>
</blockquote>
</div>

<br />
<br />
<p>支持的 <b class="APPLICATION">Xorg</b> 从 6.7.0 升级到了 6.8.2。 [已合并]</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="DOC" name="DOC">2.7 文档</a></h3>

<p>通过新增一系列联机手册改善了对系统现有功能的文档介绍： <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_ibm&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_ibm</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_sony&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_sony</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ataraid&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ataraid</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_space&sektion=9&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bus_space</span>(9)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=central&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">central</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=clkbrd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">clkbrd</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=creator&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">creator</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.conf&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs.conf</span>(5)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.rules&sektion=5&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs.rules</span>(5)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ebus&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ebus</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=eeprom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">eeprom</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fhc&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fhc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=machfb&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">machfb</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ofw_console&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ofw_console</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=openfirm&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">openfirm</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=openprom&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">openprom</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pmap_page_init&sektion=9&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">pmap_page_init</span>(9)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pthread_atfork&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">pthread_atfork</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rtc&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rtc</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sbus&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sbus</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sched_4bsd&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sched_4bsd</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sched_ule&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sched_ule</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_fm801&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_fm801</span>(4)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_neomagic&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_neomagic</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_t4dwave&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_t4dwave</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_via8233&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_via8233</span>(4)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_via82c686&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">snd_via82c686</span>(4)</span></a>, 以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_vibes&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">snd_vibes</span>(4)</span></a>。</p>

<p>对于基本系统的联机手册中的内容和表达方式进行了大量的整理。 交叉引用更加准确和一致，
标准小节的标题贯穿始终， 而使用的符号也进行了清理。</p>

<p>以下联机手册， 由于是派生于 RFC， 并有可能触犯了 IETF 的版权， 被完全替换： <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gai_strerror&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gai_strerror</span>(3)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getaddrinfo&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getaddrinfo</span>(3)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnameinfo&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnameinfo</span>(3)</span></a>,
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=inet6_opt_init&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">inet6_opt_init</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=inet6_option_space&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">inet6_option_space</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=inet6_rth_space&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">inet6_rth_space</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=inet6_rthdr_space&sektion=3&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">inet6_rthdr_space</span>(3)</span></a>, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=icmp6&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">icmp6</span>(4)</span></a>, 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ip6&sektion=4&manpath=FreeBSD+6.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ip6</span>(4)</span></a>。
[已合并]</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADE" name="UPGRADE">3 从先前版本的 FreeBSD 升级</a></h2>

<p>通过源代码升级到 FreeBSD 6.0-RELEASE， 则应使用 FreeBSD 5.3-RELEASE 或更高版本。
使用旧版的系统的用户， 如果想要升级到 6.0-RELEASE， 则需要首先升级到 FreeBSD 5.3
或更新的版本， 然后再升级到 FreeBSD 6.0-RELEASE。</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>重要:</b> 很显然，升级 FreeBSD 时，应该首先备份 <span class="emphasis"><i
class="EMPHASIS">所有</i></span> 数据和配置文件。</p>
</blockquote>
</div>
</div>
</div>

<hr />
<p align="center"><small>这份文档，以及其他与FreeBSD发行版本有关的文档，都可以在 <a
href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>下载。</small></p>

<p align="center"><small>在遇到关于FreeBSD的技术问题时，请首先阅读 <a
href="http://www.FreeBSD.org/docs.html">文档</a> 之后再考虑联系 &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。</small></p>

<p align="center"><small>所有 FreeBSD 6-STABLE 的用户都应该订阅 &#60;<a
href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&#62; 邮件列表。</small></p>

<p align="center"><small>关于这份文档的任何问题，请致信 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

