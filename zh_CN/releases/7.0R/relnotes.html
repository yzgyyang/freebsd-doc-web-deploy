<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD 7.0-RELEASE 发行说明</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD 7.0-RELEASE 发行说明</a></h1>

<h3 class="CORPAUTHOR">The FreeBSD Project</h3>

<p class="COPYRIGHT">版权 &copy; 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 The
FreeBSD Documentation Project</p>

<p class="PUBDATE">$FreeBSD: src/release/doc/zh_CN.GB2312/relnotes/article.sgml,v
1.1.2.2.2.3 2008/02/17 01:16:40 delphij Exp $<br />
</p>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD 是 FreeBSD基金会的注册商标</p>

<p>IBM、 AIX、 EtherJet、 Netfinity、 OS/2、 PowerPC、 PS/2、 S/390 以及 ThinkPad
是国际商用机器公司在美国和其他国家的注册商标或商标。</p>

<p>IEEE, POSIX, 和 802 是 Institute of Electrical and Electronics Engineers, Inc.
在美国的注册商标。</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium, 和 Xeon 是 Intel
Corporation 及其分支机构在美国和其他国家的商标或注册商标。</p>

<p>Sparc, Sparc64, SPARCEngine, 以及 UltraSPARC 是 SPARC International, Inc
在美国和其他国家的商标。 包含 SPARC 商标的产品基于 Sun Microsystems, Inc.
开发的架构。</p>

<p>许多制造商和经销商使用一些称为商标的图案或文字设计来彰显自己的产品。 本文档中出现的，
为 FreeBSD Project 所知晓的商标，后面将以 '&trade;' 或 '&reg;' 符号来标注。</p>
</div>

<div>
<div class="ABSTRACT"><a id="AEN24" name="AEN24"></a>
<p>　　这份 FreeBSD 7.0-RELEASE 的发行说明， 概括了 FreeBSD 基本系统在 7-STABLE
开发线上所做的改动。 本文档列举了自前一发行版本以来所有适用的安全公告， 以及对于 FreeBSD
内核以及系统附带的应用程序所做的重要修改。 对在升级时需要注意的一些问题，
也进行了简略的介绍。</p>
</div>
</div>

<hr />
</div>

<div class="TOC">
<dl>
<dt><b>目录</b></dt>

<dt>1 <a href="#INTRO">简介</a></dt>

<dt>2 <a href="#NEW">最新变动</a></dt>

<dd>
<dl>
<dt>2.1 <a href="#SECURITY">安全公告</a></dt>

<dt>2.2 <a href="#KERNEL">对内核的改动</a></dt>

<dd>
<dl>
<dt>2.2.1 <a href="#BOOT">引导加载器变动</a></dt>

<dt>2.2.2 <a href="#PROC">硬件支持</a></dt>

<dt>2.2.3 <a href="#NET-PROTO">网络协议</a></dt>

<dt>2.2.4 <a href="#DISKS">磁盘和存储</a></dt>

<dt>2.2.5 <a href="#FS">File Systems</a></dt>
</dl>
</dd>

<dt>2.3 <a href="#USERLAND">用户态环境变动</a></dt>

<dd>
<dl>
<dt>2.3.1 <a href="#RC-SCRIPTS"><tt class="FILENAME">/etc/rc.d</tt> 脚本</a></dt>
</dl>
</dd>

<dt>2.4 <a href="#CONTRIB">基本系统中的第三方软件</a></dt>

<dt>2.5 <a href="#PORTS">Ports/Packages 套件基础结构</a></dt>

<dt>2.6 <a href="#RELENG">发布工程与系统集成</a></dt>

<dt>2.7 <a href="#DOC">文档</a></dt>
</dl>
</dd>

<dt>3 <a href="#UPGRADE">从先前版本的 FreeBSD 升级</a></dt>
</dl>
</div>

<div class="SECT1">
<h2 class="SECT1"><a id="INTRO" name="INTRO">1 简介</a></h2>

<p>　　这篇文档包括了 FreeBSD 7.0-RELEASE 的发行说明。 它描述了最近刚刚加入、
修改或删除了的 FreeBSD 特性的说明。 同时， 它也将给出如何从先前的 FreeBSD
版本完成升级的说明。</p>

<p>　　这是一份 FreeBSD 7.0-RELEASE 的 snapshot 发布包。 您可以从 <a
href="http://www.FreeBSD.org/snapshots/"
target="_top">http://www.FreeBSD.org/snapshots/</a> 或其他镜像那里得到它的副本。 关于这个
(或其他) snapshot 发布包的更多信息，可以在 <a
href="../../../../doc/en_US.ISO8859-1/books/handbook/" target="_top">FreeBSD 手册</a>
中的 <a href="../../../../doc/en_US.ISO8859-1/books/handbook/mirrors.html"
target="_top">“如何获得 FreeBSD”附录</a> 中找到。</p>

<p>　　我们鼓励所有的用户在开始安装 FreeBSD 之前首先参考这一版本所对应的勘误信息。
勘误文档将随时更新，以便为用户提供在发布工程后期或该版本发布之后 “新发现的”
问题和相关信息。 通常，这包括已知的 bug，安全公告，以及对于文档的修订内容。 最新的
FreeBSD 7.0-RELEASE 勘误信息可以从 FreeBSD 网站获得。</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="NEW" name="NEW">2 最新变动</a></h2>

<p>　　这一节描述了 FreeBSD 自 6.0-RELEASE 以来最明显的新功能和变化。 一般说来， 没有注明
[已合并] 的那些新特性是 7-STABLE 所独有的。</p>

<p>　　发行说明中的绝大多数条目是在说明自从 6.0-RELEASE
以来的安全公告、新的驱动程序或硬件支持、新的命令或是选项、
重要的错误修补，以及基本系统中来自第三方的软件升级。 重要的 ports 和 packages
变动，或关于交付工程的变动也会在这份文档中体现。 显而易见地，发行说明不可能涵盖 FreeBSD
版本之间的每一个微小变动； 这篇文档主要关注的，仍然是安全公告，用户可以察觉的修改，
以及重要的架构改良。</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="SECURITY" name="SECURITY">2.1 安全公告</a></h3>

<p>　　修正了 2 个 BIND 远程拒绝服务的问题 （一个关于 DNSSEC 一个关于 DNS 递归查询）。
要了解进一步详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:02.bind.asc"
target="_top">FreeBSD-SA-07:02.bind</a>. [已合并]</p>

<p>　　现在可以通过设置 <code class="VARNAME">net.inet6.ip6.rthdr0_allowed</code> sysctl
变量来控制 IPv6 类型 0 路由头的处理。 默认值为<tt class="LITERAL">0</tt> (off)。
要了解进一步详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:03.ipv6.asc"
target="_top">FreeBSD-SA-07:03.ipv6</a>. [已合并]</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=file&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">file</span>(1)</span></a> 工具
（和其依赖的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libmagic&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libmagic</span>(3)</span></a> 库）
一个潜在的堆溢出问题。 要了解进一步详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:04.file.asc"
target="_top">FreeBSD-SA-07:04.file</a>. [已合并]</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libarchive&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libarchive</span>(3)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a>
处理损坏的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(5)</span></a>
归档文件的错误。 要了解进一步详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:05.libarchive.asc"
target="_top">FreeBSD-SA-07:05.libarchive</a>. [已合并]</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tcpdump</span>(1)</span></a>
中缓冲区溢出的问题。 要了解进一步详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:06.tcpdump.asc"
target="_top">FreeBSD-SA-07:06.tcpdump</a>. [已合并]</p>

<p>　　修正了一个 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
中的错误， 这个错误会导致攻击者能够破坏解析器的 DNS 缓存。 要了解进一步详情，
请参阅安全公告 <a href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:07.bind.asc"
target="_top">FreeBSD-SA-07:07.bind</a>. [已合并]</p>

<p>　　修正了一个 OpenSSL 中缓冲区溢出的问题 (由前一个安全补丁的错误修改造成)。
要进一步了解详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:08.openssl.asc"
target="_top">FreeBSD-SA-07:08.openssl</a>. [已合并]</p>

<p>　　修正了一个 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=random&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">random</span>(4)</span></a>
可能泄漏前一次生成数据的缺陷。 要进一步了解详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-07:09.random.asc"
target="_top">FreeBSD-SA-07:09.random</a>. [已合并]</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=openpty&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">openpty</span>(3)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ptsname&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ptsname</span>(3)</span></a>
中发现的信息泄露问题。 要进一步了解详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-08:01.pty.asc"
target="_top">FreeBSD-SA-08:01.pty</a>. [已合并]</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=inet_network&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">inet_network</span>(3)</span></a>
Internet 地址管理函数中的一处可能导致覆盖用户定义的数据区内存内容的问题。
要进一步了解详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-08:02.libc.asc"
target="_top">FreeBSD-SA-08:02.libc</a>. [已合并]</p>

<p>　　修正了可能导致 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sendfile</span>(2)</span></a>
越权访问文件内容的问题。 要进一步了解详情， 请参阅安全公告 <a
href="http://security.FreeBSD.org/advisories/FreeBSD-SA-08:03.sendfile.asc"
target="_top">FreeBSD-SA-08:03.sendfile</a>. [已合并]</p>

<p>　　</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="KERNEL" name="KERNEL">2.2 对内核的改动</a></h3>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi</span>(4)</span></a> 提供了对
HPET 时钟计数器的基本支持。[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_ibm&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_ibm</span>(4)</span></a>
驱动提供了将风扇配置为手动或自动控制， 以及在手动控制模式下调节风扇转速的能力。
要启用对风扇转速的手动控制， 需要将 sysctl 变量 <code class="VARNAME">dev.acpi_ibm.<tt
class="REPLACEABLE"><i>0</i></tt>.fan</code> 设置为零 (手动)。
这样做时必须非常小心，因为禁用自动风扇控制， 可能会使硬件过热，
从而导致永久性的损坏。</p>

<p>　　改进了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=apm&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">apm</span>(4)</span></a> 挂起/唤醒
支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cpufreq&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cpufreq</span>(4)</span></a> CPU
频率控制框架现已在 <tt class="FILENAME">GENERIC</tt> 默认内核中启用。</p>

<p>　　对 Camellia 块密码的支持已被加入到 FreeBSD 内核。 它能被指定为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipsec</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geli</span>(8)</span></a>
的块算法。 更多关于 Camellia 的信息能够在 RFC 4132 中找到。</p>

<p>　　由于已经不再需要， 内核配置选项 <tt class="LITERAL">options COMPAT_43</tt> 已经从
<tt class="FILENAME">GENERIC</tt> 及相关配置文件中删除。
这一变动可以为某些程序带来微小的性能提升。</p>

<p>　　哑终端驱动 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dcons&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dcons</span>(4)</span></a>) 在 <tt
class="FILENAME">GENERIC</tt> 内核默认启用。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ddb&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ddb</span>(4)</span></a>
调试器新增了 <tt class="LITERAL">show sleepq</tt> 命令。
这个命令需要指定一个等待通道作为其参数， 起作用是显示与那一等待通道关联的休眠队列。</p>

<p>　　修正了文件描述符处理中的一个会导致在某些情况下按 <tt class="LITERAL">close(0);
dup(fd)</tt> 顺序执行时不返回描述符 <tt class="LITERAL">0</tt> 的 bug。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a>
远程调试接口提供了对于将控制台信息复制到远程调试器实例的能力。 要启用这一特性， 需要在
<tt class="FILENAME">loader.conf</tt> 中配置 <tt class="LITERAL">debug.gdbcons="1"</tt>，
并在加载器提示符出现时输入 <tt class="LITERAL">boot -d; gdb; step</tt>， 再从远程机器挂接
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gdb&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gdb</span>(1)</span></a>。 sysctl
变量 <code class="VARNAME">debug.gdbcons</code> 可以用来控制这一功能的开关状态。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hwpmc&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hwpmc</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pmcstat&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pmcstat</span>(8)</span></a>
提供了对动态加载的内核模块以及通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dlopen&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dlopen</span>(3)</span></a>
加载的动态连接库的性能分析支持。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pmcstat&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pmcstat</span>(8)</span></a>
新增了通过网络 socket 将数据记录到远程主机的能力。</p>

<p>　　新增一个 sysctl 变量 <code class="VARNAME">kern.hostuuid</code>
用来保存全局唯一标识符 (UUID)。 此 UUID 是由 <tt class="FILENAME">rc.d/hostid</tt>
启动脚本计算生成， 为使其在每次的系统重启后不丢失，它会被保存在磁盘上。</p>

<p>　　对内核配置选项 <code class="OPTION">INCLUDE_CONFIG_FILE</code> 进行了改进。
正在运行的内核的完整配置， 可以通过 <tt class="COMMAND">sysctl -b kern.conftxt</tt>
来直接提取了。 此外， 也可以通过 <tt class="COMMAND">config -x kernelfile</tt>
从内核文件中提取配置文件。 如果希望保持配置文件中的注释， 可以使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=config&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a> 的
<code class="OPTION">-C</code> 选项。</p>

<p>　　对于内核调度实体 (KSE) 的支持变成了内核选项 (过去是内核中的必选功能)。 在除了
sun4v 之外的所有硬件架构的 GENERIC 内核中， 都依然默认启用这一功能
(因而这一变动并不会产生功能上的变化)。</p>

<p>　　对 Linux ABI 支持进行了增强， 以支持对 Linux 2.6.16 的模拟。
这一功能默认并不启用。 如果希望启用， 则需要通过将 <code
class="VARNAME">compat.linux.osrelease</code> sysctl 变量设置为 <tt
class="LITERAL">2.6.16</tt>。 请注意， 这一支持目前仍是试验性的。</p>

<p>　　在内核的 PCI 支持代码中新增了对于 消息信号中断 (MSI) 以及 扩展消息信号中断 (MSI-X)
的支持。 [已合并]</p>

<p>　　新增了内核接口 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=priv&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">priv</span>(9)</span></a>。
其作用是检查线程及信任状是否拥有某些特权。 与现有的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=suser&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">suser</span>(9)</span></a>
接口不同， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=priv&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">priv</span>(9)</span></a>
采用符号化的名称来标示特权， 这样就便于表达更复杂一些的特权授予策略了。</p>

<p>　　FreeBSD 能够支持对同一文件的并发 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=read&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">read</span>(2)</span></a>/<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=readv&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">readv</span>(2)</span></a>
访问了。</p>

<p>　　内核的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sx&sektion=9&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sx</span>(9)</span></a> 锁进行了优化，
在多数情况下采用简单的原子操作， 来获得和释放共享及互斥锁。
尽管这一变动一般而言并不是用户可见的， 但它带来了相当可观的性能改善。o</p>

<p>　　对 ULE 进程调度器进行了修改， 以改进其行为， 特别是在高负载条件下的互操作性应用，
以及针对单处理器和多处理器系统的改良。 这些改进也被称作 “ULE 3.0”。 (ULE 3.0
先前曾被称作 SCHED_SMP， 它基于 ULE 调度器的 2.0 版本。 ULE 2.0 并未在已经发行过的
FreeBSD 发行版 中出现过， 但其开发过程中进行了大量的修改、 测试以及性能评估。)</p>

<p>　　新增了 <tt class="LITERAL">SIGCHLD</tt> 信号队列能力。 对于状态发生变化的子进程，
内核会保持在队列中的一个与之对应的 <tt class="LITERAL">SIGCHLD</tt> 实例。
如果没有对信号进行处理， 并且进程对此改变状态， 则信号信息会被更新，
以反映最新的进程状态。 新增的引导加载器选项 <code
class="VARNAME">kern.sigqueue.queue_sigchild</code> 可以控制这一行为，
将其设置为零表示禁用 <tt class="LITERAL">SIGCHLD</tt> 队列功能。</p>

<p>　　新增了 sysctl 变量 <code class="VARNAME">kern.malloc_stats</code>。
它能够以二进制流化的数据结构形式导出内核 malloc 的统计数据。</p>

<p>　　新增了 sysctl 变量 <code class="VARNAME">kern.forcesigexit</code>。
如果设置了这个变量， 并且 trap 信号被当前线程占有， 或被进程忽略， 它会强制执行 sigexit。
这一功能默认启用。</p>

<p>　　删去了与 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">syscons</span>(4)</span></a>
提供类似功能的 pcvt(4) 驱动程序， 因为它已经无法适应内核中其他部分的变化了。</p>

<p>　　实现了 RedZone， 一种用于内核 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">malloc</span>(9)</span></a>
的缓冲区溢出检测机制。 它能够在运行中的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=free&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">free</span>(9)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=realloc&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">realloc</span>(9)</span></a>
时刻检测缓冲区的上溢和下溢， 并显示分配和释放内存的调用栈。 如欲了解进一步的详情，
请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=redzone&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">redzone</span>(9)</span></a>。</p>

<p>　　新增了引导加载器选项 <code class="VARNAME">vm.kmem_size_min</code>，
这个选项用于指定 <code class="VARNAME">vm.kmem_size</code> 的最小值。</p>

<p>　　新增了 sysctl 变量 <code class="VARNAME">vm.zone_stats</code>。
它能够以二进制流化的数据结构形式导出 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uma&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uma</span>(9)</span></a>
分配器的统计数据。</p>

<p>　　将 sysctl 变量 <code class="VARNAME">hw.pci.do_powerstate</code> 分拆成了两个
sysctl 变量 <code class="VARNAME">hw.pci.do_powerstate_nodriver</code> 和 <code
class="VARNAME">hw.pci.do_powerstate_resume</code>。 另外，
这些变量由布尔值改为了范围值。 <tt class="LITERAL">0</tt> 表示不进行任何电源管理， <tt
class="LITERAL">1</tt> 表示保守电源管理， 即导致过问题的设备类型， 会被加入到监视列表中，
<tt class="LITERAL">2</tt> 表示激进的电源管理， 表示将对系统不重要的设备都加入到列表中，
而 <tt class="LITERAL">3</tt> 则表示将全部设备的电源无条件关闭。 <code
class="VARNAME">hw.pci.do_powerstate_nodriver</code> 的默认值是 <tt
class="LITERAL">0</tt>， 而 <code class="VARNAME">hw.pci.do_powerstate_resume</code>
的默认值则是 <tt class="LITERAL">1</tt>。</p>

<p>　　[ia64] 在 <tt class="FILENAME">GENERIC</tt> 内核中默认启用了 SMP 支持。</p>

<p>　　新增了用以示范托管访问控制框架的内核配置文件 <tt class="FILENAME">src/sys/<tt
class="REPLACEABLE"><i>arch</i></tt>/conf/MAC</tt>。</p>

<p>　　<code class="VARNAME">POSIX_TIMERS</code> 支持更新到了 200112L。</p>

<p>　　新增了对 POSIX 消息队列的试验性支持。</p>

<p>　　对 UNIX domain socket 的上锁策略进行了修订以改善其并发能力； 这一变动为一些 SMP
计算负载带来了显著的性能提升 (特别是在 8-路 amd64 系统上运行的 MySQL)， 而在 UP
系统上则几乎没有增加其他开销。</p>

<p>　　为了支持过滤式中断处理方式， 对 Newbus API 进行了一些微小但范围很大的修改。
由于这些改动也会使内核 ABI 发生变化，
因此全部第三方设备驱动程序也需要进行修改并重新编译。</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="BOOT" name="BOOT">2.2.1 引导加载器变动</a></h4>

<p>　　新增了用于设置在 <tt class="FILENAME">boot2</tt> 中设置串口控制台速率， 并可用于
<tt class="FILENAME">/boot.config</tt> 文件及 <samp class="PROMPT">boot:</samp>
提示行处的 <code class="OPTION">-S</code> 选项。</p>

<p>　　[amd64, i386] 为引导加载器新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=firewire&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">firewire</span>(4)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dcons&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dcons</span>(4)</span></a> 支持。
如果需要启用， 则可在 <tt class="FILENAME">/etc/make.conf</tt> 中加入 <tt
class="LITERAL">LOADER_FIREWIRE_SUPPORT=yes</tt> 并重新联编引导加载器。</p>

<p>　　[pc98] 在 boot0.5 中对 <b class="APPLICATION">IPLware</b> 的支持进行了强化，
以支持版本 3.33。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="PROC" name="PROC">2.2.2 硬件支持</a></h4>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cardbus&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cardbus</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pccard&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pccard</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pccbb&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pccbb</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ex&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ex</span>(4)</span></a>
驱动程序可以作为内核模块联编了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_dock&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_dock</span>(4)</span></a>
驱动程序， 它为通过 ACPI 控制笔记本扩展坞的支持。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_thermal&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_thermal</span>(4)</span></a>
驱动程序支持自定义 <tt class="LITERAL">_PSV</tt>、 <tt class="LITERAL">_HOT</tt> 和 <tt
class="LITERAL">_CRT</tt> 温度值了。</p>

<p>　　删去了对 alpha 硬件架构的支持。 对于 Alpha 的支持仍会在 RELENG_5 和 RELENG_6
开发线中继续保留。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cardbus&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cardbus</span>(4)</span></a>
驱动程序支持 <tt class="FILENAME">/dev/cardbus<tt
class="REPLACEABLE"><i>%d</i></tt>.cis</tt> 了。</p>

<p>　　[i386, amd64] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=coretemp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">coretemp</span>(4)</span></a>
驱动程序， 它能够读取 <span class="TRADEMARK">Intel</span>&reg; <span
class="TRADEMARK">Core</span>&#8482; 处理器的核心温度读数。 [已合并]</p>

<p>　　<tt class="LITERAL">est</tt> <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cpufreq&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cpufreq</span>(4)</span></a>
驱动程序支持对 VIA C7-M 系列处理器的频率控制了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=firewire&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">firewire</span>(4)</span></a>
代码是 MPSAFE 的了。</p>

<p>　　新增了 icee(4) 驱动程序， 用以支持 I2C EEPROM。</p>

<p>　　修正了导致无法卸载内核模块 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ichsmb&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ichsmb</span>(4)</span></a> 的
bug。</p>

<p>　　[amd64, i386] 在启用了 SMP 的内核中， 双核处理器 (例如 Intel Core Duo)
的处理核心都可以使用了。 [已合并]</p>

<p>　　[ia64, powerpc] 引导加载器选项 <code class="VARNAME">debug.mpsafevfs</code>
默认设为 <tt class="LITERAL">1</tt> 了。</p>

<p>　　删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sab&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sab</span>(4)</span></a> 驱动程序
(它已被 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=scc&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">scc</span>(4)</span></a>
驱动程序取代)。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=scc&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">scc</span>(4)</span></a>
驱动程序。 这个驱动程序提供了对串口通讯控制器的范型支持，
并将对通道和模式的控制交由具体的驱动程序， 如 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>
处理。</p>

<p>　　[amd64] smbios(4) 驱动程序新增了对 amd64 的支持。</p>

<p>　　[sun4v] FreeBSD 现在提供了对于 Sun Microsystems UltraSPARC-T1 架构的初步支持。
FreeBSD/sun4v 已经可以在 Sun Fire T1000 和 Sun Fire T2000 服务器上运行。
关于这一工作的进一步信息， 可以在 <a href="http://www.FreeBSD.org/platforms/sun4v.html"
target="_top">sun4v 项目</a> 主页上找到。</p>

<p>　　新增了 tnt4882(4) 驱动程序， 它支持 National Instruments PCI-GPIB 卡。</p>

<p>　　[amd64, i386, ia64, sparc64] <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>
驱动程序现已加入到默认的 <tt class="FILENAME">GENERIC</tt> 内核。 当 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>
都能管理同一个串口时， 会优先采用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sio</span>(4)</span></a>。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uark&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uark</span>(4)</span></a>
驱动程序， 它支持基于 Arkmicro Technologies ARK3116 的 USB 串口适配器。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>
驱动新增了对于将 LOM (Lights Out Management) 和 RSC (Remote System Control)
设备作为控制台的支持。</p>

<p>　　删除了 zs 驱动程序， 它提供的功能已经由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uart&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uart</span>(4)</span></a>
驱动程序取代。</p>

<p>　　[i386] 新增了引导加载器选项 <code class="VARNAME">hw.apic.enable_extint</code>。
这个选项可以用于禁止屏蔽第一个 I/O APIC 上的 ExtINT 引脚。 至少有一种用于 Intel Pentium
III 的芯片组需要这个选项， 即使所有 8259A 的引脚都被屏蔽也是如此。 默认值依然是屏蔽
ExtINT 引脚。</p>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="MM" name="MM">2.2.2.1 多媒体支持</a></h5>

<p>　　新增了基于 NetBSD 的新的 midi(4) 驱动程序。 它支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_cmi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_cmi</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10k1&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_emu10k1</span>(4)</span></a>
驱动程序。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_cmi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_cmi</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10kx&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_emu10kx</span>(4)</span></a>
驱动程序， 它支持 Creative SoundBlaster Live! 和 Audigy 系列声卡，
并提供了可选的伪多声道回放功能。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_envy24&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_envy24</span>(4)</span></a>
驱动程序， 它支持 Envy24 系列的音效芯片。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_envy24ht&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_envy24ht</span>(4)</span></a>
驱动程序， 它支持 VIA Envy24HT 系列的音效芯片。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_hda&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_hda</span>(4)</span></a>
驱动程序。 它支持符合 Intel High Definition Audio 1.0 版本规范的设备。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_solo&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_solo</span>(4)</span></a>
驱动程序是 MPSAFE 的了。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_spicds&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_spicds</span>(4)</span></a>
驱动程序， 它支持 I2S SPI 音效编码解码芯片。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uaudio&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uaudio</span>(4)</span></a>
驱动程序新增了对 24/32 位声音格式和转换的支持。</p>
</div>

<div class="SECT4">
<hr />
<h5 class="SECT4"><a id="NET-IF" name="NET-IF">2.2.2.2 网络接口支持</a></h5>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ath</span>(4)</span></a>
驱动程序更新到了 HAL 0.9.20.3 版。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=axe&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">axe</span>(4)</span></a>
驱动程序支持 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 了。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bge</span>(4)</span></a>
驱动程序的 Jumbo frame (巨型帧) 支持是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bge</span>(4)</span></a>
驱动程序新增了对高位在前 (big-endian) 硬件平台， 如 sparc64 的支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iwi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iwi</span>(4)</span></a>
驱动程序所需要的固件映像文件， 现在成为了 FreeBSD 基本系统的一部分。
如果想要加载这个固件， 您必须同意位于 <tt
class="FILENAME">/usr/share/doc/legal/intel_iwi/LICENSE</tt> 的授权许可协议， 并在 <tt
class="FILENAME">/boot/loader.conf</tt> 中设置 <tt
class="LITERAL">legal.intel_iwi.license_ack=1</tt>。 这个驱动程序先前的版本， 需要使用由
<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/iwi-firmware-kmod/pkg-descr"><tt
class="FILENAME">net/iwi-firmware-kmod</tt></a> port/package 或 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/iwi-firmware/pkg-descr"><tt
class="FILENAME">net/iwi-firmware</tt></a> port/package 安装的固件映像文件。</p>

<p>　　新增了 ixgbe 驱动程序， 它能够支持 Intel 10G (万兆以太网) PCI-Express 适配器
(82598)。</p>

<p>　　删去了 lnc(4) 驱动程序。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=le&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">le</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcn&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcn</span>(4)</span></a>
驱动程序能够支持过去由 lnc(4) 支持的所有设备。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=msk&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">msk</span>(4)</span></a>
驱动程序。 它能够支持使用 Marvell/SysKonnect Yukon II</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cm&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">cm</span>(4)</span></a> 驱动程序是
MPSAFE 的了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cxgb&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cxgb</span>(4)</span></a>
驱动程序， 它提供了对基于 Chelsio T3 和 T3B 芯片组的 10 Gigabit (万兆)
以太网适配器的支持。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=edsc&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">edsc</span>(4)</span></a>
驱动程序， 它提供了对 Ethernet discard 网络接口的支持。 [已合并]</p>

<p>　　由于使用的人太少， 删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=el&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">el</span>(4)</span></a> 驱动程序。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>
驱动程序更新到了来自 Intel 的 6.7.3 版本。 除了其他修改之外， 这个版本新增了对基于
80003、 82571、 82571EB、 82572 以及 82575 网卡， 以及基于 ICH8 芯片组的板载网卡的支持。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>
驱动程序包含了对挂起和唤醒功能的初步支持。</p>

<p>　　通过使用快速中断处理程序和 taskqueue 代替 ithread 中断处理程序， 改善了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>
驱动程序的性能。 出于调试目的， 这一变动可以通过定义内核选项 <tt
class="LITERAL">NO_EM_FASTINTR</tt> 来禁用。</p>

<p>　　在 <tt class="FILENAME">GENERIC</tt> 内核中启用了基于火线的 IP 驱动程序 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fwip&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fwip</span>(4)</span></a>)。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gem&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gem</span>(4)</span></a>
驱动程序新增了对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a>
的支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipw&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipw</span>(4)</span></a>
驱动程序所需要的固件映像文件， 现在成为了 FreeBSD 基本系统的一部分。
如果想要加载这个固件， 您必须同意位于 <tt
class="FILENAME">/usr/share/doc/legal/intel_ipw/LICENSE</tt> 的授权许可协议， 并在 <tt
class="FILENAME">/boot/loader.conf</tt> 中设置 <tt
class="LITERAL">legal.intel_ipw.license_ack=1</tt>。 这个驱动程序先前的版本， 需要使用由
<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/ipw-firmware-kmod/pkg-descr"><tt
class="FILENAME">net/ipw-firmware-kmod</tt></a> port/package 或 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/ipw-firmware/pkg-descr"><tt
class="FILENAME">net/ipw-firmware</tt></a> port/package 安装的固件映像文件。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iwi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iwi</span>(4)</span></a>
驱动程序新增了对高位在前 (big-endian) 硬件平台， 如 sparc64 的支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iwi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iwi</span>(4)</span></a>
驱动程序所需要的固件映像文件， 现在成为了 FreeBSD 基本系统的一部分。
如果想要加载这个固件， 您必须同意位于 <tt
class="FILENAME">/usr/share/doc/legal/intel_iwi/LICENSE</tt> 的授权许可协议， 并在 <tt
class="FILENAME">/boot/loader.conf</tt> 中设置 <tt
class="LITERAL">legal.intel_iwi.license_ack=1</tt>。 这个驱动程序先前的版本， 需要使用由
<a href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/iwi-firmware-kmod/pkg-descr"><tt
class="FILENAME">net/iwi-firmware-kmod</tt></a> port/package 或 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/iwi-firmware/pkg-descr"><tt
class="FILENAME">net/iwi-firmware</tt></a> port/package 安装的固件映像文件。</p>

<p>　　新增了 ixgbe 驱动程序， 它能够支持 Intel 10G (万兆以太网) PCI-Express 适配器
(82598)。</p>

<p>　　删去了 lnc(4) 驱动程序。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=le&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">le</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcn&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcn</span>(4)</span></a>
驱动程序能够支持过去由 lnc(4) 支持的所有设备。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=msk&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">msk</span>(4)</span></a>
驱动程序。 它能够支持使用 Marvell/SysKonnect Yukon II 千兆以太网控制器的网卡。
[已合并]</p>

<p>　　[amd64, i386] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mxge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mxge</span>(4)</span></a>
驱动程序， 它能够支持 Myricom Myri10GE 10 Gigabit (万兆) 以太网适配器。
如欲了解进一步的详情， 请参阅联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mxge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mxge</span>(4)</span></a>。
[已合并]</p>

<p>　　[amd64, i386] 新增了来自 OpenBSD 的开放源代码的 nForce 以太网设备驱动程序 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nfe&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nfe</span>(4)</span></a>。 在 <tt
class="FILENAME">GENERIC</tt> 内核中， 这个驱动程序取代了原先使用的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nve&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nve</span>(4)</span></a>
驱动程序。</p>

<p>　　[arm] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=npe&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">npe</span>(4)</span></a>
驱动程序， 它能够支持 Intel XScale 网络处理引擎。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nxge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nxge</span>(4)</span></a>
驱动程序， 它能够支持 Neterion Xframe 10 Gigabit (万兆) 以太网适配器。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=re&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">re</span>(4)</span></a>
驱动程序新增了对 D-Link DGE-528(T) 千兆以太网卡的支持。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rum&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rum</span>(4)</span></a>
驱动程序。 它能够支持基于 Ralink RT2501USB 和 RT2601USB 芯片组的 WLAN 适配器。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ti&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">ti</span>(4)</span></a>
驱动程序新增了对高位在前 (big-endian) 硬件平台， 如 sparc64 的支持。</p>

<p>　　新增了用于 FOMA (由日本 NTT DoCoMo, Inc. 设计的第三代移动电话系统) 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ufoma&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ufoma</span>(4)</span></a>
驱动程序。 它能够支持基于日本 MCPC (移动计算推进委员会) 颁布的 USB
实现指导说明书所设计的第三代移动电话。</p>

<p>　　新增了 vgapci(4) 驱动程序。 这是一个用于 VGA PCI 设备的框架驱动程序，
以总线驱动的形式提供服务， 这样， 类似 drm(4)、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_video&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_video</span>(4)</span></a>，
以及 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">agp</span>(4)</span></a>
这些驱动程序就可以与其配合工作， 使得在同一个设备上使用多个驱动程序成为可能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=vge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">vge</span>(4)</span></a>
驱动新增了对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=altq&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">altq</span>(4)</span></a> 的支持。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">wi</span>(4)</span></a>
驱动程序可以以内核模块的形式联编了。</p>

<p>　　[amd64, i386, pc98] 在默认的 <tt class="FILENAME">GENERIC</tt> 中加入了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_wep&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlan_wep</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_ccmp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlan_ccmp</span>(4)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan_tkip&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlan_tkip</span>(4)</span></a>
驱动程序。</p>

<p>　　[amd64, i386] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wpi&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wpi</span>(4)</span></a>
驱动程序， 它提供了对 Intel 3945 无线 LAN 控制器的支持。</p>

<p>　　[amd64, i386] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=zyd&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">zyd</span>(4)</span></a>
驱动程序。 它提供了对 ZyDAS ZD1211/ZD1211B USB IEEE 802.11 b/g 无线网络设备的支持。</p>

<p>　　从 OpenBSD 引入了网络接口组功能。 举例说来，
这个功能允许管理员在一组网络接口上应用防火墙规则。 更多信息， 请参阅联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">ifconfig</span>(8)</span></a>。</p>

<p>　　对 802.11 协议栈进行了大幅度的改写。 重要的新增功能， 包括支持后台扫描、 在多个 AP
之间漫游， 以及对拥有 802.11n 能力的设备所需要的支持基础。</p>

<p>　　802.11 协议栈新增了对于 900 MHz 无线网卡， 以及对 802.11a 四分和对分频道的支持。
[已合并]</p>

<p>　　FreeBSD 网络协议栈现在在运行时已经完全没有内核全局锁 Giant，
并完全使用内核的细粒度锁原语来管理并发了。
这显著地改善了在多处理器系统上的网络协议栈性能； 即使是在单处理器的系统中，
也可以看到性能的提升。 ISDN4BSD 和 netatm 目前已临时从联编过程中摘除。
这些模块在运行时仍然需要全局锁， 而摘除了这两个模块， 使得删除 NET_NEEDS_GIANT 兼容代码。
我们计划将这些模块转换为使用细粒度的内核上锁方式， 并在 FreeBSD 7.1-RELEASE
时重新连入联编过程。</p>
</div>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="NET-PROTO" name="NET-PROTO">2.2.3 网络协议</a></h4>

<p>　　[amd64, i386, pc98] 为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bpf</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_bpf&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_bpf</span>(4)</span></a>
实现了试验性的 BPF 即时编译器。 如果希望启用这个功能， 需要使用内核选项 <tt
class="LITERAL">options BPF_JITTER</tt>。 使用 <code
class="VARNAME">net.bpf_jitter.enable</code> 可以禁用这个功能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">bpf</span>(4)</span></a>
设备新增了一系列新的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ioctl&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ioctl</span>(2)</span></a> 调用，
用于检查输入和输出的数据包， 以及发到网络上的数据包。</p>

<p>　　在系统中删去了 bridge(4) 驱动程序。 它的功能已经由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
完全取代了。</p>

<p>　　用于支持 RFC 1701 和 RFC 1702 中介绍的 GRE 封装的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gre&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gre</span>(4)</span></a>
驱动程序能够支持 GRE 上的 IPv6 了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
驱动程序新增了对 RSTP， 即快速生成树协议 (802.1w) 的支持。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=if_bridge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">if_bridge</span>(4)</span></a>
驱动程序在桥接端口上新增了 <tt class="LITERAL">private</tt> 标志； 网桥上的非 private
端口可以与任何其他非 private 端口通讯。 这个功能对于在服务器网路中使用多个客户 VLAN
的场景比较有用； 此外， 它也可以用来阻止客户 VLAN 之间互相访问，
但又同时允许它们访问服务器网络。 网桥端口上的 private 标志可以通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
来设置或清除。</p>

<p>　　删去了原先硬编码的 IPv4 多播组成员限制 (先前的值是 20)。</p>

<p>　　IPv6 多播转发现在可以通过内核模块 <tt class="FILENAME">ip_mroute.ko</tt>
来动态载入了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
包过滤器支持针对 Routing Header Type 0 和 Mobile IPv6 Routing Header Type 2 以及对于
Routing Header 的不做区分的过滤了。</p>

<p>　　删去了 ip6fw(8) 包过滤器。 由于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfw</span>(4)</span></a>
已经能够支持 IPv6， 因此应使用它来代替。 请注意某些规则可能需要进行少量调整。</p>

<p>　　删去了 KAME 的 IPsec 实现。 作为替代， <tt class="LITERAL">FAST_IPSEC</tt> 成为了
FreeBSD 内核支持的唯一一个 IPsec 实现。 过去曾用来表示 KAME IPsec 的内核选项 <tt
class="LITERAL">IPSEC</tt> 现在用于启用 <tt class="LITERAL">FAST_IPSEC</tt>。 <tt
class="LITERAL">FAST_IPSEC</tt> 提供了对 IPv4 和 IPv6 的支持， 使用了细粒度的内核上锁，
并支持基于硬件的加密加速。</p>

<p>　　删去了对 IP 上的 IPX 隧道支持。</p>

<p>　　新增了从 OpenBSD 和 NetBSD 移植的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=lagg&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">lagg</span>(4)</span></a>
驱动程序， 它支持一系列链路聚合、 故障转移和容错协议及算法。 [已合并]</p>

<p>　　原生模式 ATM 协议层 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=natm&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">natm</span>(4)</span></a> 是
MPSAFE 的了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_car&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_car</span>(4)</span></a>
Netgraph 节点类型， 实现了若干种流量整形和速率限制算法。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_deflate&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_deflate</span>(4)</span></a>
Netgraph 节点类型， 实现了 Deflate PPP 压缩。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_h4&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_h4</span>(4)</span></a>
Netgraph 节点是 MPSAFE 的了。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ppp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_ppp</span>(4)</span></a>
Netgraph 节点是 MPSAFE 的了。 [已合并]</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_pred1&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ng_pred1</span>(4)</span></a>
Netgraph 节点类型， 实现了 Predictor-1 PPP 压缩。 [已合并]</p>

<p>　　TCP 传输方式的 NFS 默认重传计时器变改为了 60 秒。
这个变动能够防止不必要地重传非幂等的 NFS 请求。 此外， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> 中的
<code class="VARNAME">nfs_access_cache</code> 变量的默认值也改为了 60。</p>

<p>　　nfsiod 内核线程的默认数量 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(8)</span></a> 变量
<code class="VARNAME">vfs.nfs.iodmin</code>) 由原先的 4 调整为 0。</p>

<p>　　新增了 sysctl 变量 <code
class="VARNAME">net.inet.icmp.reply_from_interface</code>。 这表示让 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=icmp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">icmp</span>(4)</span></a>
以数据包进入的网络接口上的 IP 地址来回应非本地数据包。 对于路由器而言， 这可以让 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">traceroute</span>(8)</span></a>
显示出包实际经过的路径， 而不是可能出现的另一条路。</p>

<p>　　新增了 sysctl 变量 <code class="VARNAME">net.inet.icmp.quotelen</code>。
它可以调节 ICMP 回应中引用的原数据包长度。 系统内部会确保最小长度为 8 字节。
最大的引用长度， 取决于回应 mbuf 中的剩余空间。 加入这一选项是为了解决 I-D <tt
class="FILENAME">draft-gont-icmp-payload-00.txt</tt> 提到的问题。</p>

<p>　　如果需要， 在回应和分配 mbuf 时， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=icmp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">icmp</span>(4)</span></a>
会引用完整的 TCP 头了。 这个变动修正了由 I-D <tt
class="FILENAME">draft-gont-icmp-payload-00.txt</tt> 提到的问题。</p>

<p>　　新增了 socket 选项 <tt class="LITERAL">IP_MINTTL</tt>。 这个选项可以控制在 socket
上收到的包的最小 TTL 值。 所有包含更小 TTL 的包都会被直接丢弃。 目前这已经能够在 RAW、
UDP 和 TCP 监听 socket 上使用。 该选项唯一一个有用的值是 <tt class="LITERAL">255</tt>，
表示阻止本地 socket 监听接受所有来自直接连接的网络之外的数据包。 此外，
这个选项也使得在用户态实现 RFC 3682 “The Generalized TTL Security Mechanism (GTSM)”
成为可能。</p>

<p>　　内核 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ppp</span>(4)</span></a>
驱动程序支持 IPv6 了。</p>

<p>　　隐蔽转发 (stealth forwarding) 同时支持 IPv6 和 IPv4 了。 这一行为可以通过新增的
sysctl 变量 <code class="VARNAME">net.inet6.ip6.stealth</code> 来控制。</p>

<p>　　删去了内核选项 <tt class="LITERAL">PIM</tt>。 相关代码现在由内核选项 <tt
class="LITERAL">MROUTING</tt> 提供。</p>

<p>　　新增了对于 RFC 3678 特定源组播 (SSM) socket API 的支持。 更多细节， 请参阅联机手册
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sourcefilter&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">sourcefilter</span>(3)</span></a>。</p>

<p>　　新增了对于 流控制传输协议 (SCTP) 的支持。 SCTP 实现了由 RFC 4960
定义的支持可靠的、 面向消息的传输协议。 在 FreeBSD 中可以通过 <tt
class="LITERAL">SCTP</tt> 内核选项来启用这种支持， 它是 <tt class="FILENAME">GENERIC</tt>
内核的一部分。 关于它的进一步信息， 请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sctp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sctp</span>(4)</span></a>。</p>

<p>　　<tt class="LITERAL">IPV6_V6ONLY</tt> socket 选项支持 UDP 了。</p>

<p>　　内核选项 <tt class="LITERAL">TCP_DROP_SYNFIN</tt> 现在是默认启用的了。 <code
class="VARNAME">net.inet.tcp.drop_synfin</code> sysctl 变量的默认值， 和之前一样仍然是
<tt class="LITERAL">0</tt>。</p>

<p>　　FreeBSD 网络协议栈新增了对于网卡等硬件提供的 TCP 分片协处理 (TSO) 能力的支持。
通过将大块数据分拆成多个 TCP 分片这样的操作交给网卡来进行， TSO 能够减少发送大量 TCP
数据时的开销。 这一功能， 可以以网络接口为单位， 通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a> 的
<tt class="LITERAL">tso</tt> 和 <tt class="LITERAL">-tso</tt> 参数， 来启用和禁用。
目前， 支持 TSO 的网卡驱动包括 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">em</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mxge&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mxge</span>(4)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cxgb&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cxgb</span>(4)</span></a>。</p>

<p>　　FreeBSD 提供了对 TCP socket 缓冲的自动尺寸收放能力。 这使得 socket
缓冲区尺寸能够依据网络条件自动适应， 而不再需要静态地设置。 这一功能的行为， 可以通过
<code class="VARNAME">net.inet.tcp.sendbuf_*</code> 和 <code
class="VARNAME">net.inet.tcp.recvbuf_*</code> sysctl 变量来调整。</p>

<p>　　为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tap&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tap</span>(4)</span></a>
驱动程序新增了 sysctl 变量 <code class="VARNAME">net.link.tap.up_on_open</code>。
如果启用， 则新的 tap 设备会在创建时直接标记为 <tt class="LITERAL">up</tt>。 [已合并]</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="DISKS" name="DISKS">2.2.4 磁盘和存储</a></h4>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=aac&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">aac</span>(4)</span></a>
驱动程序新增了对一些惠普机器上使用的 Adaptec 2610SA SATA-RAID 控制器的支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ahc&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ahc</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ahd&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ahd</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　CAM 子系统是 MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ciss&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ciss</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　GEOM 存储变换系统新增了 <tt class="LITERAL">GEOM_JOURNAL</tt> class。
它支持块级别的日志操作， 可以为文件系统模块保持一致性提供文件系统日志。 (目前，
这一功能只支持 UFS 文件系统。) 关于它的操作， 可以由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gjournal&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gjournal</span>(8)</span></a>
工具进行控制。</p>

<p>　　新增了用以支持多种磁盘设备访问路径的 GEOM_MULTIPATH class。 新增的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gmultipath&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gmultipath</span>(8)</span></a>
工具可以利用这个功能控制磁盘的行为。</p>

<p>　　新增了用以提供以物理设备为后端， 支持任意尺寸虚拟存储设备 的 <tt
class="LITERAL">GEOM_VIRSTOR</tt> class。 关于它的进一步信息， 请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gvirstor&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">gvirstor</span>(8)</span></a>。</p>

<p>　　为了保持命名方式一致， 将 GEOM class 内核模块 <tt class="FILENAME">g_md.ko</tt>
改名为 <tt class="FILENAME">geom_md.ko</tt>。</p>

<p>　　[amd64, i386] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hptiop&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hptiop</span>(4)</span></a> 驱动。
该驱动支持 Highpoint RocketRAID 3xxx 和 4xxx 系列的 SAS 和 SATA RAID控制器。</p>

<p>　　[amd64, i386] 新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hptrr&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hptrr</span>(4)</span></a>
驱动程序， 它能够支持多种 HighPoint RocketRAID 控制器 (更多细节， 可以在联机手册中找到)。
[已合并]</p>

<p>　　[amd64, i386] 对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hptmv&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hptmv</span>(4)</span></a>
驱动程序进行了更新， 它支持 amd64 和 PAE 了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=isp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">isp</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mpt&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mpt</span>(4)</span></a>
驱动程序进行了更新， 以支持包括 RAID 卷， 以及 RAID 成员状态/设置报告、
周期性卷重同步状态报告， 以及用于设置卷重同步速率、
卷成员写入缓存状态和卷事务队列深度等信功能。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mpt&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mpt</span>(4)</span></a>
驱动程序新增了 SAS HBA (部分)、 64-位 PCI 以及大规模数据传输的支持。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mpt&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mpt</span>(4)</span></a>
驱动程序是 MPSAFE 的了。</p>

<p>　　在较早版本的 FreeBSD 中出现过的 rr232x(4) 驱动程序已不再支持， 其功能已经被 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hptrr&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hptrr</span>(4)</span></a>
驱动程序所取代。 根据 Highpoint 的要求， 这一版本中删去了 rr232x(4) 驱动程序。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=twa&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">twa</span>(4)</span></a>
驱动更新到了 3ware 网站上公布的 3.70.03.007 版本。 这个版本对 AMCC 的 3ware 9650 系列
SATA 控制器提供了支持。 [已合并]</p>

<p>　　新增了用于 Internet SCSI (iSCSI) 协议的内核驱动 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iscsi_initiator&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">iscsi_initiator</span>(4)</span></a>。 这个驱动允许通过 TCP/IP
网络访问远程的 SCSI 设备。 用户态环境工具 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=iscontrol&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">iscontrol</span>(8)</span></a>
可以用来控制这一驱动程序的操作。</p>

<p>　　新增了模拟 Linux SCSI SG 直通设备 API 的大部分功能子集的 scsi_sg 驱动程序。
这使得以 Linux 模拟方式 (以及 FreeBSD 原生应用程序) 能够以和在 Linux 上面相同的方式操作
<tt class="FILENAME">/dev/sg<tt class="REPLACEABLE"><i>*</i></tt></tt> 设备。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">umass</span>(4)</span></a>
驱动提供了对命令 <tt class="LITERAL">PLAY_MSF</tt>、 <tt
class="LITERAL">PLAY_TRACK</tt>、 <tt class="LITERAL">PLAY_TRACK_REL</tt>、 <tt
class="LITERAL">PAUSE</tt>、 <tt class="LITERAL">PLAY_12</tt> 的支持， 这使得 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cdcontrol&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cdcontrol</span>(1)</span></a>
工具能够操作 USB CD 驱动器了。</p>
</div>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="FS" name="FS">2.2.5 File Systems</a></h4>

<p>　　FreeBSD NFS 子系统中的一部分 (与协议栈及 callout 的接口和 NFS 客户端部分) 是
MPSAFE 的了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pseudofs&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pseudofs</span>(9)</span></a>
伪文件系统构建包及使用它实现的文件系统 (<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">procfs</span>(5)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">linprocfs</span>(5)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=linsysfs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">linsysfs</span>(5)</span></a>) 是
MPSAFE 的了。</p>

<p>　　[amd64, i386] 增加了试验性的 TMPFS 文件系统支持。 TMPFS 是一种高效的内存文件系统，
它由 NetBSD 项目在 Google 的 Summer of Code 活动中开发。 关于这种文件系统的进一步信息，
请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tmpfs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tmpfs</span>(5)</span></a>。</p>

<p>　　重新实现了 unionfs 文件系统。 与之前的实现相比，
这个版本解决了许多崩溃和上锁问题。 此外， 它还提供了新增的 “transparent” (透明) 和
“masquerade” (伪装) 这两种工作模式， 能够自动在文件系统聚合的上层创建文件。
关于这个文件系统的进一步信息， 请参考联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_unionfs&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">mount_unionfs</span>(8)</span></a>。 [已合并]</p>

<p>　　[amd64, i386, pc98] 加入了对 Sun 的 ZFS 的支持。 关于这一文件系统的更多信息，
请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=zfs&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">zfs</span>(8)</span></a> 或 <a
href="http://www.opensolaris.org/os/community/zfs/" target="_top">OpenSolaris ZFS
主页</a>。</p>

<p>　　加入了初步的 (只读) 对 SGI 的 XFS 文件系统的支持。</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="USERLAND" name="USERLAND">2.3 用户态环境变动</a></h3>

<p>　　从 <tt class="FILENAME">libc</tt> 删去了原先随 INRIA IPv6 实现引入的 addr2ascii()
和 ascii2addr() 库函数调用。 在 FreeBSD 基本系统中已经不再有使用它们的地方。
作为相关的改动， 为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getnameinfo&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getnameinfo</span>(3)</span></a>
增加了对于 <tt class="LITERAL">AF_LINK</tt> 地址的支持。</p>

<p>　　删去了 <code class="VARNAME">struct addrinfo</code> 中的 <code
class="VARNAME">ai_addrlen</code> 原先用于保持 ABI 兼容性的补位桩。 例如， 这个变动会破坏
64 位平台， 包括 FreeBSD/amd64、 FreeBSD/ia64 以及 FreeBSD/sparc64 上 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=getaddrinfo&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">getaddrinfo</span>(3)</span></a>
函数的 ABI 兼容性。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=atrun&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">atrun</span>(8)</span></a>
工具新增了 PAM 支持。 在开始为用户帐号运行任务之前， 它会首先通过 PAM
检查用户帐号的状态。 默认的不可用的帐户定义包括已过期用户， 以及使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&sektion=8&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a>
锁定的用户。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">camcontrol</span>(8)</span></a>
新增了用于显示设备容量的 <tt class="COMMAND">readcap</tt> 命令。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a>
服务新增了 PAM 支持。 在运行帐户私有的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(5)</span></a>
文件中的命令之前， 它会通过 PAM 检查帐户的状态， 如果帐户不可用， 则跳过命令。
默认的不可用帐户定义包括已过期用户， 以及使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&sektion=8&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 锁定的用户。
此外， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">cron</span>(8)</span></a>
如果系统中存在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(5)</span></a>
文件， 除非 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(5)</span></a>
属主的登录类型 (login class) 不受 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(5)</span></a>
限制， 否则也会跳过其 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">crontab</span>(5)</span></a>
中的命令。 系统文件 <tt class="FILENAME">/etc/crontab</tt> 中配置的命令， 不受 PAM
检查的限制。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dhclient</span>(8)</span></a>
程序新增了 RFC 3422 描述的无类静态路由选项支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">restore</span>(8)</span></a>
程序能够保存和恢复文件的扩展属性信息了。</p>

<p>　　新增了实现用于操作 ELF 文件的 SVR4 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">elf</span>(3)</span></a> / <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gelf&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gelf</span>(3)</span></a> API 的
<b class="APPLICATION">libelf</b> 函数库。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fdisk</span>(8)</span></a>
程序新增了用于以 fdisk 配置文件格式显示 slice 表的 <code class="OPTION">-p</code> 选项。
[已合并]</p>

<p>　　删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=finger&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">finger</span>(1)</span></a> 的
T/TCP 支持 (以及用于启用该支持的 <code class="OPTION">-T</code> 选项)。</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=find&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">find</span>(1)</span></a>
程序无法正确处理传给 <code class="OPTION">-user</code> 和 <code
class="OPTION">-group</code> 的数字格式的参数的 bug。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">freebsd-update</span>(8)</span></a> 命令新增了 <tt
class="COMMAND">upgrade</tt> 子命令， 用于完成在不同的 FreeBSD 版本之间的二进制升级。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a>
工具新增了对 RFC2389 (FEAT) 和 RFC2640 (UTF8) 的支持。 RFC2640 支持是可选的，
可以通过新增的 <code class="OPTION">-8</code> 参数来启用。 更多信息， 可以在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a>
联机手册中找到。 [已合并]</p>

<p>　　默认启用了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gcc</span>(1)</span></a> SSP
(堆栈溢出保护) 支持。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gbde</span>(8)</span></a>
工具新增了 <code class="OPTION">-k</code> 和 <code class="OPTION">-K</code> 选项，
用于指定通行字之外的密钥文件。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gpt</span>(8)</span></a>
新增了设置 GPT 分区卷标的能力。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gvinum&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gvinum</span>(8)</span></a>
工具新增了 <tt class="COMMAND">resetconfig</tt> 子命令。</p>

<p>　　新增了 RFC2743 和 RFC2744 描述的第 2 版通用安全服务 (Generic Security Service) API
(GSS-API) 及其 C 绑定接口。 这是一个新增的可扩展 GSS-API 层， 它支持 GSS-API 插件， 与
Solaris 实现类似， 而原有的 Kerberos 5 GSS 机制， 则进行了重写，
作为新实现的插件库提供。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=hccontrol&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">hccontrol</span>(8)</span></a>
工具支持 HCI 节点自动探测了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=id&sektion=1&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">id</span>(1)</span></a> 工具会在组 ID
之后显示生效用户 ID 了。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfwpcap&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ipfwpcap</span>(8)</span></a>
工具。 它能够截获 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=divert&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">divert</span>(4)</span></a> socket
并将数据以 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pcap&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pcap</span>(3)</span></a> (也就是
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tcpdump</span>(1)</span></a>
所使用的) 格式写入文件或管道。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kdump&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kdump</span>(1)</span></a>
程序能够将系统调用参数以符号化的名字显示了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kenv&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kenv</span>(1)</span></a>
工具新增了用于禁止警告信息的 <code class="OPTION">-q</code> 选项。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=kgdb&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">kgdb</span>(1)</span></a>
新增了用于以读写模式打开 kmem target 的 <code class="OPTION">-w</code> 选项。 这使得 kgdb
能够直接作用于 <tt class="FILENAME">/dev/mem</tt>
并修改正在运行的系统的内核内存内容。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libarchive&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libarchive</span>(3)</span></a>
支持 POSIX.1e-风格的扩展属性了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=libarchive&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">libarchive</span>(3)</span></a>
库能够处理 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ar&sektion=1&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span
class="REFENTRYTITLE">ar</span>(1)</span></a>-格式的文件了。</p>

<p>　　<b class="APPLICATION">libc</b> 库中，
新增了对符号映射和版本化符号定义的实现。</p>

<p>　　<b class="APPLICATION">libedit</b> 库更新到了 NetBSD 源代码 2005 年 8
月的版本。</p>

<p>　　<b class="APPLICATION">libm</b> 库中，
新增了对符号映射和版本化符号定义的实现。</p>

<p>　　引入了新的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">malloc</span>(3)</span></a> 实现。
这个实现， 也称作 “jemalloc”， 是为改善多线程程序， 特别是在 SMP
系统上运行时的性能而设计的， 同时兼顾了单线程程序的性能。
由于采用了不同的算法和数据结构， jemalloc 可能会暴露一些以前没有发现的用户态代码的 bug，
不过尽管如此， 绝大多数 FreeBSD 基本系统和常用的 ports 都已经进行了测试和修正。 请注意，
jemalloc 使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mmap&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mmap</span>(2)</span></a>
来获取内存， 而只在十分有限的情况下使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sbrk&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sbrk</span>(2)</span></a>
(并且这有限的情形仅限 32-位 硬件架构)。 其结果是， <tt class="LITERAL">datasize</tt>
资源限制对典型的应用而言， 其效果会被严重削弱。 不过， 您可以使用 <tt
class="LITERAL">vmemoryuse</tt> 资源限制， 来限定进程能够使用的虚拟内存量， 具体细节，
请参见联机手册 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=limits&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">limits</span>(1)</span></a>。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdconfig</span>(8)</span></a>
工具能够将设备列表以 XML 格式输出了。 目前 <tt class="COMMAND">list</tt> 和 <tt
class="COMMAND">query</tt> 子命令支持这个功能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdconfig</span>(8)</span></a>
工具的 <code class="OPTION">-u</code> 选项， 支持指定以逗号分割的多个设备了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdmfs</span>(8)</span></a>
工具新增了用于在以 vnode 作为后端存储的虚拟盘上， 跳过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
执行步骤的 <code class="OPTION">-P</code> 参数。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdmfs</span>(8)</span></a>
工具新增了 <code class="OPTION">-E</code> 参数， 用于指定默认位置 (<tt
class="FILENAME">/sbin/mdconfig</tt>) 以外的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdconfig</span>(8)</span></a>
工具的位置。</p>

<p>　　在 <tt class="FILENAME">libc</tt> 中新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=memmem&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">memmem</span>(3)</span></a> 函数。
这与 <tt class="FILENAME">glibc</tt> 中的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=strstr&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">strstr</span>(3)</span></a>
函数是二进制兼容的。</p>

<p>　　删去了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a> 的 <tt
class="LITERAL">dev</tt> 和 <tt class="LITERAL">nodev</tt> 选项。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a>
工具新增了对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mqueuefs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mqueuefs</span>(5)</span></a>
的支持。</p>

<p>　　修正了导致 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a>
工具无法通过 <tt class="COMMAND">mount -u -o rw</tt>,
将读写挂接升级为只读挂接的问题。</p>

<p>　　删去了一系列文件系统专用的 <tt class="COMMAND">mount_<tt
class="REPLACEABLE"><i>*</i></tt></tt> 工具， 因为现在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mount</span>(8)</span></a>
命令提供了更为通用的 <code class="OPTION">-t</code> 选项。 具体说来，
下列命令已经删除掉了： <tt class="COMMAND">mount_devfs</tt>、 <tt
class="COMMAND">mount_ext2fs</tt>、 <tt class="COMMAND">mount_fdescfs</tt>、 <tt
class="COMMAND">mount_linprocfs</tt>、 <tt class="COMMAND">mount_procfs</tt>、 <tt
class="COMMAND">mount_std</tt>、 <tt class="COMMAND">mount_linsysfs</tt>、 <tt
class="COMMAND">mount_reiserfs</tt>， 以及 <tt class="COMMAND">mount_umapfs</tt>。</p>

<p>　　从 FreeBSD 基本系统中删去了 mrouted(8) 多播路由服务。 这个服务实现了 DVMRP
多播路由协议， 然而在许多多播系统中， 这种协议已经被 PIM 取代。 与此相关的 map-mbone(8)
和 mrinfo(8) 工具也已经被删除。 这些程序现在可以通过 FreeBSD Ports 套件中的 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/mrouted/pkg-descr"><tt
class="FILENAME">net/mrouted</tt></a> 来安装。</p>

<p>　　为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">netstat</span>(1)</span></a>
增加了显示 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sctp&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sctp</span>(4)</span></a>
协议统计数据的能力。</p>

<p>　　<tt class="FILENAME">/etc/nsswitch.conf</tt> 文件现在改为静态地安装，
而不是在每次系统启动时自动生成了。</p>

<p>　　删去了 objformat(1) 工具和 getobjformat(3) 函数库 (对于 a.out
可执行文件格式支持的最后残存物)。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pam_nologin&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pam_nologin</span>(8)</span></a>
模块不再提供验证 (authentication) 功能； 与此同时， 它转而提供帐户管理 (account
management) 功能。 位于 <tt class="FILENAME">/usr/local/etc/pam.d</tt> 的第三方文件，
可能需要手工编辑以适应这一变动； 具体而言， 这些文件中形如下面这行的配置：</p>

<pre class="SCREEN">
auth    required        pam_nologin.so  no_warn
</pre>

<br />
<br />
<p>　　这些配置中的 <tt class="LITERAL">auth</tt> 关键字， 应改为 <tt
class="LITERAL">account</tt>。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nscd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nscd</span>(8)</span></a>。
这是一个能够缓存 nsswitch 查询 (例如口令、 组， 以及服务数据库) 的服务，
它能够改善系统性能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
工具新增了用于将搜索范围限定于指定 pidfile 文件中所记录的 PID 进程中的 <code
class="OPTION">-F</code> 选项。 当配合另一个新增选项 <code class="OPTION">-L</code>
使用时， pidfile 还必须首先由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=flock&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">flock</span>(2)</span></a>
系统调用锁定， 或由 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pidfile&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pidfile</span>(3)</span></a>
创建。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
工具新增了 <code class="OPTION">-I</code> 选项， 其工作方式类似于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&sektion=1&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">rm</span>(1)</span></a> 的 <code
class="OPTION">-i</code> 参数。 当指定了这个选项时， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pkill&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pkill</span>(1)</span></a>
在发出信号前， 会对每个进程要求用户确认。</p>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pmcstat&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pmcstat</span>(8)</span></a>
程序进行了一系列改进： 现在它可以通过网络 socket 在远程主机上进行日志记录了。 <code
class="OPTION">-c</code> 能够接受以逗号分隔的用于配置 PMA 分配的 CPU 列表。 <code
class="OPTION">-t</code> 选项进行了增强， 能够支持以命令名的正则表达式来选择进程。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pmcstat&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pmcstat</span>(8)</span></a>
默认在全部 CPU 上分配系统 PMC， 而不是只限于 CPU 0。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=powerd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">powerd</span>(8)</span></a>
新增了用以指定 pidfile 的 <code class="OPTION">-P</code> 选项。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&sektion=8&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pw</span>(8)</span></a> 程序支持使用
<code class="OPTION">-M</code> 选项来自动设置新创建的主目录权限了。 [已合并]</p>

<p>　　在 FreeBSD 的 <b class="APPLICATION">libc</b> 中的 DNS 解析库更新到了 BIND 9.4.1
中的版本。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rpcbind&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rpcbind</span>(8)</span></a>
程序现在能够通过使用 <code class="OPTION">-h</code> 参数来指定 INADDR_ANY 以外的 IP
地址上的 TCP 监听了。 新增的 <code class="OPTION">-6</code> 标志则可以指定只绑定到 IPv6
地址。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rpcgen&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rpcgen</span>(1)</span></a>
工具现在默认生成符合 ANSI C 编译器标准的头文件和 stub 文件了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.lockd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rpc.lockd</span>(8)</span></a> 和
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rpc.statd</span>(8)</span></a>
程序新增了用于指定绑定端口的 <code class="OPTION">-p</code> 选项。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rtld&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rtld</span>(1)</span></a>
运行环境连接器提供了对于 GNU 语义的 ELF 符号版本支持。 这个实现的主要目标是与 GNU libc
实现， 并在 <a href="http://people.redhat.com/~drepper/symbol-versioning"
target="_top">http://people.redhat.com/~drepper/symbol-versioning</a> 和 LSB 3.0
文档中介绍的功能兼容。 同时， 新增的 <code class="FUNCTION">dlvsym()</code>
提供了查找某个符号特定版本的功能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&sektion=8&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">sa</span>(8)</span></a> 工具新增了
<code class="OPTION">-U</code> 和 <code class="OPTION">-P</code> 参数。
它们分别可以用来指定用户和进程统计文件的位置。</p>

<p>　　新增了用于编辑磁盘分区和 label 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sade&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sade</span>(8)</span></a> 工具。
这个工具基于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
中的部分代码。</p>

<p>　　修正了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sed&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sed</span>(1)</span></a>
工具无法计算某些模式空间长度的问题。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sed&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sed</span>(1)</span></a>
工具新增了对于大小写不敏感模式匹配的支持； 这一功能可以通过在正则表达式分割符后面指定参数
<tt class="LITERAL">I</tt> 来启用。</p>

<p>　　对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=setenv&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">setenv</span>(3)</span></a>
系列库函数调用的行为进行了修改， 由之前的 BSD API 行为改为 POSIX 强制的行为。 其结果是，
更新了许多依赖于旧 API 的基本系统工具来支持这一变动。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">setfacl</span>(1)</span></a> 的
<code class="OPTION">-h</code> 参数能够正确地在符号连接， 而不是其所指对象上设置 ACL
了。</p>

<p>　　为显示连接和监听网络 socket 的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sockstat&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sockstat</span>(1)</span></a>
工具新增了命令行选项 <code class="OPTION">-P</code>， 用以按照协议名称 (在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=protocols&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">protocols</span>(5)</span></a>
中列出) 过滤输出结果。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(8)</span></a> 新增了
<code class="OPTION">-q</code> 参数来制止一部分警告和错误信息的产生。</p>

<p>　　由于年久失修， 删去了 FreeBSD 基本系统中提供的 tcpslice 版本。
它的最新版本可以通过 Ports 套件中的 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/tcpslice/pkg-descr"><tt
class="FILENAME">net/tcpslice</tt></a> 来安装。</p>

<p>　　收到 <tt class="LITERAL">SIGINFO</tt> 信号时， <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=time&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">time</span>(1)</span></a>
工具会显示指定的进程运行消耗的时间了。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a>
程序新增了 <code class="OPTION">-a</code> 选项来指定显示进程参数向量中指定的标题；
这个功能对于监控使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=setproctitle&sektion=3&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">setproctitle</span>(3)</span></a>
修改自身进程标题的进程而言会很有用。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=top&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">top</span>(1)</span></a>
新增了用于指定 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">jail</span>(8)</span></a> ID 的
<code class="OPTION">-j</code> 选项来显示其中的进程。 [已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=touch&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">touch</span>(1)</span></a>
工具新增了 <code class="OPTION">-A</code> 标志来将文件的访问和修改时间修改为指定的值。
[已合并]</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=truss&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">truss</span>(1)</span></a>
工具新增了 <code class="OPTION">-s</code> 选项以提供与 strace (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/devel/strace/pkg-descr"><tt
class="FILENAME">devel/strace</tt></a>) 同样的功能。</p>

<p>　　<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=truss&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">truss</span>(1)</span></a>
不再依赖于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">procfs</span>(5)</span></a>
文件系统工作了； 它现在使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ptrace&sektion=2&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ptrace</span>(2)</span></a>
接口来控制被跟踪的进程。</p>

<p>　　[powerpc] <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=truss&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">truss</span>(1)</span></a>
工具支持 FreeBSD/powerpc 了。</p>

<p>　　删去了 usbd(8) 工具。 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devd</span>(8)</span></a>
工具及其配置文件现在已经能够完全支持其功能了。</p>

<p>　　将 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=uuidgen&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">uuidgen</span>(1)</span></a>
工具从 <tt class="FILENAME">/usr/bin</tt> 挪到了 <tt class="FILENAME">/bin</tt>。</p>

<p>　　删去了已经被 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mdconfig</span>(8)</span></a>
替代多时的 vnconfig(8) 工具。</p>

<p>　　删去了 wicontrol(8) 工具。 对于 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">wi</span>(4)</span></a>
网络接口的配置应通过 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ifconfig</span>(8)</span></a>
来进行。</p>

<p>　　由于一些可能发生的 ABI 变动， 调整了所有动态连接库的版本。 这些库包括： snmp_<tt
class="REPLACEABLE"><i>*</i></tt>, libdialog, libg2c, libobjc, libreadline, libregex,
libstdc++, libkrb5, libalias, libarchive, libbegemot, libbluetooth, libbsnmp, libbz2,
libc_r, libcrypt, libdevstat, libedit, libexpat, libfetch, libftpio, libgpib, libipsec,
libkiconv, libmagic, libmp, libncp, libncurses, libnetgraph, libngatm, libopie, libpam,
libpthread, libradius, libsdp, libsmb, libtacplus, libthr, libthread_db, libugidfw,
libusbhid, libutil, libvgl, libwrap, libypclnt, libm, libcrypto, libssh, 以及
libssl。</p>

<p>　　新实现了 <code class="FUNCTION">wcsdup()</code> 函数， 这个函数在 Microsoft 和 GNU
系统中十分流行。</p>

<p>　　将 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlandebug&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlandebug</span>(8)</span></a>
工具加入到了 FreeBSD 的主源码树 (之前它在 tools 目录中)。 它提供了一系列针对 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wlan&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">wlan</span>(4)</span></a>
模块及相关驱动的控制功能， 在调试无线网络问题时会很有用。</p>

<p>　　新增了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=wpa_passphrase&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">wpa_passphrase</span>(8)</span></a> 工具。 它能够从 ASCII 口令生成
256-位 的预分发 WPA 密钥。 [已合并]</p>

<div class="SECT3">
<hr />
<h4 class="SECT3"><a id="RC-SCRIPTS" name="RC-SCRIPTS">2.3.1 <tt
class="FILENAME">/etc/rc.d</tt> 脚本</a></h4>

<p>　　新增了用于启动独立的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ftpd</span>(8)</span></a> 的 <tt
class="FILENAME">ftpd</tt> 脚本。</p>

<p>　　由于新增了功能更强的 <tt class="FILENAME">encswap</tt> 脚本， <tt
class="FILENAME">gbde_swap</tt> 被淘汰了， 前者也提供了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geli</span>(8)</span></a>
加密交换分区的支持。</p>

<p>　　新增了用于在引导时配置 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">geli</span>(8)</span></a> 设备的
<tt class="FILENAME">geli</tt> 和 <tt class="FILENAME">geli2</tt> 脚本。</p>

<p>　　由于基本系统中已经不再提供 IPsec IKE 服务， 删去了与之对应的 <tt
class="FILENAME">ike</tt> 脚本。</p>

<p>　　新增了用以处理 vnode 后端的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=md&sektion=4&manpath=FreeBSD+7.0-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">md</span>(4)</span></a> 设备的 <tt
class="FILENAME">mdconfig</tt> 脚本。 这个脚本的主要目的是替代先前的 <tt
class="FILENAME">ramdisk</tt> 脚本， 因此先前的 <code class="VARNAME">ramdisk_*</code>
变量均改名为 <code class="VARNAME">mdconfig_*</code>。 此外， 新增了两个 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">rc.conf</span>(5)</span></a> 变量
<code class="VARNAME">mdconfig_<tt class="REPLACEABLE"><i>*</i></tt>_files</code> 和
<code class="VARNAME">mdconfig_<tt class="REPLACEABLE"><i>*</i></tt>_cmd</code>。
例如：</p>

<pre class="PROGRAMLISTING">
mdconfig_md0="-t malloc -s 10m"
mdconfig_md1="-t vnode -f /var/foo.img"
</pre>

<p>　　删去了位于 <tt class="FILENAME">/etc/rc.d</tt> 中的 <tt
class="FILENAME">rcconf.sh</tt> 脚本， 并增加了用以标记引导过程中的早期和晚期分界点的变量
<code class="VARNAME">early_late_divider</code>。</p>

<p>　　<tt class="FILENAME">rc.initdiskless</tt> 脚本使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">tar</span>(1)</span></a> 代替了 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pax</span>(1)</span></a>， 因为 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&sektion=1&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pax</span>(1)</span></a>
需要可写的临时目录， 而在这个脚本执行时， 可能并没有这样的目录。</p>

<p>　　由于 OLDCARD 已被宣告过时， 因此 <tt class="FILENAME">pccard</tt>
脚本也被宣告过时了。</p>

<p>　　<tt class="FILENAME">sendmail</tt> 脚本在别名 (aliases)
数据库不存在或比别名文件旧时， 不再自动对其进行重建了。 [已合并] 如果有需要， 可以在
rc.conf 中将新增的 <code class="VARNAME">sendmail_rebuild_aliases</code> 变量设置为 "YES"
来恢复这一功能。</p>

<p>　　删去了 <code class="VARNAME">removable_interfaces</code> 变量。</p>

<p>　　为 <code class="VARNAME">ifconfig_<tt class="REPLACEABLE"><i>ifn</i></tt></code>
新增了关键字 <tt class="LITERAL">NOAUTO</tt>。 这会阻止网络接口在系统引导过程中或通过 <tt
class="FILENAME">/etc/pccard_ether</tt> 启用， 但允许使用 <tt
class="FILENAME">/etc/rc.d/netif</tt> 来以纯手工的方式启用和停用接口。</p>

<p>　　<tt class="FILENAME">/etc/rc.d/nfslocking</tt> 脚本已被宣告过时，
并将在未来的版本中删去。 其功能已经由 <tt class="FILENAME">/etc/rc.d/lockd</tt> 和 <tt
class="FILENAME">/etc/rc.d/statd</tt> 脚本取代。 [已合并]</p>
</div>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="CONTRIB" name="CONTRIB">2.4 基本系统中的第三方软件</a></h3>

<p>　　<b class="APPLICATION">Intel ACPI-CA</b> 升级到了 20070320。</p>

<p>　　<b class="APPLICATION">awk</b> 由 2005 年 4 月 24 日版升级到了 2007 年 5 月 1
日版。 [已合并]</p>

<p>　　<b class="APPLICATION">BIND</b> 由 9.3.3 升级到了 9.4.2。</p>

<p>　　<b class="APPLICATION">BSNMPD</b> 由 1.11 升级到了 1.12。</p>

<p>　　<b class="APPLICATION">BZIP2</b> 由 1.0.3 升级到了 1.0.4。 [已合并]</p>

<p>　　GNU <b class="APPLICATION">Diffutils</b> 由 2.7 升级到了 2.8.7。 [已合并]</p>

<p>　　<b class="APPLICATION">DRM</b> 更新到了 DRI CVS 20060517 的快照。 [已合并]</p>

<p>　　引导加载器使用的 Forth Inspired Command Language (<b class="APPLICATION">FICL</b>)
升级到了 3.03。</p>

<p>　　<b class="APPLICATION">FILE</b> 由 4.12 升级到了 4.23。</p>

<p>　　<b class="APPLICATION">GCC</b> 由 3.4.6 升级到了 4.2.1。</p>

<p>　　<b class="APPLICATION">GNU Readline library</b> 由 5.0 升级到了 5.2 patch 2。
[已合并]</p>

<p>　　GNU 版本的 <b class="APPLICATION">gzip</b> 被替换成了一个经过修改的来自 NetBSD 的
gzip。 [已合并]</p>

<p>　　<b class="APPLICATION">IPFilter</b> 由 4.1.13 升级到了 4.1.28 版。 [已合并]</p>

<p>　　<b class="APPLICATION">less</b> 由 v394 升级到了 v416 版。 [已合并]</p>

<p>　　<b class="APPLICATION">libpcap</b> 由 0.9.4 升级到了 0.9.8 版。</p>

<p>　　<b class="APPLICATION">netcat</b> 由 OpenBSD 3.9 升级到了 OpenBSD 4.1 中的版本。
[已合并]</p>

<p>　　<b class="APPLICATION">OpenSSL</b> 由 0.9.7e 更新到了 0.9.8e。</p>

<p>　　<b class="APPLICATION">ncurses</b> 由 5.2-20020615 更新到了 5.6-20061217 版。
ncurses 新增了宽字符支持。 [已合并]</p>

<p>　　<b class="APPLICATION">hostapd</b> 由 0.3.9 版更新到了 0.5.8 版。</p>

<p>　　<b class="APPLICATION">PF</b> 由 OpenBSD 的 3.7 版更新到了 OpenBSD 4.1 版。
这一更新包含了一系列功能方面的增强。 两个比较显著的变动是， 在 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf.conf&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pf.conf</span>(5)</span></a> 中，
<tt class="LITERAL">keep state</tt> 以及 <tt class="LITERAL">flags S/SA</tt> 是 TCP
规则默认的行为了。 如有需求， 则需要使用对应的选项 <tt class="LITERAL">no state</tt> 和
<tt class="LITERAL">flags any</tt> 来分别禁用带状态过滤和 TCP 标志检查。</p>

<p>　　<b class="APPLICATION">sendmail</b> 由 8.13.8 更新到了 8.14.2 版。 [已合并]</p>

<p>　　<b class="APPLICATION">tcpdump</b> 由 3.9.4 更新到了 3.9.8 版。</p>

<p>　　时区数据库从 <b class="APPLICATION">tzdata2006g</b> 版升级到了 <b
class="APPLICATION">tzdata2007k</b> 版。 [已合并]</p>

<p>　　<b class="APPLICATION">tip</b> 更新到了来自 OpenBSD 与 20060831 的快照版本。</p>

<p>　　TrustedBSD <b class="APPLICATION">OpenBSM</b>, 由 1.0 alpha 12 更新到了 1.0
版。</p>

<p>　　<b class="APPLICATION">WPA Supplicant</b> 由 0.3.9 版更新到了 0.5.8 版。</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="PORTS" name="PORTS">2.5 Ports/Packages 套件基础结构</a></h3>

<p>　　</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="RELENG" name="RELENG">2.6 发布工程与系统集成</a></h3>

<p>　　对现有的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
工具的分区算法进行了修改。</p>

<ul>
<li>
<p>在磁盘容量超过 (3 * RAM尺寸 + 10GB) 时， 默认的分区尺寸为：</p>

<div class="INFORMALTABLE"><a id="AEN1542" name="AEN1542"></a>
<table border="0" frame="void" class="CALSTABLE">
<col width="1*" />
<col width="2*" />
<thead>
<tr>
<th>分区</th>
<th>尺寸</th>
</tr>
</thead>

<tbody>
<tr>
<td>交换区</td>
<td>RAM尺寸 * 2</td>
</tr>

<tr>
<td><tt class="FILENAME">/</tt></td>
<td>512 MB</td>
</tr>

<tr>
<td><tt class="FILENAME">/tmp</tt></td>
<td>512 MB</td>
</tr>

<tr>
<td><tt class="FILENAME">/var</tt></td>
<td>1024 MB + RAM尺寸</td>
</tr>

<tr>
<td><tt class="FILENAME">/usr</tt></td>
<td>余下的部分 (8GB 或更多)</td>
</tr>
</tbody>
</table>
</div>
</li>

<li>
<p>在磁盘尺寸大于 (RAM尺寸 / 8 + 2 GB) 时， 默认的尺寸为下面的范围，
而空间则按比例分配：</p>

<div class="INFORMALTABLE"><a id="AEN1572" name="AEN1572"></a>
<table border="0" frame="void" class="CALSTABLE">
<col width="1*" />
<col width="2*" />
<thead>
<tr>
<th>分区</th>
<th>尺寸</th>
</tr>
</thead>

<tbody>
<tr>
<td>交换区</td>
<td>从 RAM尺寸 / 8 到 RAM尺寸 * 2</td>
</tr>

<tr>
<td><tt class="FILENAME">/</tt></td>
<td>从 256MB 到 512MB</td>
</tr>

<tr>
<td><tt class="FILENAME">/tmp</tt></td>
<td>从 128MB 到 512MB</td>
</tr>

<tr>
<td><tt class="FILENAME">/var</tt></td>
<td>从 128MB 到 1024MB</td>
</tr>

<tr>
<td><tt class="FILENAME">/usr</tt></td>
<td>从 1536MB 到 8192MB</td>
</tr>
</tbody>
</table>
</div>
</li>

<li>
<p>如果系统中的磁盘空间更少， 则采用先前的分配策略。</p>
</li>
</ul>

<p>　　在 <tt class="FILENAME">src/Makefile</tt> 中新增了 <tt
class="LITERAL">showconfig</tt> target， 其作用是显示用于联编 FreeBSD
源代码树的配置。</p>

<p>　　新增了用于指定每次构建 FreeBSD 源代码树时构建参数的 <tt
class="FILENAME">src.conf</tt> 文件。 要了解进一步的详情， 请参见 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=build&sektion=7&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">build</span>(7)</span></a> 和 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=src.conf&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">src.conf</span>(5)</span></a>。</p>

<p>　　支持的 <b class="APPLICATION">GNOME</b> 桌面环境 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/gnome2/pkg-descr"><tt
class="FILENAME">x11/gnome2</tt></a>) 的版本， 从 2.16.1 升级到了 2.20.1。 [已合并]</p>

<p>　　支持的 <b class="APPLICATION">KDE</b> 桌面环境 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/kde3/pkg-descr"><tt
class="FILENAME">x11/kde3</tt></a>) 的版本， 从 3.5.4 升级到了 3.5.7。 [已合并]</p>

<p>　　支持的 <b class="APPLICATION">Xorg</b> 视窗系统 (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11/xorg/pkg-descr"><tt
class="FILENAME">x11/xorg</tt></a>) 的版本， 从 6.9.2 升级到了 7.3.0。 [已合并]</p>

<p>　　默认的 <code class="VARNAME">X11BASE</code> 变量设置， 已由 <tt
class="FILENAME">/usr/X11R6</tt> 改为 <tt class="FILENAME">/usr/local</tt>， 即与 <code
class="VARNAME">LOCALBASE</code> 的默认值相同。 [已合并]</p>

<p>　　这一版本的 FreeBSD 开始采用 700MB CDROM 介质的 ISO 映像文件。 多数较早的 FreeBSD
版本采用的是 650MB 的 CDROM 介质。 [已合并]</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="DOC" name="DOC">2.7 文档</a></h3>

<p>　　通过新增下列联机手册， 加强了对现有功能的文档化描述： <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_sony&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">acpi_sony</span>(4)</span></a>、
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=device_get_sysctl&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">device_get_sysctl</span>(9)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ext2fs&sektion=5&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ext2fs</span>(5)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mca&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mca</span>(8)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nanobsd&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nanobsd</span>(8)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_mss&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_mss</span>(4)</span></a>、 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_t4dwave&sektion=4&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">snd_t4dwave</span>(4)</span></a>、
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&sektion=9&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysctl</span>(9)</span></a>。</p>

<p>　　在 <tt class="FILENAME">src/sys/doc/subsys</tt> 中增加了通过利用 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/devel/doxygen/pkg-descr"><tt
class="FILENAME">devel/doxygen</tt></a> 来生成内核子系统 API 文档的初步支持。 如果要生成
API 文档， 只需在 <tt class="FILENAME">src/</tt> 目录中执行 <tt class="COMMAND">make
doxygen</tt> 即可。</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADE" name="UPGRADE">3 从先前版本的 FreeBSD 升级</a></h2>

<p>　　[i386、 amd64] 从 FreeBSD 6.2-RELEASE 开始， 系统已经能够通过使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">freebsd-update</span>(8)</span></a> 来实现 RELEASE 版本之间
(以及不同安全分支的快照版本) 的二进制升级。 二进制升级过程将更新未经修改的 userland
工具， 以及随官方 FreeBSD 发行版发布的、 未作修改的 GENERIC 或 SMP 内核。 使用 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">freebsd-update</span>(8)</span></a> 工具的主机， 需要有可用的
Internet 连接。</p>

<p>　　旧式的二进制升级， 则是通过随 CDROM 发行介质提供的 <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+7.0-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a> 的
<tt class="COMMAND">Upgrade</tt> 选项来完成的。 这种二进制升级方式， 对于 非-i386、
非-amd64 的， 以及没有接入 Internet 的系统而言会比较有用。</p>

<p>　　此外， 也可以使用源代码从较早版本升级的方式 (通过从源代码重新编译 FreeBSD
的基本系统)， 其操作方法请参见 <tt class="FILENAME">/usr/src/UPDATING</tt>。</p>

<div class="IMPORTANT">
<blockquote class="IMPORTANT">
<p><b>重要:</b> 很显然，升级 FreeBSD 时，应该首先备份 <span class="emphasis"><b
class="EMPHASIS">全部</b></span> 数据和配置文件。</p>
</blockquote>
</div>
</div>
</div>

<hr />
<p align="center"><small>这份文档，以及其他与FreeBSD发行版本有关的文档，都可以在 <a
href="http://www.FreeBSD.org/snapshots/">http://www.FreeBSD.org/snapshots/</a>下载。</small></p>

<p align="center"><small>在遇到关于FreeBSD的技术问题时，请首先阅读 <a
href="http://www.FreeBSD.org/docs.html">文档</a> 之后再考虑联系 &#60;<a
href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&#62;。</small></p>

<p align="center"><small>所有 FreeBSD 7-STABLE 的用户都应该订阅 &#60;<a
href="mailto:current@FreeBSD.org">current@FreeBSD.org</a>&#62; 邮件列表。</small></p>

<p align="center"><small>关于这份文档的任何问题，请致信 &#60;<a
href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&#62;。</small></p>
</body>
</html>

