<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7. Using Type 1 Fonts with Groff</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Fonts and FreeBSD" /><link rel="up" href="index.html" title="Fonts and FreeBSD" /><link rel="prev" href="type1-fonts-ghostscript.html" title="6. Using Type 1 Fonts with Ghostscript" /><link rel="next" href="convert-truetype.html" title="8. Converting TrueType Fonts to a groff/PostScript Format For groff" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Using Type 1 Fonts with Groff</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="type1-fonts-ghostscript.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="convert-truetype.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-groff"></a>7. Using Type 1 Fonts with Groff</h2></div></div></div><p>Now that the new font can be used by both
      <span class="application">X11</span> and
      <span class="application">Ghostscript</span>, how can one use the new
      font with <span class="application">groff</span>? First of
      all, since we are dealing with type 1 <span class="trademark">PostScript</span>® fonts, the
      <span class="application">groff</span> device that is applicable is
      the <span class="emphasis"><em>ps</em></span>
      device.  A font file must be created for each font that
      <span class="application">groff</span> can use.  A
      <span class="application">groff</span> font name is just a file in
      <code class="filename">/usr/share/groff_font/devps</code>.  With our
      example, the font file could be
      <code class="filename">/usr/share/groff_font/devps/SHOWBOAT</code>.  The
      file must be created using tools provided by
      <span class="application">groff</span>.</p><p>The first tool is <code class="command">afmtodit</code>.  This is not
      normally installed, so it must be retrieved from the source
      distribution.  I found I had to change the first line of the
      file, so I did:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cp /usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.pl /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ex /tmp/afmtodit.pl
:1c
#!/usr/bin/perl -P-
.
:wq</code></strong></pre></div><p>This tool will create the <span class="application">groff</span>
      font file from the metrics file (<code class="filename">.afm</code>
      suffix.) Continuing with our example:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Many .afm files are in Mac format&#8230; ^M delimited lines
We need to convert them to <span class="trademark">UNIX</span>® style ^J delimited lines</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat /usr/local/share/fonts/type1/showboat.afm |
	tr '\015' '\012' &gt;showboat.afm</code></strong>

<em class="lineannotation"><span class="lineannotation">Now create the groff font file</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/share/groff_font/devps</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>/tmp/afmtodit.pl -d DESC -e text.enc /tmp/showboat.afm generate/textmap SHOWBOAT</code></strong></pre></div><p>The font can now be referenced with the name
      SHOWBOAT.</p><p>If <span class="application">Ghostscript</span> is used to drive
      the printers on the system, then nothing more needs to be done.
      However, if true <span class="trademark">PostScript</span>® printers are used, then the font
      must be downloaded to the printer in order for the font to be
      used (unless the printer happens to have the showboat font built
      in or on an accessible font disk.) The final step is to create
      a downloadable font.  The <code class="command">pfbtops</code> tool is
      used to create the <code class="filename">.pfa</code> format of the font,
      and <code class="filename">download</code> is modified to
      reference the new font.  The <code class="filename">download</code>
      must reference the internal name of the font.  This can easily
      be determined from the groff font file as illustrated:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Create the .pfa font file</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>pfbtops /usr/local/share/fonts/type1/showboat.pfb &gt;showboat.pfa</code></strong></pre></div><p>Of course, if <code class="filename">.pfa</code> is already
      available, just use a symbolic link to reference it.</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Get the internal font name</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>fgrep internalname SHOWBOAT</code></strong>
internalname Showboat

<em class="lineannotation"><span class="lineannotation">Tell groff that the font must be downloaded</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ex download
:$a
Showboat      showboat.pfa
.
:wq</code></strong></pre></div><p>To test the font:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat &gt;example.t &lt;&lt;EOF
.sp 5
.ps 16
This is an example of the Showboat font:
.br
.ps 48
.vs (\n(.s+2)p
.sp
.ft SHOWBOAT
ABCDEFGHI
.br
JKLMNOPQR
.br
STUVWXYZ
.sp
.ps 16
.vs (\n(.s+2)p
.fp 5 SHOWBOAT
.ft R
To use it for the first letter of a paragraph, it will look like:
.sp 50p
\s(48\f5H\s0\fRere is the first sentence of a paragraph that uses the
showboat font as its first letter.
Additional vertical space must be used to allow room for the larger
letter.
EOF</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>groff -Tps example.t &gt;example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">To use ghostscript/ghostview</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ghostview example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">To print it</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>lpr -Ppostscript example.ps</code></strong></pre></div><p>References:
      <code class="filename">/usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.man</code>,
      <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff_font&amp;sektion=5&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff_font</span>(5)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff_char&amp;sektion=7&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff_char</span>(7)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=pfbtops&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">pfbtops</span>(1)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="type1-fonts-ghostscript.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="convert-truetype.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6. Using Type 1 Fonts with Ghostscript </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8. Converting TrueType Fonts to a groff/PostScript Format For
      groff</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>