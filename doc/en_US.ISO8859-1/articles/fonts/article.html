<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Fonts and FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><meta name="description" content="This document contains a description of the various font files that may be used with FreeBSD and the syscons driver, X11, Ghostscript and Groff. Cookbook examples are provided for switching the syscons display to 80x60 mode, and for using type 1 fonts with the above application programs." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="en" class="article" lang="en"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp43894392"></a>Fonts and FreeBSD</h1></div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="subtitle"><em>A Tutorial</em></h3></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Dave</span> <span class="surname">Bodenstab</span></h3><div class="affiliation"><div class="address"><p><br />
	    <code class="email">&lt;<a xmlns="" class="email" href="mailto:imdave@synet.net">imdave@synet.net</a>&gt;</code><br />
	  </p></div></div></div></div></div><div>Revision: <a href="https://svnweb.freebsd.org/changeset/doc/7bf7362045"><span class="svnref">7bf7362045</span></a></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD is a registered trademark of
  the FreeBSD Foundation.</p><p>Adobe, Acrobat, Acrobat Reader, Flash and
  PostScript are either registered trademarks or trademarks of Adobe
  Systems Incorporated in the United States and/or other
  countries.</p><p>Apple, AirPort, FireWire,
  iMac, iPhone, iPad,
  Mac, Macintosh, Mac OS,
  Quicktime, and TrueType are trademarks of Apple Inc.,
  registered in the U.S. and other countries.</p><p>Linux is a registered trademark of
  Linus Torvalds.</p><p>Microsoft, IntelliMouse, MS-DOS,
  Outlook, Windows, Windows Media and Windows NT are either
  registered trademarks or trademarks of Microsoft Corporation in the
  United States and/or other countries.</p><p>Motif, OSF/1, and UNIX are
  registered trademarks and IT DialTone and The Open Group are
  trademarks of The Open Group in the United States and other
  countries.</p><p>Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <span class="quote">&#8220;<span class="quote">&#8482;</span>&#8221;</span> or the
  <span class="quote">&#8220;<span class="quote">®</span>&#8221;</span> symbol.</p></div></div><div>Last modified on 2019-03-23 04:50:01 +0000 by bcr.</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Abstract</div><p>This document contains a description of the various font
	files that may be used with FreeBSD and the syscons driver,
	<span class="application">X11</span>,
	<span class="application">Ghostscript</span> and
	<span class="application">Groff</span>.  Cookbook examples are
	provided for switching the syscons display to 80x60 mode, and
	for using type 1 fonts with the above application
	programs.</p></div></div></div><div class="docformatnavi">
      [
      <a href="index.html">Split HTML</a>
      /
      
	  Single HTML
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="#intro">1. Introduction</a></span></dt><dt><span class="sect1"><a href="#terminology">2. Basic Terminology</a></span></dt><dt><span class="sect1"><a href="#font-formats">3. What Font Formats Can I Use?</a></span></dt><dt><span class="sect1"><a href="#virtual-console">4. Setting a Virtual Console to 80x60 Line Mode</a></span></dt><dt><span class="sect1"><a href="#type1-fonts-x11">5. Using Type 1 Fonts with
      <span class="application">X11</span></a></span></dt><dt><span class="sect1"><a href="#type1-fonts-ghostscript">6. Using Type 1 Fonts with Ghostscript</a></span></dt><dt><span class="sect1"><a href="#type1-fonts-groff">7. Using Type 1 Fonts with Groff</a></span></dt><dt><span class="sect1"><a href="#convert-truetype">8. Converting TrueType Fonts to a groff/PostScript Format For
      groff</a></span></dt><dt><span class="sect1"><a href="#truetype-for-other-programs">9. Can TrueType Fonts be Used with Other Programs?</a></span></dt><dt><span class="sect1"><a href="#obtaining-additional-fonts">10. Where Can Additional Fonts be Obtained?</a></span></dt><dt><span class="sect1"><a href="#additional-questions">11. Additional Questions</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="intro"></a>1. Introduction</h2></div></div></div><p>There are many sources of fonts available, and one might ask
      how they might be used with FreeBSD.  The answer can be found by
      carefully searching the documentation for the component that one
      would like to use.  This is very time consuming, so this
      tutorial is an attempt to provide a shortcut for others who
      might be interested.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="terminology"></a>2. Basic Terminology</h2></div></div></div><p>There are many different font formats and associated font
      file suffixes.  A few that will be addressed here are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
	  <code class="filename">.pfa</code>, <code class="filename">.pfb</code></span></dt><dd><p><span class="trademark">PostScript</span>® type 1 fonts.  The
	    <code class="filename">.pfa</code> is the
	    <span class="emphasis"><em>A</em></span>scii form and
	    <code class="filename">.pfb</code> the <span class="emphasis"><em>B</em></span>inary
	    form.</p></dd><dt><span class="term"><code class="filename">.afm</code></span></dt><dd><p>The font metrics associated with a type 1 font.</p></dd><dt><span class="term"><code class="filename">.pfm</code></span></dt><dd><p>The printer font metrics associated with a type 1
	    font.</p></dd><dt><span class="term"><code class="filename">.ttf</code></span></dt><dd><p>A <span class="trademark">TrueType</span>® font</p></dd><dt><span class="term"><code class="filename">.fot</code></span></dt><dd><p>An indirect reference to a TrueType font (not an
	    actual font)</p></dd><dt><span class="term">
	  <code class="filename">.fon</code>,
	  <code class="filename">.fnt</code>
	</span></dt><dd><p>Bitmapped screen fonts</p></dd></dl></div><p>The <code class="filename">.fot</code> is used by <span class="trademark">Windows</span>® as
      sort of a symbolic link to the actual <span class="trademark">TrueType</span>® font
      (<code class="filename">.ttf</code>) file.  The <code class="filename">.fon</code>
      font files are also used by Windows.  I know of no way to use
      this font format with FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="font-formats"></a>3. What Font Formats Can I Use?</h2></div></div></div><p>Which font file format is useful depends on the application
      being used.  FreeBSD by itself uses no fonts.  Application
      programs and/or drivers may make use of the font files.  Here is
      a small cross reference of application/driver to the font type
      suffixes:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Driver</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">vt</span></dt><dd><p><code class="filename">.hex</code></p></dd><dt><span class="term">syscons</span></dt><dd><p><code class="filename">.fnt</code></p></dd></dl></div></dd><dt><span class="term">Application</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="application">Ghostscript</span></span></dt><dd><p><code class="filename">.pfa</code>,
		  <code class="filename">.pfb</code>,
		  <code class="filename">.ttf</code></p></dd><dt><span class="term"><span class="application">X11</span></span></dt><dd><p><code class="filename">.pfa</code>,
		  <code class="filename">.pfb</code></p></dd><dt><span class="term"><span class="application">Groff</span></span></dt><dd><p><code class="filename">.pfa</code>,
		  <code class="filename">.afm</code></p></dd><dt><span class="term"><span class="application">Povray</span></span></dt><dd><p><code class="filename">.ttf</code></p></dd></dl></div></dd></dl></div><p>The <code class="filename">.fnt</code> suffix is used quite
      frequently.  I suspect that whenever someone wanted to create a
      specialized font file for their application, more often than not
      they chose this suffix.  Therefore, it is likely that files with
      this suffix are not all the same format; specifically, the
      <code class="filename">.fnt</code> files used by syscons under FreeBSD
      may not be the same format as a <code class="filename">.fnt</code> one
      encounters in the <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>® environment.  I have not
      made any attempt at using other <code class="filename">.fnt</code> files
      other than those provided with FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtual-console"></a>4. Setting a Virtual Console to 80x60 Line Mode</h2></div></div></div><p>First, an 8x8 font must be loaded.  To do this,
      <code class="filename">/etc/rc.conf</code> should contain the
      line (change the font name to an appropriate one for
      your locale):</p><div class="informalexample"><pre class="programlisting">font8x8="iso-8x8"		# font 8x8 from /usr/share/syscons/fonts/* (or NO).</pre></div><p>The command to actually switch the mode is
      <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>vidcontrol VGA_80x60</code></strong></pre></div><p>Various screen-oriented programs, such as <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>, must
      be able to determine the current screen dimensions.  As this is
      achieved this through <code class="command">ioctl</code> calls to the
      console driver (such as <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a>) they will correctly
      determine the new screen dimensions.</p><p>To make this more seamless, one can embed these commands in
      the startup scripts so it takes place when the system boots.
      To do this is add this line to
      <code class="filename">/etc/rc.conf</code>.</p><div class="informalexample"><pre class="programlisting">allscreens_flags="VGA_80x60"	# Set this vidcontrol mode for all virtual screens</pre></div><p>References: <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-x11"></a>5. Using Type 1 Fonts with
      <span class="application">X11</span></h2></div></div></div><p><span class="application">X11</span> can use either the
      <code class="filename">.pfa</code> or the
      <code class="filename">.pfb</code> format fonts.  The
      <span class="application">X11</span> fonts are located in various
      subdirectories under
      <code class="filename">/usr/X11R6/lib/X11/fonts</code>.  Each font file
      is cross referenced to its <span class="application">X11</span> name
      by the contents of <code class="filename">fonts.dir</code> in each
      directory.</p><p>There is already a directory named
      <code class="filename">Type1</code>.  The most straight forward way to
      add a new font is to put it into this directory.  A better way
      is to keep all new fonts in a separate directory and use a
      symbolic link to the additional font.  This allows one to more
      easily keep track of ones fonts without confusing them with the
      fonts that were originally provided.  For example:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Create a directory to contain the font files</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>mkdir -p /usr/local/share/fonts/type1</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/share/fonts/type1</code></strong>

<em class="lineannotation"><span class="lineannotation">Place the .pfa, .pfb and .afm files here</span></em>
<em class="lineannotation"><span class="lineannotation">One might want to keep readme files, and other documentation</span></em>
<em class="lineannotation"><span class="lineannotation">for the fonts here also</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.pfb .</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.afm .</code></strong>

<em class="lineannotation"><span class="lineannotation">Maintain an index to cross reference the fonts</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>echo showboat - InfoMagic CICA, Dec 1994, /fonts/atm/showboat &gt;&gt;INDEX</code></strong></pre></div><p>Now, to use a new font with <span class="application">X11</span>,
      one must make the font file available and update the font name
      files.  The <span class="application">X11</span> font names look
      like:</p><div class="informalexample"><pre class="programlisting">-bitstream-charter-medium-r-normal-xxx-0-0-0-0-p-0-iso8859-1
     |        |      |    |   |     |  | | | | | |    \    \
     |        |      |    |   |     \  \ \ \ \ \ \     +----+- character set
     |        |      |    |   \      \  \ \ \ \ \ +- average width
     |        |      |    |    \      \  \ \ \ \ +- spacing
     |        |      |    \	\      \  \ \ \ +- vertical res.
     |        |      |     \	 \	\  \ \ +- horizontal res.
     |        |      |      \	  \	 \  \ +- points
     |        |      |       \     \	  \  +- pixels
     |        |      |        \     \	   \
  foundry  family  weight   slant  width  additional style</pre></div><p>A new name needs to be created for each new font.  If you
      have some information from the documentation that accompanied
      the font, then it could serve as the basis for creating the
      name.  If there is no information, then you can get some idea by
      using <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a> on the font file.  For example:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>strings showboat.pfb | more</code></strong>
%!FontType1-1.0: Showboat 001.001
%%CreationDate: 1/15/91 5:16:03 PM
%%VMusage: 1024 45747
% Generated by Fontographer 3.1
% Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.
FontDirectory/Showboat known{/Showboat findfont dup/UniqueID known{dup
/UniqueID get 4962377 eq exch/FontType get 1 eq and}{pop false}ifelse
{save true}{false}ifelse}{false}ifelse
12 dict begin
/FontInfo 9 dict dup begin
 /version (001.001) readonly def
 /FullName (Showboat) readonly def
 /FamilyName (Showboat) readonly def
 /Weight (Medium) readonly def
 /ItalicAngle 0 def
 /isFixedPitch false def
 /UnderlinePosition -106 def
 /UnderlineThickness 16 def
 /Notice (Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.) readonly def
end readonly def
/FontName /Showboat def
--stdin--</pre></div><p>Using this information, a possible name might be:</p><div class="informalexample"><pre class="screen">-type1-Showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1</pre></div><p>The components of our name are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Foundry</span></dt><dd><p>Lets just name all the new fonts
	    <code class="literal">type1</code>.</p></dd><dt><span class="term">Family</span></dt><dd><p>The name of the font.</p></dd><dt><span class="term">Weight</span></dt><dd><p>Normal, bold, medium, semibold, etc.  From the
	    <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a>
	    output above, it appears that this font has a weight of
	    <span class="emphasis"><em>medium</em></span>.</p></dd><dt><span class="term">Slant</span></dt><dd><p><span class="emphasis"><em>r</em></span>oman, <span class="emphasis"><em>i</em></span>talic, <span class="emphasis"><em>o</em></span>blique, etc.  Since the
	    <span class="emphasis"><em>ItalicAngle</em></span> is zero,
	    <span class="emphasis"><em>roman</em></span> will be used.</p></dd><dt><span class="term">Width</span></dt><dd><p>Normal, wide, condensed, extended, etc.  Until it can
	    be examined, the assumption will be
	    <span class="emphasis"><em>normal</em></span>.</p></dd><dt><span class="term">Additional style</span></dt><dd><p>Usually omitted, but this will indicate that the font
	    contains decorative capital letters.</p></dd><dt><span class="term">Spacing</span></dt><dd><p>proportional or monospaced.
	    <span class="emphasis"><em>Proportional</em></span> is used since
	    <span class="emphasis"><em>isFixedPitch</em></span> is false.</p></dd></dl></div><p>All of these names are arbitrary, but one should strive to
      be compatible with the existing conventions.  A font is
      referenced by name with possible wild cards by an
      <span class="application">X11</span> program, so the name chosen
      should make some sense.  One might begin by simply using

      </p><div class="informalexample"><pre class="screen">&#8230;-normal-r-normal-&#8230;-p-&#8230;</pre></div><p>

      as the name, and then use
      <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a>
      to examine it and adjust the name based on the appearance of the
      font.</p><p>So, to complete our example:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Make the font accessible to X11</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/Type1</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ln -s /usr/local/share/fonts/type1/showboat.pfb .</code></strong>

<em class="lineannotation"><span class="lineannotation">Edit fonts.dir and fonts.scale, adding the line describing the font
and incrementing the number of fonts which is found on the first line.</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ex fonts.dir
:1p
25
:1c
26
.
:$a
showboat.pfb -type1-showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1
.
:wq</code></strong>

<em class="lineannotation"><span class="lineannotation">fonts.scale seems to be identical to fonts.dir&#8230;</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cp fonts.dir fonts.scale</code></strong>

<em class="lineannotation"><span class="lineannotation">Tell X11 that things have changed</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong>

<em class="lineannotation"><span class="lineannotation">Examine the new font</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>xfontsel -pattern -type1-*</code></strong></pre></div><p>References: <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a>, <em class="citetitle">The X
	Windows System in a Nutshell</em>, <a class="link" href="http://www.ora.com/" target="_top">O'Reilly &amp;
	Associates</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-ghostscript"></a>6. Using Type 1 Fonts with Ghostscript</h2></div></div></div><p><span class="application">Ghostscript</span> references a font via
      its <code class="filename">Fontmap</code>.  This must be modified in
      a similar way to the <span class="application">X11</span>
      <code class="filename">fonts.dir</code>.
      <span class="application">Ghostscript</span> can use either the
      <code class="filename">.pfa</code> or the <code class="filename">.pfb</code>
      format fonts.  Using the font from the previous example, here is
      how to use it with
      <span class="application">Ghostscript</span>:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Put the font in Ghostscript's font directory</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/share/ghostscript/fonts</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ln -s /usr/local/share/fonts/type1/showboat.pfb .</code></strong>

<em class="lineannotation"><span class="lineannotation">Edit Fontmap so Ghostscript knows about the font</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/share/ghostscript/4.01</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ex Fontmap
:$a
/Showboat        (showboat.pfb) ; % From CICA /fonts/atm/showboat
.
:wq</code></strong>

<em class="lineannotation"><span class="lineannotation">Use Ghostscript to examine the font</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>gs prfont.ps</code></strong>
Aladdin Ghostscript 4.01 (1996-7-10)
Copyright (C) 1996 Aladdin Enterprises, Menlo Park, CA.  All rights
reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Loading Times-Roman font from /usr/local/share/ghostscript/fonts/tir_____.pfb...
 /1899520 581354 1300084 13826 0 done.
GS&gt;<strong class="userinput"><code>Showboat DoFont</code></strong>
Loading Showboat font from /usr/local/share/ghostscript/fonts/showboat.pfb...
 1939688 565415 1300084 16901 0 done.
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
GS&gt;<strong class="userinput"><code>quit</code></strong></pre></div><p>References: <code class="filename">fonts.txt</code> in the
      <span class="application">Ghostscript 4.01</span> distribution</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="type1-fonts-groff"></a>7. Using Type 1 Fonts with Groff</h2></div></div></div><p>Now that the new font can be used by both
      <span class="application">X11</span> and
      <span class="application">Ghostscript</span>, how can one use the new
      font with <span class="application">groff</span>? First of
      all, since we are dealing with type 1 <span class="trademark">PostScript</span>® fonts, the
      <span class="application">groff</span> device that is applicable is
      the <span class="emphasis"><em>ps</em></span>
      device.  A font file must be created for each font that
      <span class="application">groff</span> can use.  A
      <span class="application">groff</span> font name is just a file in
      <code class="filename">/usr/share/groff_font/devps</code>.  With our
      example, the font file could be
      <code class="filename">/usr/share/groff_font/devps/SHOWBOAT</code>.  The
      file must be created using tools provided by
      <span class="application">groff</span>.</p><p>The first tool is <code class="command">afmtodit</code>.  This is not
      normally installed, so it must be retrieved from the source
      distribution.  I found I had to change the first line of the
      file, so I did:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cp /usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.pl /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>ex /tmp/afmtodit.pl
:1c
#!/usr/bin/perl -P-
.
:wq</code></strong></pre></div><p>This tool will create the <span class="application">groff</span>
      font file from the metrics file (<code class="filename">.afm</code>
      suffix.) Continuing with our example:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Many .afm files are in Mac format&#8230; ^M delimited lines
We need to convert them to <span class="trademark">UNIX</span>® style ^J delimited lines</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat /usr/local/share/fonts/type1/showboat.afm |
	tr '\015' '\012' &gt;showboat.afm</code></strong>

<em class="lineannotation"><span class="lineannotation">Now create the groff font file</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>cd /usr/share/groff_font/devps</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>/tmp/afmtodit.pl -d DESC -e text.enc /tmp/showboat.afm generate/textmap SHOWBOAT</code></strong></pre></div><p>The font can now be referenced with the name
      SHOWBOAT.</p><p>If <span class="application">Ghostscript</span> is used to drive
      the printers on the system, then nothing more needs to be done.
      However, if true <span class="trademark">PostScript</span>® printers are used, then the font
      must be downloaded to the printer in order for the font to be
      used (unless the printer happens to have the showboat font built
      in or on an accessible font disk.) The final step is to create
      a downloadable font.  The <code class="command">pfbtops</code> tool is
      used to create the <code class="filename">.pfa</code> format of the font,
      and <code class="filename">download</code> is modified to
      reference the new font.  The <code class="filename">download</code>
      must reference the internal name of the font.  This can easily
      be determined from the groff font file as illustrated:</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Create the .pfa font file</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>pfbtops /usr/local/share/fonts/type1/showboat.pfb &gt;showboat.pfa</code></strong></pre></div><p>Of course, if <code class="filename">.pfa</code> is already
      available, just use a symbolic link to reference it.</p><div class="informalexample"><pre class="screen"><em class="lineannotation"><span class="lineannotation">Get the internal font name</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>fgrep internalname SHOWBOAT</code></strong>
internalname Showboat

<em class="lineannotation"><span class="lineannotation">Tell groff that the font must be downloaded</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ex download
:$a
Showboat      showboat.pfa
.
:wq</code></strong></pre></div><p>To test the font:</p><div class="informalexample"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cat &gt;example.t &lt;&lt;EOF
.sp 5
.ps 16
This is an example of the Showboat font:
.br
.ps 48
.vs (\n(.s+2)p
.sp
.ft SHOWBOAT
ABCDEFGHI
.br
JKLMNOPQR
.br
STUVWXYZ
.sp
.ps 16
.vs (\n(.s+2)p
.fp 5 SHOWBOAT
.ft R
To use it for the first letter of a paragraph, it will look like:
.sp 50p
\s(48\f5H\s0\fRere is the first sentence of a paragraph that uses the
showboat font as its first letter.
Additional vertical space must be used to allow room for the larger
letter.
EOF</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>groff -Tps example.t &gt;example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">To use ghostscript/ghostview</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>ghostview example.ps</code></strong>

<em class="lineannotation"><span class="lineannotation">To print it</span></em>
<code class="prompt">%</code> <strong class="userinput"><code>lpr -Ppostscript example.ps</code></strong></pre></div><p>References:
      <code class="filename">/usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.man</code>,
      <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff_font&amp;sektion=5&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff_font</span>(5)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff_char&amp;sektion=7&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff_char</span>(7)</span></a>, <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=pfbtops&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">pfbtops</span>(1)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="convert-truetype"></a>8. Converting TrueType Fonts to a groff/PostScript Format For
      groff</h2></div></div></div><p>This potentially requires a bit of work, simply because it
      depends on some utilities that are not installed as part of the
      base system.  They are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="command">ttf2pf</code></span></dt><dd><p>TrueType to PostScript conversion utilities.  This
	    allows conversion of a TrueType font to an ascii font
	    metric (<code class="filename">.afm</code>) file.</p><p>Currently available at <code class="uri"><a class="uri" href="http://sunsite.icm.edu.pl/pub/GUST/contrib/BachoTeX98/ttf2pf/" target="_top">http://sunsite.icm.edu.pl/pub/GUST/contrib/BachoTeX98/ttf2pf/</a></code>.
	    Note: These files are PostScript programs and must be
	    downloaded to disk by holding down <span class="keycap"><strong>Shift</strong></span>
	    when clicking on the link.  Otherwise, your browser may
	    try to launch <span class="application">ghostview</span> to view
	    them.</p><p>The files of interest are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">GS_TTF.PS</code></p></li><li class="listitem"><p><code class="filename">PF2AFM.PS</code></p></li><li class="listitem"><p><code class="filename">ttf2pf.ps</code></p></li></ul></div><p>The funny upper/lower case is due to their being
	    intended also for DOS shells.
	    <code class="filename">ttf2pf.ps</code> makes use of the others as
	    upper case, so any renaming must be consistent with this.
	    (Actually, <code class="filename">GS_TTF.PS</code> and
	    <code class="filename">PFS2AFM.PS</code> are supposedly part of the
	    <span class="application">Ghostscript</span> distribution, but
	    it is just as easy to use these as an isolated utility.
	    FreeBSD does not seem to include the latter.) You also may
	    want to have these installed to
	    <code class="filename">/usr/local/share/groff_font/devps</code>(?).</p></dd><dt><span class="term"><code class="command">afmtodit</code></span></dt><dd><p>Creates font files for use with
	    <span class="application">groff</span> from ascii font metrics
	    file.  This usually resides in the directory,
	    <code class="filename">/usr/src/contrib/groff/afmtodit</code>, and
	    requires some work to get going.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If you are paranoid about working in the
	      <code class="filename">/usr/src</code> tree, simply copy the
	      contents of the above directory to a work
	      location.</p></div><p>In the work area, you will need to make the utility.
	    Just type:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -f Makefile.sub afmtodit</code></strong></pre><p>You may also need to copy
	    <code class="filename">/usr/contrib/groff/devps/generate/textmap</code>
	    to
	    <code class="filename">/usr/share/groff_font/devps/generate</code>
	    if it does not already exist.</p></dd></dl></div><p>Once all these utilities are in place, you are ready to
      commence:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create <code class="filename">.afm</code> by typing:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -q -- ttf2pf.ps <em class="replaceable"><code>TTF_name</code></em> <em class="replaceable"><code>PS_font_name</code></em> <em class="replaceable"><code>AFM_name</code></em></code></strong></pre><p>Where, <em class="replaceable"><code>TTF_name</code></em> is your
	  TrueType font file, <em class="replaceable"><code>PS_font_name</code></em>
	  is the file name for <code class="filename">.pfa</code>,
	  <em class="replaceable"><code>AFM_name</code></em> is the name you wish for
	  <code class="filename">.afm</code>.  If you do not specify
	  output file names for the <code class="filename">.pfa</code> or
	  <code class="filename">.afm</code> files, then default names will be
	  generated from the TrueType font file name.</p><p>This also produces a <code class="filename">.pfa</code>, the
	  ascii PostScript font metrics file
	  (<code class="filename">.pfb</code> is for the binary form).  This
	  will not be needed, but could (I think) be useful for a
	  fontserver.</p><p>For example, to convert the 30f9 Barcode font using the
	  default file names, use the following command:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -- ttf2pf.ps 3of9.ttf</code></strong>
Aladdin Ghostscript 5.10 (1997-11-23)
Copyright (C) 1997 Aladdin Enterprises, Menlo Park, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Converting 3of9.ttf to 3of9.pfa and 3of9.afm.</pre><p>If you want the converted fonts to be stored in
	  <code class="filename">A.pfa</code> and <code class="filename">B.afm</code>,
	  then use this command:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>gs -dNODISPLAY -- ttf2pf.ps 3of9.ttf A B</code></strong>
Aladdin Ghostscript 5.10 (1997-11-23)
Copyright (C) 1997 Aladdin Enterprises, Menlo Park, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Converting 3of9.ttf to A.pfa and B.afm.</pre></li><li class="listitem"><p>Create the <span class="application">groff</span> PostScript
	  file:</p><p>Change directories to
	  <code class="filename">/usr/share/groff_font/devps</code> so as to
	  make the following command easier to execute.  You will
	  probably need root privileges for this.  (Or, if you are
	  paranoid about working there, make sure you reference the
	  files <code class="filename">DESC</code>,
	  <code class="filename">text.enc</code> and
	  <code class="filename">generate/textmap</code> as being in this
	  directory.)</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>afmtodit -d DESC -e text.enc file.afm generate/textmap <em class="replaceable"><code>PS_font_name</code></em></code></strong></pre><p>Where, <code class="filename">file.afm</code> is the
	  <em class="replaceable"><code>AFM_name</code></em> created by
	  <code class="command">ttf2pf.ps</code> above, and
	  <em class="replaceable"><code>PS_font_name</code></em> is the font name
	  used from that command, as well as the name that
	  <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff</span>(1)</span></a> will use for references to this font.  For
	  example, assuming you used the first
	  <code class="command">tiff2pf.ps</code> above, then the 3of9
	  Barcode font can be created using the command:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>afmtodit -d DESC -e text.enc 3of9.afm generate/textmap 3of9</code></strong></pre><p>Ensure that the resulting
	  <em class="replaceable"><code>PS_font_name</code></em> file (e.g.,
	  <code class="filename">3of9</code> in the example above) is located
	  in the directory
	  <code class="filename">/usr/share/groff_font/devps</code> by copying
	  or moving it there.</p><p>Note that if <code class="filename">ttf2pf.ps</code> assigns a
	  font name using the one it finds in the TrueType font file
	  and you want to use a different name, you must edit the
	  <code class="filename">.afm</code> prior to running
	  <code class="command">afmtodit</code>.  This name must also match the
	  one used in the Fontmap file if you wish to pipe
	  <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=groff&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">groff</span>(1)</span></a> into <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=gs&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">gs</span>(1)</span></a>.</p></li></ol></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="truetype-for-other-programs"></a>9. Can TrueType Fonts be Used with Other Programs?</h2></div></div></div><p>The TrueType font format is used by Windows, Windows 95, and
      Mac's.  It is quite popular and there are a great number of
      fonts available in this format.</p><p>Unfortunately, there are few applications that I am aware of
      that can use this format: <span class="application">Ghostscript</span>
      and <span class="application">Povray</span> come to mind.
      <span class="application">Ghostscript's</span> support, according to
      the documentation, is rudimentary and the results are likely to
      be inferior to type 1 fonts.  <span class="application">Povray</span>
      version 3 also has the ability to use TrueType fonts, but I
      rather doubt many people will be creating documents as a series
      of raytraced pages :-).</p><p>This rather dismal situation may soon change.  The <a class="link" href="http://www.freetype.org/" target="_top">FreeType Project</a>
      is currently developing a useful set of FreeType tools:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The <code class="command">xfsft</code> font server for
	  <span class="application">X11</span> can serve TrueType fonts in
	  addition to regular fonts.  Though currently in beta, it is
	  said to be quite usable.  See <a class="link" href="http://www.dcs.ed.ac.uk/home/jec/programs/xfsft/" target="_top">Juliusz
	    Chroboczek's page</a> for further information.  Porting
	  instructions for FreeBSD can be found at <a class="link" href="http://math.missouri.edu/~stephen/software/" target="_top">Stephen
	    Montgomery's software page</a>.</p></li><li class="listitem"><p><span class="application">xfstt</span> is another font server
	  for <span class="application">X11</span>, available under <code class="uri"><a class="uri" href="ftp://sunsite.unc.edu/pub/Linux/X11/fonts/" target="_top">ftp://sunsite.unc.edu/pub/Linux/X11/fonts/</a></code>.</p></li><li class="listitem"><p>A program called <code class="command">ttf2bdf</code> can produce
	  BDF files suitable for use in an X environment from TrueType
	  files.  Linux binaries are said to be available from <code class="uri"><a class="uri" href="ftp://crl.nmsu.edu/CLR/multiling/General/" target="_top">ftp://crl.nmsu.edu/CLR/multiling/General/</a></code>.</p></li><li class="listitem"><p>and others &#8230;</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="obtaining-additional-fonts"></a>10. Where Can Additional Fonts be Obtained?</h2></div></div></div><p>Many fonts are available on the Internet.  They are either
      entirely free, or are share-ware.  In addition many fonts are
      available in the <code class="filename">x11-fonts/</code> category in the
      ports collection</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="additional-questions"></a>11. Additional Questions</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>What use are the <code class="filename">.pfm</code> files?</p></li><li class="listitem"><p>Can one generate the <code class="filename">.afm</code> from
	  a <code class="filename">.pfa</code> or
	  <code class="filename">.pfb</code>?</p></li><li class="listitem"><p>How to generate the <span class="application">groff</span>
	  character mapping files for PostScript fonts with
	  non-standard character names?</p></li><li class="listitem"><p>Can xditview and devX?? devices be set up to access all
	  the new fonts?</p></li><li class="listitem"><p>It would be good to have examples of using TrueType
	  fonts with <span class="application">Povray</span> and
	  <span class="application">Ghostscript</span>.</p></li></ul></div></div></div></body></html>