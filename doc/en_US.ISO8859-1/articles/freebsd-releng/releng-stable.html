<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6. Release from stable/</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Release Engineering" /><link rel="up" href="index.html" title="FreeBSD Release Engineering" /><link rel="prev" href="releng-head.html" title="5. Release from head/" /><link rel="next" href="releng-building.html" title="7. Building FreeBSD Installation Media" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Release from <code class="literal">stable/</code></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="releng-head.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="releng-building.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="releng-stable"></a>6. Release from <code class="literal">stable/</code></h2></div></div></div><p>This section describes the general procedures of the FreeBSD
    release cycle from an extablished <code class="literal">stable/</code> branch.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="releng-stable-slush"></a>6.1. FreeBSD <code class="literal">stable</code> Branch Code Slush</h3></div></div></div><p>In preparation for the code freeze on
      a <code class="literal">stable</code> branch, several files need to be
      updated to reflect the release cycle is officially in
      progress.  These files are all relative to the top-most level of
      the stable branch:</p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>File to Edit</th><th>What to Change</th></tr></thead><tbody><tr><td><code class="filename">sys/conf/newvers.sh</code></td><td>Update the <code class="varname">BRANCH</code> value to
	      reflect <code class="literal">PRERELEASE</code></td></tr><tr><td><code class="filename">Makefile.inc1</code></td><td>Update <code class="varname">TARGET_TRIPLE</code></td></tr><tr><td><code class="filename">lib/clang/llvm.build.mk</code></td><td>Update <code class="varname">OS_VERSION</code></td></tr><tr><td><code class="filename">Makefile.libcompat</code></td><td>Update <code class="literal">LIB32CPUFLAGS</code></td></tr><tr><td><code class="filename">gnu/usr.bin/groff/tmac/mdoc.local.in</code></td><td>Add a new <code class="literal">.ds</code> entry for the FreeBSD
	      version, and update
	      <code class="varname">doc-default-operating-system</code>
	      (FreeBSD 11.x and earlier only)</td></tr></tbody></table></div><p>In the <code class="literal">doc</code> repository, also update
      <code class="filename">head/en_US.ISO8859-1/htdocs/releases/<em class="replaceable"><code>12.0</code></em>R/Makefile.hardware</code>,
      switching the value of <code class="varname">_BRANCH</code> to
      <code class="literal">BETA<em class="replaceable"><code>X</code></em></code>,
      <code class="literal">RC<em class="replaceable"><code>X</code></em></code>, or
      <code class="literal">RELEASE</code>, respectively.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="releng-stable-builds-beta"></a>6.2. FreeBSD <code class="literal">BETA</code> Builds</h3></div></div></div><p>Following the code slush, the next phase of the release
      cycle is the code freeze.  This is the point at which all
      commits to the stable branch require explicit approval from
      the FreeBSD Release Engineering Team.  This is enforced by pre-commit hooks in the
      Subversion repository by editing
      <code class="filename">base/svnadmin/conf/approvers</code> to include
      a regular expression matching the <code class="literal">stable/<em class="replaceable"><code>12</code></em>/</code> branch for
      the release:</p><pre class="programlisting">^/<code class="literal">stable/<em class="replaceable"><code>12</code></em>/</code>	re
^/<code class="literal">releng/<em class="replaceable"><code>12.0</code></em>/</code>	re</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">There are two general exceptions to requiring commit
	approval during the release cycle.  The first is any change
	that needs to be committed by the Release Engineer in order
	to proceed with the day-to-day workflow of the release cycle,
	the other is security fixes that may occur during the release
	cycle.</p></div><p>Once the code freeze is in effect, the next build from the
      branch is labeled <code class="literal">BETA1</code>.  This is done by
      updating the <code class="varname">BRANCH</code> value in
      <code class="filename">sys/conf/newvers.sh</code> from
      <code class="literal">PRERELEASE</code> to
      <code class="literal">BETA1</code>.</p><p>Once this is done, the first set of <code class="literal">BETA</code>
      builds are started.  Subsequent <code class="literal">BETA</code> builds
      do not require updates to any files other than
      <code class="filename">sys/conf/newvers.sh</code>, incrementing the
      <code class="literal">BETA</code> build number.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="releng-stable-branching"></a>6.3. Creating the <code class="literal">releng/<em class="replaceable"><code>12.0</code></em>/</code> Branch</h3></div></div></div><p>When the first <code class="literal">RC</code> (Release Candidate)
      build is ready to begin, the <code class="literal">releng/</code> branch is created.
      This is a multi-step process that must be done in a specific
      order, in order to avoid anomalies such as overlaps with
      <code class="varname">__FreeBSD_version</code> values, for example.  The
      paths listed below are relative to the repository root.  The
      order of commits and what to change are:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svn cp ^/<code class="literal">stable/<em class="replaceable"><code>12</code></em>/</code> <code class="literal">releng/<em class="replaceable"><code>12.0</code></em>/</code></code></strong></pre><div class="informaltable"><table class="informaltable" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>File to Edit</th><th>What to Change</th></tr></thead><tbody><tr><td><code class="filename">releng/<em class="replaceable"><code>12.0</code></em>/sys/conf/newvers.sh</code></td><td>Change
	      <code class="literal">BETA<em class="replaceable"><code>X</code></em></code>
	      to <code class="literal">RC1</code></td></tr><tr><td><code class="filename">releng/<em class="replaceable"><code>12.0</code></em>/sys/sys/param.h</code></td><td>Update <code class="varname">__FreeBSD_version</code></td></tr><tr><td><code class="filename">releng/<em class="replaceable"><code>12.0</code></em>/etc/pkg/FreeBSD.conf</code></td><td>Replace <code class="literal">latest</code> with
	      <code class="literal">quarterly</code> as the default package
	      repository location</td></tr><tr><td><code class="filename">releng/<em class="replaceable"><code>12.0</code></em>/release/pkg_repos/release-dvd.conf</code></td><td>Replace <code class="literal">latest</code> with
	      <code class="literal">quarterly</code> as the default package
	      repository location</td></tr><tr><td><code class="filename">stable/<em class="replaceable"><code>12</code></em>/sys/conf/newvers.sh</code></td><td>Update
	      <code class="literal">BETA<em class="replaceable"><code>X</code></em></code> with
	      <code class="literal">PRERELEASE</code></td></tr><tr><td><code class="filename">stable/<em class="replaceable"><code>12</code></em>/sys/sys/param.h</code></td><td>Update <code class="varname">__FreeBSD_version</code></td></tr><tr><td><code class="filename">svnadmin/conf/approvers</code></td><td>Add a new approvers line for the releng
	      branch as was done for the stable branch</td></tr></tbody></table></div><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svn propdel -R svn:mergeinfo <code class="literal">releng/<em class="replaceable"><code>12.0</code></em>/</code></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn commit <code class="literal">releng/<em class="replaceable"><code>12.0</code></em>/</code></code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>svn commit <code class="literal">stable/<em class="replaceable"><code>12</code></em>/</code></code></strong></pre><p>Now that two new <code class="varname">__FreeBSD_version</code> values
      exist, also update
      <code class="filename">head/en_US.ISO8859-1/books/porters-handbook/versions/chapter.xml</code>
      in the Documentation Project repository.</p><p>After the first <code class="literal">RC</code> build has completed
      and tested, the <code class="literal">stable/</code> branch can be
      <span class="quote">&#8220;<span class="quote">thawed</span>&#8221;</span> by removing (or commenting) the
      ^/<code class="literal">stable/<em class="replaceable"><code>12</code></em>/</code> entry in
      <code class="filename">svnadmin/conf/approvers</code>.</p><p>Following the availability of the first
      <code class="literal">RC</code>, FreeBSD Bugmeister Team should be emailed to
      add the new FreeBSD <code class="literal">-RELEASE</code> to the
      <code class="literal">versions</code> available in the drop-down menu
      shown in the bug tracker.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="releng-head.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="releng-building.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. Release from <code class="literal">head/</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. Building FreeBSD Installation Media</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>