<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>2. How to Install</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Filtering Bridges" /><link rel="up" href="index.html" title="Filtering Bridges" /><link rel="prev" href="index.html" title="Filtering Bridges" /><link rel="next" href="filtering-bridges-finalprep.html" title="3. Final Preparation" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. How to Install</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="filtering-bridges-finalprep.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="filtering-bridges-how"></a>2. How to Install</h2></div></div></div><p>Adding bridge functionalities to a FreeBSD system is not difficult.
      Since 4.5 release it is possible to load such functionalities as modules
      instead of having to rebuild the kernel, simplifying the procedure a
      great deal. In the following subsections I will explain both
      installation ways.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Do not</em></span> follow both instructions: a procedure
	<span class="emphasis"><em>excludes</em></span> the other one.  Select the best choice
	according to your needs and abilities.</p></div><p>Before going on, be sure to have at least two Ethernet cards that
      support the promiscuous mode for both reception and transmission, since
      they must be able to send Ethernet packets with any address, not just
      their own. Moreover, to have a good throughput, the cards should be PCI
      bus mastering cards. The best choices are still the Intel <span class="trademark">EtherExpress</span>&#8482;
      Pro, followed by the <span class="trademark">3Com</span>® 3c9xx series. To simplify the firewall
      configuration it may be useful to have two cards of different
      manufacturers (using different drivers) in order to distinguish clearly
      which interface is connected to the router and which to the inner
      network.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filtering-bridges-kernel"></a>2.1. Kernel Configuration</h3></div></div></div><p>So you have decided to use the older but well tested installation
	method. To begin, you have to add the following rows to your kernel
	configuration file:</p><pre class="programlisting">options BRIDGE
options IPFIREWALL
options IPFIREWALL_VERBOSE</pre><p>The first line is to compile the bridge support, the second one is
	the firewall and the third one is the logging functions of the
	firewall.</p><p>Now it is necessary to build and install the new kernel.  You may
	find detailed instructions in the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/kernelconfig-building.html" target="_top">Building
	and Installing a Custom Kernel</a> section of the FreeBSD
	Handbook.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filtering-bridges-modules"></a>2.2. Modules Loading</h3></div></div></div><p>If you have chosen to use the new and simpler installation
	method, the only thing to do now is add the following row to
        <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">bridge_load="YES"</pre><p>In this way, during the system startup, the
	<code class="filename">bridge.ko</code> module will be loaded together with the
	kernel. It is not required to add a similar row for the
	<code class="filename">ipfw.ko</code> module, since it will be loaded
	automatically after the execution of the steps in the following
	section.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="filtering-bridges-finalprep.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Filtering Bridges </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Final Preparation</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>