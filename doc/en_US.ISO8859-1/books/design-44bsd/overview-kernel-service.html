<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>2.3. Kernel Services</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="The Design and Implementation of the 4.4BSD Operating System" /><link rel="up" href="overview.html" title="Chapter 2. Design Overview of 4.4BSD" /><link rel="prev" href="overview-kernel-organization.html" title="2.2. Kernel Organization" /><link rel="next" href="overview-process-management.html" title="2.4. Process Management" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.3. Kernel Services</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="overview-kernel-organization.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Design Overview of 4.4BSD</th><td width="20%" align="right"> <a accesskey="n" href="overview-process-management.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="overview-kernel-service"></a>2.3. Kernel Services</h2></div></div></div><p>The boundary between the kernel- and user-level code is enforced by
	hardware-protection facilities provided by the underlying hardware.
	The kernel operates in a separate address space that is inaccessible to
	user processes.
	Privileged operations -- such as starting I/O
	and halting the central processing unit
	(CPU) --
	are available to only the kernel.
	Applications request services from the kernel with
	<span class="emphasis"><em>system calls</em></span>.
	System calls are used to cause the kernel to execute complicated
	operations, such as writing data to secondary storage,
	and simple operations, such as returning the current time of day.
	All system calls appear
	<span class="emphasis"><em>synchronous</em></span>
	to applications:
	The application does not run while the kernel does the actions associated
	with a system call.
	The kernel may finish some operations associated with a system call
	after it has returned.
	For example, a
	<span class="emphasis"><em>write</em></span>
	system call will copy the data to be written
	from the user process to a kernel buffer while the process waits,
	but will usually return from the system call
	before the kernel buffer is written to the disk.</p><p>A system call usually is implemented as a hardware trap that changes the
	CPU's
	execution mode and the current address-space mapping.
	Parameters supplied by users in system calls are validated by the kernel
	before being used.
	Such checking ensures the integrity of the system.
	All parameters passed into the kernel are copied into the
	kernel's address space,
	to ensure that validated parameters are not changed
	as a side effect of the system call.
	System-call results are returned by the kernel,
	either in hardware registers or by their values
	being copied to user-specified memory addresses.
	Like parameters passed into the kernel,
	addresses used for
	the return of results must be validated to ensure that they are
	part of an application's address space.
	If the kernel encounters an error while processing a system call,
	it returns an error code to the user.
	For the
	C programming language, this error code
	is stored in the global variable
	<span class="emphasis"><em>errno</em></span>,
	and the function that executed the system call returns the value -1.</p><p>User applications and the kernel operate
	independently of each other.
	4.4BSD does not store I/O control blocks or other
	operating-system-related
	data structures in the application's address space.
	Each user-level application is provided an independent address space in
	which it executes.
	The kernel makes most state changes,
	such as suspending a process while another is running,
	invisible to the processes involved.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="overview-kernel-organization.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="overview-process-management.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.2. Kernel Organization </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.4. Process Management</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>