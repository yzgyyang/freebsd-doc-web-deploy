<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>2.8. Filestores</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="The Design and Implementation of the 4.4BSD Operating System" /><link rel="up" href="overview.html" title="Chapter 2. Design Overview of 4.4BSD" /><link rel="prev" href="overview-filesystem.html" title="2.7. Filesystems" /><link rel="next" href="overview-nfs.html" title="2.9. Network Filesystem" /><link rel="copyright" href="legalnotice.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.8. Filestores</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="overview-filesystem.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Design Overview of 4.4BSD</th><td width="20%" align="right"> <a accesskey="n" href="overview-nfs.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="overview-filestore"></a>2.8. Filestores</h2></div></div></div><p>The operations defined for local filesystems are divided into two parts.
    Common to all local filesystems are hierarchical naming,
    locking, quotas, attribute management, and protection.
    These features are independent of how the data will be stored.
    4.4BSD has a single implementation to provide these semantics.</p><p>The other part of the local filesystem is the organization
    and management of the data on the storage media.
    Laying out the contents of files on the storage media is
    the responsibility of the filestore.
    4.4BSD supports three different filestore layouts:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The traditional Berkeley Fast Filesystem</p></li><li class="listitem"><p>The log-structured filesystem,
      based on the Sprite operating-system design
      <a class="xref" href="overview.html#biblio-rosenblum">[<abbr class="abbrev">Rosenblum &amp; Ousterhout, 1992</abbr>]</a></p></li><li class="listitem"><p>A memory-based filesystem</p></li></ul></div><p>Although the organizations of these filestores are completely different,
    these differences are indistinguishable
    to the processes using the filestores.</p><p>The Fast Filesystem organizes data into cylinder groups.
    Files that are likely to be accessed together,
    based on their locations in the filesystem hierarchy,
    are stored in the same cylinder group.
    Files that are not expected to accessed together are moved into
    different cylinder groups.
    Thus, files written at the same time may be placed far apart on the
    disk.</p><p>The log-structured filesystem organizes data as a log.
    All data being written at any point in time are gathered together,
    and are written at the same disk location.
    Data are never overwritten;
    instead, a new copy of the file is written that replaces the old one.
    The old files are reclaimed by a garbage-collection process that runs
    when the filesystem becomes full and additional free space is needed.</p><p>The memory-based filesystem is designed to store data in virtual memory.
    It is used for filesystems that need to support
    fast but temporary data, such as
    <code class="filename">/tmp</code>.
    The goal of the memory-based filesystem is to keep
    the storage packed as compactly as possible to minimize
    the usage of virtual-memory resources.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="overview-filesystem.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="overview-nfs.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.7. Filesystems </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2.9. Network Filesystem</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>