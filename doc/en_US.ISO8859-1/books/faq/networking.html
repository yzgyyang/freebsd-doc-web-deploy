<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Chapter 12. Networking</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Frequently Asked Questions for FreeBSD 11.X and 12.X" /><link rel="up" href="index.html" title="Frequently Asked Questions for FreeBSD 11.X and 12.X" /><link rel="prev" href="x.html" title="Chapter 11. The X Window System and Virtual Consoles" /><link rel="next" href="security.html" title="Chapter 13. Security" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 12. Networking</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="security.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="networking"></a>Chapter 12. Networking</h1></div></div></div><div class="qandaset"><a id="idp51918968"></a><dl><dt>12.1. <a href="networking.html#idp51919224">Where can I get information on &#8220;diskless
	      booting&#8221;?</a></dt><dt>12.2. <a href="networking.html#idp51922424">Can a FreeBSD box be used as a dedicated network
	    router?</a></dt><dt>12.3. <a href="networking.html#idp51929592">Does FreeBSD support NAT or Masquerading?</a></dt><dt>12.4. <a href="networking.html#idp51932664">How can I set up Ethernet aliases?</a></dt><dt>12.5. <a href="networking.html#idp51939704">Why can I not NFS-mount from a Linux® box?</a></dt><dt>12.6. <a href="networking.html#idp51943672">Why does mountd keep telling me it
	    can't change attributes and that I
	    have a bad exports list on my FreeBSD
	    NFS server?</a></dt><dt>12.7. <a href="networking.html#idp51965432">How do I enable IP multicast support?</a></dt><dt>12.8. <a href="networking.html#idp51968632">Why do I have to use the FQDN for hosts on my
	    site?</a></dt><dt>12.9. <a href="networking.html#idp51971192">Why do I get an error, Permission
	      denied, for all networking
	    operations?</a></dt><dt>12.10. <a href="networking.html#idp52006648">Why is my ipfw &#8220;fwd&#8221;
	    rule to redirect a service to another machine not
	    working?</a></dt><dt>12.11. <a href="networking.html#idp52019832">How can I redirect service requests from one machine
	    to another?</a></dt><dt>12.12. <a href="networking.html#idp52025592">Where can I get a bandwidth management tool?</a></dt><dt>12.13. <a href="networking.html#idp52047352">Why do I get /dev/bpf0: device not
	      configured?</a></dt><dt>12.14. <a href="networking.html#idp52051064">How do I mount a disk from a Windows® machine that is
	    on my network, like smbmount in Linux®?</a></dt><dt>12.15. <a href="networking.html#idp52055288">What are these messages about: Limiting
	      icmp/open port/closed port response in my
	    log files?</a></dt><dt>12.16. <a href="networking.html#idp52072952">What are these arp: unknown hardware
	      address format error messages?</a></dt><dt>12.17. <a href="networking.html#idp52087672">Why do I keep seeing messages like:
	    192.168.0.10 is on
	      fxp1 but got reply from 00:15:17:67:cf:82 on
	      rl0, and how do I disable it?</a></dt><dt>12.18. <a href="networking.html#idp52090872">How do I compile an IPv6 only kernel?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp51919224"></a><a id="diskless-booting"></a><p><strong>12.1.</strong></p></td><td align="left" valign="top"><p>Where can I get information on <span class="quote">&#8220;<span class="quote">diskless
	      booting</span>&#8221;</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><span class="quote">&#8220;<span class="quote">Diskless booting</span>&#8221;</span> means that the FreeBSD
	    box is booted over a network, and reads the necessary
	    files from a server instead of its hard disk.  For full
	    details, see <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/network-diskless.html" target="_top">the
	      Handbook entry on diskless booting</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51922424"></a><a id="router"></a><p><strong>12.2.</strong></p></td><td align="left" valign="top"><p>Can a FreeBSD box be used as a dedicated network
	    router?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes.  Refer to the Handbook entry on <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/advanced-networking.html" target="_top">advanced
	      networking</a>, specifically the section on <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/network-routing.html" target="_top">routing
	      and gateways</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51929592"></a><a id="natd"></a><p><strong>12.3.</strong></p></td><td align="left" valign="top"><p>Does FreeBSD support NAT or Masquerading?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes.  For instructions on how to use NAT over a PPP
	    connection, see the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/userppp.html" target="_top">Handbook
	      entry on PPP</a>.  To use NAT over
	    some other sort of network connection, look at the
	    <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html#network-natd" target="_top">natd</a>
	    section of the Handbook.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51932664"></a><a id="ethernet-aliases"></a><p><strong>12.4.</strong></p></td><td align="left" valign="top"><p>How can I set up Ethernet aliases?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>If the alias is on the same subnet as an address
	    already configured on the interface, add
	    <code class="literal">netmask 0xffffffff</code> to this
	    command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>ed0</code></em> alias <em class="replaceable"><code>192.0.2.2 </code></em>netmask 0xffffffff</code></strong></pre><p>Otherwise, specify the network address and
	    netmask as usual:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig <em class="replaceable"><code>ed0</code></em> alias <em class="replaceable"><code>172.16.141.5</code></em> netmask 0xffffff00</code></strong></pre><p>More information can be found in the FreeBSD <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/configtuning-virtual-hosts.html" target="_top">Handbook</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51939704"></a><a id="nfs-linux"></a><p><strong>12.5.</strong></p></td><td align="left" valign="top"><p>Why can I not NFS-mount from a <span class="trademark">Linux</span>® box?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Some versions of the <span class="trademark">Linux</span>® NFS code only accept
	    mount requests from a privileged port; try to issue the
	    following command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -o -P linuxbox:/blah /mnt</code></strong></pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51943672"></a><a id="exports-errors"></a><p><strong>12.6.</strong></p></td><td align="left" valign="top"><p>Why does <code class="command">mountd</code> keep telling me it
	    <span class="errorname">can't change attributes</span> and that I
	    have a <span class="errorname">bad exports list</span> on my FreeBSD
	    NFS server?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The most frequent problem is not understanding the
	    correct format of <code class="filename">/etc/exports</code>.
	    Review <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a> and the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/network-nfs.html" target="_top">NFS</a>
	    entry in the Handbook, especially the section on <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/network-nfs.html#configuring-nfs" target="_top">configuring
	      NFS</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51965432"></a><a id="ip-multicast"></a><p><strong>12.7.</strong></p></td><td align="left" valign="top"><p>How do I enable IP multicast support?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Install the <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/net/mrouted/pkg-descr">net/mrouted</a> package
	    or port and add
	    <code class="literal">mrouted_enable="YES"</code> to
	    <code class="filename">/etc/rc.conf</code> start this service at
	    boot time.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51968632"></a><a id="fqdn-hosts"></a><p><strong>12.8.</strong></p></td><td align="left" valign="top"><p>Why do I have to use the FQDN for hosts on my
	    site?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See the answer in the FreeBSD <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/mail-trouble.html" target="_top">Handbook</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp51971192"></a><a id="network-permission-denied"></a><p><strong>12.9.</strong></p></td><td align="left" valign="top"><p>Why do I get an error, <span class="errorname">Permission
	      denied</span>, for all networking
	    operations?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>If the kernel is compiled with the
	    <code class="literal">IPFIREWALL</code> option, be aware
	    that the default policy is to deny all packets that are
	    not explicitly allowed.</p><p>If the firewall is unintentionally misconfigured,
	    restore network operability by
	    typing the following as <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ipfw add 65534 allow all from any to any</code></strong></pre><p>Consider setting
	    <code class="literal">firewall_type="open"</code> in
	    <code class="filename">/etc/rc.conf</code>.</p><p>For further information on configuring this
	    firewall, see the <a class="link" href="../../../../doc/en_US.ISO8859-1/books/handbook/firewalls-ipfw.html" target="_top">Handbook
	      chapter</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52006648"></a><a id="ipfw-fwd"></a><p><strong>12.10.</strong></p></td><td align="left" valign="top"><p>Why is my <code class="command">ipfw</code> <span class="quote">&#8220;<span class="quote">fwd</span>&#8221;</span>
	    rule to redirect a service to another machine not
	    working?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Possibly because network address translation (NAT) is
	    needed instead of just forwarding packets.  A
	    <span class="quote">&#8220;<span class="quote">fwd</span>&#8221;</span> rule only forwards packets, it does not
	    actually change the data inside the packet.  Consider this
	    rule:</p><pre class="screen">01000 fwd <em class="replaceable"><code>10.0.0.1</code></em> from any to <em class="replaceable"><code>foo 21</code></em></pre><p>When a packet with a destination address of
	    <em class="replaceable"><code>foo</code></em> arrives at the machine with
	    this rule, the packet is forwarded to
	    <em class="replaceable"><code>10.0.0.1</code></em>, but it still has the
	    destination address of <em class="replaceable"><code>foo</code></em>.
	    The destination address of the packet is
	    not changed to
	    <em class="replaceable"><code>10.0.0.1</code></em>.  Most machines would
	    probably drop a packet that they receive with a
	    destination address that is not their own.  Therefore,
	    using a <span class="quote">&#8220;<span class="quote">fwd</span>&#8221;</span> rule does not often work the
	    way the user expects.  This behavior is a feature and not
	    a bug.</p><p>See the <a class="link" href="networking.html#service-redirect" title="12.11."><acronym class="acronym">FAQ</acronym> about
	      redirecting services</a>, the <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> manual, or
	    one of the several port redirecting utilities in the <a class="link" href="../../../../ports/index.html" target="_top">Ports
	      Collection</a> for a correct way to do this.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52019832"></a><a id="service-redirect"></a><p><strong>12.11.</strong></p></td><td align="left" valign="top"><p>How can I redirect service requests from one machine
	    to another?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FTP and other service requests can be redirected with
	    the <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/sysutils/socket/pkg-descr">sysutils/socket</a> package or port.
	    Replace the entry for the service in
	    <code class="filename">/etc/inetd.conf</code> to call
	    <code class="command">socket</code>, as seen in this example for
	    <span class="application">ftpd</span>:</p><pre class="programlisting">ftp stream tcp nowait nobody /usr/local/bin/socket socket <em class="replaceable"><code>ftp.example.com</code></em> <em class="replaceable"><code>ftp</code></em></pre><p>where <em class="replaceable"><code>ftp.example.com</code></em> and
	    <em class="replaceable"><code>ftp</code></em> are the host and port to
	    redirect to, respectively.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52025592"></a><a id="bandwidth-mgr-tool"></a><p><strong>12.12.</strong></p></td><td align="left" valign="top"><p>Where can I get a bandwidth management tool?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There are three bandwidth management tools available
	    for FreeBSD.  <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">dummynet</span>(4)</span></a> is integrated into FreeBSD as
	    part of <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(4)</span></a>.  <a class="link" href="http://www.sonycsl.co.jp/person/kjc/programs.html" target="_top">ALTQ</a>
	    has been integrated into FreeBSD as part of <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=pf&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">pf</span>(4)</span></a>.
	    Bandwidth Manager from <a class="link" href="http://www.etinc.com/" target="_top">Emerging
	      Technologies</a> is a commercial product.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52047352"></a><a id="bpf-not-configured"></a><p><strong>12.13.</strong></p></td><td align="left" valign="top"><p>Why do I get <span class="errorname">/dev/bpf0: device not
	      configured</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The running application requires the Berkeley
	    Packet Filter (<a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a>), but it was removed from a
	    custom kernel.  Add this to the kernel config file and
	    build a new kernel:</p><pre class="programlisting">device bpf        # Berkeley Packet Filter</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52051064"></a><a id="mount-smb-share"></a><p><strong>12.14.</strong></p></td><td align="left" valign="top"><p>How do I mount a disk from a <span class="trademark">Windows</span>® machine that is
	    on my network, like smbmount in <span class="trademark">Linux</span>®?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Use the <span class="application">SMBFS</span> toolset.  It
	    includes a set of kernel modifications and a set of
	    userland programs.  The programs and information are
	    available as <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=mount_smbfs&amp;sektion=8&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">mount_smbfs</span>(8)</span></a> in the base
	    system.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52055288"></a><a id="icmp-response-bw-limit"></a><p><strong>12.15.</strong></p></td><td align="left" valign="top"><p>What are these messages about: <span class="errorname">Limiting
	      icmp/open port/closed port response</span> in my
	    log files?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This kernel message indicates that some activity is
	    provoking it to send a large amount of ICMP or TCP reset
	    (RST) responses.  ICMP responses are
	    often generated as a result of attempted connections to
	    unused UDP ports.  TCP resets are generated as a result of
	    attempted connections to unopened TCP ports.  Among
	    others, these are the kinds of activities which may cause
	    these messages:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Brute-force denial of service (DoS) attacks (as
		opposed to single-packet attacks which exploit a
		specific vulnerability).</p></li><li class="listitem"><p>Port scans which attempt to connect to a large
		number of ports (as opposed to only trying a few
		well-known ports).</p></li></ul></div><p>The first number in the message indicates how many
	    packets the kernel would have sent if the limit was not in
	    place, and the second indicates the limit.  This limit
	    is controlled using
	    <code class="varname">net.inet.icmp.icmplim</code>.  This example
	    sets the limit to <code class="literal">300</code>
	    packets per second:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.icmp.icmplim=300</code></strong></pre><p>To disable these messages
	    without disabling response
	    limiting, use
	    <code class="varname">net.inet.icmp.icmplim_output</code>
	    to disable the output:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.icmp.icmplim_output=0</code></strong></pre><p>Finally, to disable response limiting completely,
	    set <code class="varname">net.inet.icmp.icmplim</code> to
	    <code class="literal">0</code>.  Disabling response limiting is
	    discouraged for the reasons listed above.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52072952"></a><a id="unknown-hw-addr-format"></a><p><strong>12.16.</strong></p></td><td align="left" valign="top"><p>What are these <span class="errorname">arp: unknown hardware
	      address format</span> error messages?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This means that some device on the local Ethernet is
	    using a MAC address in a format that FreeBSD does not
	    recognize.  This is probably caused by someone
	    experimenting with an Ethernet card somewhere else on the
	    network.  This is most commonly seen on cable modem
	    networks.  It is harmless, and should not affect the
	    performance of the FreeBSD system.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52087672"></a><a id="arp-wrong-iface"></a><p><strong>12.17.</strong></p></td><td align="left" valign="top"><p>Why do I keep seeing messages like:
	    <span class="errorname">192.168.0.10 is on
	      fxp1 but got reply from 00:15:17:67:cf:82 on
	      rl0</span>, and how do I disable it?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Because a packet is coming from outside the network
	    unexpectedly.  To disable them, set
	    <code class="varname">net.link.ether.inet.log_arp_wrong_iface</code>
	    to <code class="literal">0</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp52090872"></a><a id="ipv6-only"></a><p><strong>12.18.</strong></p></td><td align="left" valign="top"><p>How do I compile an IPv6 only kernel?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Configure your kernel with these settings:

	    </p><pre class="screen">include GENERIC
ident GENERIC-IPV6ONLY
makeoptions MKMODULESENV+="WITHOUT_INET_SUPPORT="
nooptions INET
nodevice gre</pre></td></tr></tbody></table></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="security.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 11. The X Window System and Virtual Consoles </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 13. Security</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>