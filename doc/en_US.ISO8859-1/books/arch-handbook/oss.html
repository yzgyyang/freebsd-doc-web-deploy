<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Chapter 15. Sound Subsystem</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Architecture Handbook" /><link rel="up" href="devicedrivers.html" title="Part II. Device Drivers" /><link rel="prev" href="newbus-api.html" title="14.3. Newbus API" /><link rel="next" href="oss-files.html" title="15.2. Files" /><link rel="copyright" href="trademarks.html" title="Legal Notice" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 15. Sound Subsystem</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="newbus-api.html">Prev</a> </td><th width="60%" align="center">Part II. Device Drivers</th><td width="20%" align="right"> <a accesskey="n" href="oss-files.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oss"></a>Chapter 15. Sound Subsystem</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jean-Francois</span> <span class="surname">Dockes</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="sect1"><a href="oss.html#oss-intro">15.1. Introduction</a></span></dt><dt><span class="sect1"><a href="oss-files.html">15.2. Files</a></span></dt><dt><span class="sect1"><a href="pcm-probe-and-attach.html">15.3. Probing, Attaching, etc.</a></span></dt><dt><span class="sect1"><a href="oss-interfaces.html">15.4. Interfaces</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="oss-intro"></a>15.1. Introduction</h2></div></div></div><a id="idp56936440" class="indexterm"></a><p>The FreeBSD sound subsystem cleanly separates generic sound
      handling issues from device-specific ones.  This makes it easier
      to add support for new hardware.</p><p>The <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> framework is the central piece of the sound
      subsystem.  It mainly implements the following elements:</p><a id="idp57176056" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A system call interface (read, write, ioctls) to
	  digitized sound and mixer functions.  The ioctl command set
	  is compatible with the legacy <span class="emphasis"><em>OSS</em></span> or
	  <span class="emphasis"><em>Voxware</em></span> interface, allowing common
	  multimedia applications to be ported without
	  modification.</p></li><li class="listitem"><p>Common code for processing sound data (format
	  conversions, virtual channels).</p></li><li class="listitem"><p>A uniform software interface to hardware-specific audio
	  interface modules.</p></li><li class="listitem"><p>Additional support for some common hardware interfaces
	  (ac97), or shared hardware-specific code (ex: ISA DMA
	  routines).</p></li></ul></div><p>The support for specific sound cards is implemented by
      hardware-specific drivers, which provide channel and mixer
      interfaces to plug into the generic <code class="filename">pcm</code>
      code.</p><p>In this chapter, the term <code class="filename">pcm</code> will
      refer to the central, common part of the sound driver, as
      opposed to the hardware-specific modules.</p><p>The prospective driver writer will of course want to start
      from an existing module and use the code as the ultimate
      reference.  But, while the sound code is nice and clean, it is
      also mostly devoid of comments.  This document tries to give an
      overview of the framework interface and answer some questions
      that may arise while adapting the existing code.</p><p>As an alternative, or in addition to starting from a working
      example, you can find a commented driver template at
      <a class="link" href="https://people.FreeBSD.org/~cg/template.c" target="_top">
	https://people.FreeBSD.org/~cg/template.c</a></p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="newbus-api.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="devicedrivers.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="oss-files.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">14.3. Newbus API </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 15.2. Files</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>