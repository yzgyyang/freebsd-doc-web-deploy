<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>5.15. Conflict Handling</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="makefiles.html" title="Chapter 5. Configuring the Makefile" /><link rel="prev" href="makefile-wrkdir.html" title="5.14. Specifying the Working Directory" /><link rel="next" href="install.html" title="5.16. Installing Files" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.15. Conflict Handling</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="makefile-wrkdir.html">Prev</a> </td><th width="60%" align="center">Chapter 5. Configuring the Makefile</th><td width="20%" align="right"> <a accesskey="n" href="install.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="conflicts"></a>5.15. Conflict Handling</h2></div></div></div><p>There are three different variables to register a conflict
      between packages and ports: <code class="varname">CONFLICTS</code>,
      <code class="varname">CONFLICTS_INSTALL</code> and
      <code class="varname">CONFLICTS_BUILD</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The conflict variables automatically set the variable
	<code class="varname">IGNORE</code>, which is more fully documented in
	<a class="xref" href="dads-noinstall.html" title="13.13. Marking a Port Not Installable with BROKEN, FORBIDDEN, or IGNORE">Section 13.13, &#8220;Marking a Port Not Installable with
      <code class="varname">BROKEN</code>, <code class="varname">FORBIDDEN</code>, or
      <code class="varname">IGNORE</code>&#8221;</a>.</p></div><p>When removing one of several conflicting ports, it is
      advisable to retain <code class="varname">CONFLICTS</code> in
      those other ports for a few months to cater for users who only
      update once in a while.</p><div class="variablelist"><a id="conflicts-variables"></a><dl class="variablelist"><dt><a id="conclicts-conflicts_install"></a><span class="term"><code class="varname">CONFLICTS_INSTALL</code></span></dt><dd><p>If the package cannot coexist with other
	  packages (because of file conflicts, runtime
	  incompatibilities, etc.).
	  <code class="varname">CONFLICTS_INSTALL</code> check is done after the
	  build stage and prior to the install stage.</p></dd><dt><a id="conclicts-conflicts_build"></a><span class="term"><code class="varname">CONFLICTS_BUILD</code></span></dt><dd><p>If the port cannot be built when other specific ports
	    are already installed.  Build conflicts are not recorded
	    in the resulting package.</p></dd><dt><a id="conclicts-conflicts"></a><span class="term"><code class="varname">CONFLICTS</code></span></dt><dd><p>If the port cannot be built if a certain port is
	    already installed and the resulting package cannot coexist
	    with the other package.  <code class="varname">CONFLICTS</code>
	    check is done prior to the build stage and prior to the
	    install stage.</p></dd></dl></div><p>The most common content of one of these variable is the
      package base of another port.  The package base is the package
      name without the appended version, it can be obtained by running
      <code class="command">make -V PKGBASE</code>.</p><div class="example"><a id="conflicts-ex1"></a><div class="example-title">Example 5.46. Basic usage of
	<code class="varname">CONFLICTS<em class="replaceable"><code>*</code></em></code></div><div class="example-contents"><p><a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/dns/bind99/pkg-descr">dns/bind99</a> cannot be
	installed if <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/dns/bind910/pkg-descr">dns/bind910</a> is
	present because they install same files.  First gather the
	package base to use:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>make -C dns/bind99 -V PKGBASE</code></strong>
bind99
<code class="prompt">%</code> <strong class="userinput"><code>make -C dns/bind910 -V PKGBASE</code></strong>
bind910</pre><p>Then add to the <code class="filename">Makefile</code> of <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/dns/bind99/pkg-descr">dns/bind99</a>:</p><pre class="programlisting">CONFLICTS_INSTALL=	bind910</pre><p>And add to the <code class="filename">Makefile</code> of <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/dns/bind910/pkg-descr">dns/bind910</a>:</p><pre class="programlisting">CONFLICTS_INSTALL=	bind99</pre></div></div><br class="example-break" /><p>Sometime, only some version of another port is incompatible,
      in this case, use the full package name, with the version, and
      use shell globs, like <code class="literal">*</code> and
      <code class="literal">?</code> to make sure all possible versions are
      matched.</p><div class="example"><a id="conflicts-ex2"></a><div class="example-title">Example 5.47. Using <code class="varname">CONFLICTS<em class="replaceable"><code>*</code></em></code> With Globs.</div><div class="example-contents"><p>From versions from 2.0 and up-to 2.4.1_2, <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/deskutils/gnotime/pkg-descr">deskutils/gnotime</a> used to install a
	bundled version of <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/databases/qof/pkg-descr">databases/qof</a>.</p><p>To reflect this past, the <code class="filename">Makefile</code> of
	<a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/databases/qof/pkg-descr">databases/qof</a> contains:</p><pre class="programlisting">CONFLICTS_INSTALL=	gnotime-2.[0-3]* \
			gnotime-2.4.0* gnotime-2.4.1 \
			gnotime-2.4.1_[12]</pre><p>The first entry match versions <code class="literal">2.0</code>
	through <code class="literal">2.3</code>, the second all the revisions
	of <code class="literal">2.4.0</code>, the third the exact
	<code class="literal">2.4.1</code> version, and the last the first and
	second revisions of the <code class="literal">2.4.1</code>
	version.</p><p><a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/deskutils/gnotime/pkg-descr">deskutils/gnotime</a> does not
	have any conflicts line because its current version does not
	conflict with anything else.</p></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="makefile-wrkdir.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="makefiles.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="install.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.14. Specifying the Working Directory </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5.16. Installing Files</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>