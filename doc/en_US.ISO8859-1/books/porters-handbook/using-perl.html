<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.8. Using Perl</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="using-gettext.html" title="6.7. Using GNU gettext" /><link rel="next" href="using-x11.html" title="6.9. Using X11" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.8. Using <span class="application">Perl</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-gettext.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-x11.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-perl"></a>6.8. Using <span class="application">Perl</span></h2></div></div></div><p>If <code class="varname">MASTER_SITES</code> is set to
      <code class="literal">CPAN</code>, the correct subdirectory is usually
      selected automatically.  If the default subdirectory is wrong,
      <code class="literal">CPAN/Module</code> can be used to change it.
      <code class="varname">MASTER_SITES</code> can also be set to the old
      <code class="varname">MASTER_SITE_PERL_CPAN</code>, then the preferred
      value of <code class="varname">MASTER_SITE_SUBDIR</code> is the
      top-level hierarchy name.  For example, the recommended value
      for <code class="literal">p5-Module-Name</code> is
      <code class="literal">Module</code>.  The top-level hierarchy can be
      examined at <a class="link" href="http://cpan.org/modules/by-module/" target="_top">cpan.org</a>.
      This keeps the port working when the author of the module
      changes.</p><p>The exception to this rule is when the relevant directory
      does not exist or the distfile does not exist in that
      directory.  In such case, using author's id as
      <code class="varname">MASTER_SITE_SUBDIR</code> is allowed.
      The <code class="literal">CPAN:AUTHOR</code> macro can be used, which will
      be translated to the hashed author directory.  For example,
      <code class="literal">CPAN:AUTHOR</code> will be converted to
      <code class="literal">authors/id/A/AU/AUTHOR</code>.</p><p>When a port needs <span class="application">Perl</span> support,
      it must set <code class="literal">USES=perl5</code> with the optional
      <code class="varname">USE_PERL5</code> described in <a class="link" href="uses-perl5.html" title="17.66. perl5">the perl5 USES description</a>.</p><div class="table"><a id="using-perl-variables"></a><div class="table-title">Table 6.6. Read-Only Variables for Ports That Use
	<span class="application">Perl</span></div><div class="table-contents"><table class="table" summary="Read-Only Variables for Ports That Use&#10;&#9;Perl" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Read only variables</th><th>Means</th></tr></thead><tbody><tr><td><code class="varname">PERL</code></td><td>The full path of the Perl 5 interpreter,
	      either in the system or installed from a port, but
	      without the version number.  Use this when the software
	      needs the path to the <span class="application">Perl</span>
	      interpreter.  To replace
	      <span class="quote">&#8220;<span class="quote"><code class="literal">#!</code></span>&#8221;</span>lines in scripts,
	      use <a class="link" href="uses-shebangfix.html" title="17.81. shebangfix">USES=shebangfix</a>.</td></tr><tr><td><code class="varname">PERL_VERSION</code></td><td>The full version of Perl installed (for example,
	      <code class="literal">5.8.9</code>).</td></tr><tr><td><code class="varname">PERL_LEVEL</code></td><td>The installed Perl version as
	      an integer of the form <code class="literal">MNNNPP</code>
	      (for example, <code class="literal">500809</code>).</td></tr><tr><td><code class="varname">PERL_ARCH</code></td><td>Where Perl stores architecture
	      dependent libraries.  Defaults to
	      <code class="literal">${ARCH}-freebsd</code>.</td></tr><tr><td><code class="varname">PERL_PORT</code></td><td>Name of the Perl port that is installed (for
	      example, <code class="literal">perl5</code>).</td></tr><tr><td><code class="varname">SITE_PERL</code></td><td>Directory name where site specific
	      Perl packages go.  This value is
	      added to <code class="varname">PLIST_SUB</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ports of Perl modules which do not have an official
	website must link to <code class="systemitem">cpan.org</code> in
	the WWW line of <code class="filename">pkg-descr</code>.  The
	preferred URL form is
	<code class="literal">http://search.cpan.org/dist/Module-Name/</code>
	(including the trailing slash).</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Do not use <code class="literal">${SITE_PERL}</code> in dependency
	declarations.  Doing so assumes that
	<code class="filename">perl5.mk</code> has been included, which is
	not always true.  Ports depending on this port will have
	incorrect dependencies if this port's files move later in an
	upgrade.  The right way to declare Perl module dependencies
	is shown in the example below.</p></div><div class="example"><a id="use-perl-dependency-example"></a><div class="example-title">Example 6.12. Perl Dependency Example</div><div class="example-contents"><pre class="programlisting">p5-IO-Tee&gt;=0.64:devel/p5-IO-Tee</pre></div></div><br class="example-break" /><p>For Perl ports that install manual pages, the macro
      <code class="literal">PERL5_MAN3</code> and <code class="literal">PERL5_MAN1</code>
      can be used
      inside <code class="filename">pkg-plist</code>.  For example,</p><pre class="programlisting">lib/perl5/5.14/man/man1/event.1.gz
lib/perl5/5.14/man/man3/AnyEvent::I3.3.gz</pre><p>can be replaced with</p><pre class="programlisting">%%PERL5_MAN1%%/event.1.gz
%%PERL5_MAN3%%/AnyEvent::I3.3.gz</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">There are no
	<code class="varname">PERL5_MAN<em class="replaceable"><code>x</code></em></code>
	macros for the
	other sections (<em class="replaceable"><code>x</code></em> in
	<code class="literal">2</code> and
	<code class="literal">4</code> to <code class="literal">9</code>) because those
	get installed in the regular directories.</p></div><div class="example"><a id="use-perl-ex-build"></a><div class="example-title">Example 6.13. A Port Which Only Requires Perl to Build</div><div class="example-contents"><p>As the default USE_PERL5 value is build and run, set it
	to:</p><pre class="programlisting">USES=		perl5
USE_PERL5=	build</pre></div></div><br class="example-break" /><div class="example"><a id="use-perl-ex-patch"></a><div class="example-title">Example 6.14. A Port Which Also Requires Perl to Patch</div><div class="example-contents"><p>From time to time, using <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=sed&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">sed</span>(1)</span></a> for patching is not
	enough.  When using <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=perl&amp;sektion=1&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">perl</span>(1)</span></a> is easier, use:</p><pre class="programlisting">USES=		perl5
USE_PERL5=	patch build run</pre></div></div><br class="example-break" /><div class="example"><a id="use-perl-ex-configure"></a><div class="example-title">Example 6.15. A Perl Module Which Needs
	<code class="literal">ExtUtils::MakeMaker</code> to Build</div><div class="example-contents"><p>Most <span class="application">Perl</span> modules come with a
	<code class="filename">Makefile.PL</code> configure script.  In this
	case, set:</p><pre class="programlisting">USES=		perl5
USE_PERL5=	configure</pre></div></div><br class="example-break" /><div class="example"><a id="use-perl-ex-modbuild"></a><div class="example-title">Example 6.16. A Perl Module Which Needs
	<code class="literal">Module::Build</code> to Build</div><div class="example-contents"><p>When a <span class="application">Perl</span> module comes with a
	<code class="filename">Build.PL</code> configure script, it can require
	<span class="application">Module::Build</span>, in which case,
	set</p><pre class="programlisting">USES=		perl5
USE_PERL5=	modbuild</pre><p>If it instead requires
	<span class="application">Module::Build::Tiny</span>, set</p><pre class="programlisting">USES=		perl5
USE_PERL5=	modbuildtiny</pre></div></div><br class="example-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-gettext.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-x11.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.7. Using GNU <code class="literal">gettext</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.9. Using X11</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>