<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>8.2. Empty Directories</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="plist.html" title="Chapter 8. Advanced pkg-plist Practices" /><link rel="prev" href="plist.html" title="Chapter 8. Advanced pkg-plist Practices" /><link rel="next" href="plist-config.html" title="8.3. Configuration Files" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.2. Empty Directories</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="plist.html">Prev</a> </td><th width="60%" align="center">Chapter 8. Advanced <code class="filename">pkg-plist</code> Practices</th><td width="20%" align="right"> <a accesskey="n" href="plist-config.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="plist-cleaning"></a>8.2. Empty Directories</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-dir-cleaning"></a>8.2.1. Cleaning Up Empty Directories</h3></div></div></div><p>When being de-installed, a port has to remove empty
	directories it created.  Most of these directories are removed
	automatically by <a class="citerefentry" href="https://www.FreeBSD.org/cgi/man.cgi?query=pkg&amp;sektion=8&amp;manpath=freebsd-release-ports"><span class="citerefentry"><span class="refentrytitle">pkg</span>(8)</span></a>, but for directories created
	outside of <code class="filename">${PREFIX}</code>, or empty
	directories, some more work needs to be done.  This is usually
	accomplished by adding <code class="literal">@dir</code> lines for those
	directories.  Subdirectories must be deleted before deleting
	parent directories.</p><pre class="programlisting">[...]
@dir /var/games/oneko/saved-games
@dir /var/games/oneko</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="plist-dir-empty"></a>8.2.2. Creating Empty Directories</h3></div></div></div><p>Empty directories created during port installation need
	special attention.  They must be present when the package
	is created.   If they are not created by the port code, create
	them in the <code class="filename">Makefile</code>:</p><pre class="programlisting">post-install:
	${MKDIR} ${STAGEDIR}${PREFIX}/some/directory</pre><p>Add the directory to <code class="filename">pkg-plist</code>
	like any other.  For example:</p><pre class="programlisting">@dir some/directory</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="plist.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="plist.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="plist-config.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 8. Advanced <code class="filename">pkg-plist</code> Practices </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 8.3. Configuration Files</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>