<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.16. Web Applications, Apache and PHP</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="using-java.html" title="6.15. Using Java" /><link rel="next" href="using-python.html" title="6.17. Using Python" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.16. Web Applications, Apache and PHP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-java.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-python.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-php"></a>6.16. Web Applications, Apache and PHP</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-apache"></a>6.16.1. Apache</h3></div></div></div><div class="table"><a id="using-apache-variables"></a><div class="table-title">Table 6.23. Variables for Ports That Use Apache</div><div class="table-contents"><table class="table" summary="Variables for Ports That Use Apache" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">USE_APACHE</code></td><td>The port requires Apache.  Possible values:
		<code class="literal">yes</code> (gets any version),
		<code class="literal">22</code>, <code class="literal">24</code>,
		<code class="literal">22-24</code>, <code class="literal">22+</code>,
		etc.  The default APACHE version is
		<code class="literal">22</code>.  More details are available
		in <code class="filename">ports/Mk/bsd.apache.mk</code> and
		at <a class="link" href="https://wiki.freebsd.org/Apache/" target="_top">wiki.freebsd.org/Apache/</a>.</td></tr><tr><td><code class="varname">APXS</code></td><td>Full path to the <code class="command">apxs</code>
		binary.  Can be overridden in the port.</td></tr><tr><td><code class="varname">HTTPD</code></td><td>Full path to the <code class="command">httpd</code>
		binary.  Can be overridden in the port.</td></tr><tr><td><code class="varname">APACHE_VERSION</code></td><td>The version of present Apache installation
		(read-only variable).  This variable is only
		available after inclusion of
		<code class="filename">bsd.port.pre.mk</code>.  Possible
		values: <code class="literal">22</code>,
		<code class="literal">24</code>.</td></tr><tr><td><code class="varname">APACHEMODDIR</code></td><td>Directory for Apache modules.  This variable is
		automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEINCLUDEDIR</code></td><td>Directory for Apache headers.  This variable is
		automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">APACHEETCDIR</code></td><td>Directory for Apache configuration files.  This
		variable is automatically expanded in
		<code class="filename">pkg-plist</code>.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-apache-modules"></a><div class="table-title">Table 6.24. Useful Variables for Porting Apache Modules</div><div class="table-contents"><table class="table" summary="Useful Variables for Porting Apache Modules" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">MODULENAME</code></td><td>Name of the module.  Default value is
		<code class="varname">PORTNAME</code>.  Example:
		<code class="literal">mod_hello</code></td></tr><tr><td><code class="varname">SHORTMODNAME</code></td><td>Short name of the module.  Automatically
		derived from <code class="varname">MODULENAME</code>, but can
		be overridden.  Example:
		<code class="literal">hello</code></td></tr><tr><td><code class="varname">AP_FAST_BUILD</code></td><td>Use <code class="command">apxs</code> to compile and
		install the module.</td></tr><tr><td><code class="varname">AP_GENPLIST</code></td><td>Also automatically creates a
		<code class="filename">pkg-plist</code>.</td></tr><tr><td><code class="varname">AP_INC</code></td><td>Adds a directory to a header search path during
		compilation.</td></tr><tr><td><code class="varname">AP_LIB</code></td><td>Adds a directory to a library search path
		during compilation.</td></tr><tr><td><code class="varname">AP_EXTRAS</code></td><td>Additional flags to pass to
		<code class="command">apxs</code>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="web-apps"></a>6.16.2. Web Applications</h3></div></div></div><p>Web applications must be installed into
	<code class="filename">PREFIX/www/<em class="replaceable"><code>appname</code></em></code>.
	This path is available both in
	<code class="filename">Makefile</code> and in
	<code class="filename">pkg-plist</code> as <code class="varname">WWWDIR</code>,
	and the path relative to <code class="varname">PREFIX</code> is
	available in <code class="filename">Makefile</code> as
	<code class="varname">WWWDIR_REL</code>.</p><p>The user and group of web server process are available
	as <code class="varname">WWWOWN</code> and <code class="varname">WWWGRP</code>,
	in case the ownership of some files needs to be changed.  The
	default values of both are <code class="literal">www</code>.  Use
	<code class="literal">WWWOWN?= myuser</code> and <code class="literal">WWWGRP?=
	  mygroup</code> if the port needs different values.  This
	allows the user to override them easily.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Use <code class="varname">WWWOWN</code> and
	  <code class="varname">WWWGRP</code> sparingly.  Remember that every
	  file the web server can write to is a security risk waiting
	  to happen.</p></div><p>Do not depend on Apache unless the web app explicitly
	needs Apache.  Respect that users may wish to run a web
	application on a web server other than
	<span class="application">Apache</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-variables"></a>6.16.3. PHP</h3></div></div></div><p><span class="application">PHP</span> web applications declare
	their dependency on it with <code class="literal">USES=php</code>.  See
	<a class="xref" href="uses-php.html" title="17.68. php">Section 17.68, &#8220;<code class="literal">php</code>&#8221;</a> for more information.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-pear"></a>6.16.4. PEAR Modules</h3></div></div></div><p>Porting PEAR modules is a very simple process.</p><p>Add <code class="literal">USES=pear</code> to the port's
	<code class="filename">Makefile</code>.  The framework will install the
	relevant files in the right places and automatically generate
	the plist at install time.</p><div class="example"><a id="pear-makefile"></a><div class="example-title">Example 6.23. Example Makefile for PEAR Class</div><div class="example-contents"><pre class="programlisting">PORTNAME=       Date
DISTVERSION=	1.4.3
CATEGORIES=	devel www pear

MAINTAINER=	example@domain.com
COMMENT=	PEAR Date and Time Zone Classes

USES=	pear

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">PEAR</span> modules will
	  automatically be flavorized using <a class="link" href="flavors-auto-php.html" title="7.3. USES=php and Flavors"><span class="application">PHP</span>
	    flavors</a>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">If a non default <code class="varname">PEAR_CHANNEL</code> is
	  used, the build and run-time dependencies will automatically
	  be added.</p></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">PEAR modules do not need to defined
	  <code class="varname">PKGNAMESUFFIX</code> it is automatically filled
	  in using <code class="varname">PEAR_PKGNAMEPREFIX</code>.  If a port
	  needs to add to <code class="varname">PKGNAMEPREFIX</code>, it must
	  also use <code class="varname">PEAR_PKGNAMEPREFIX</code> to
	  differentiate between different flavors.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="php-horde"></a>6.16.4.1. <span class="application">Horde</span> Modules</h4></div></div></div><p>In the same way, porting
	  <span class="application">Horde</span> modules is a simple
	  process.</p><p>Add <code class="literal">USES=horde</code> to the port's
	  <code class="filename">Makefile</code>.  The framework will install
	  the relevant files in the right places and automatically
	  generate the plist at install time.</p><p>The <code class="varname">USE_HORDE_BUILD</code> and
	  <code class="varname">USE_HORDE_RUN</code> variables can be used to
	  add buildtime and runtime dependencies on other
	  <span class="application">Horde</span> modules.  See
	  <code class="filename">Mk/Uses/horde.mk</code> for a complete list of
	  available modules.</p><div class="example"><a id="horde-Makefile"></a><div class="example-title">Example 6.24. Example Makefile for <span class="application">Horde</span>
	    Module</div><div class="example-contents"><pre class="programlisting">PORTNAME=	Horde_Core
DISTVERSION=	2.14.0
CATEGORIES=	devel www pear

MAINTAINER=	horde@FreeBSD.org
COMMENT=	Horde Core Framework libraries

OPTIONS_DEFINE=	KOLAB SOCKETS
KOLAB_DESC=	Enable Kolab server support
SOCKETS_DESC=	Depend on sockets PHP extension

USES=	horde
USE_PHP=	session

USE_HORDE_BUILD=	Horde_Role
USE_HORDE_RUN=	Horde_Role Horde_History Horde_Pack \
		Horde_Text_Filter Horde_View

KOLAB_USE=	HORDE_RUN=Horde_Kolab_Server,Horde_Kolab_Session
SOCKETS_USE=	PHP=sockets

.include &lt;bsd.port.mk&gt;</pre></div></div><br class="example-break" /><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">As <span class="application">Horde</span> modules are also
	    <span class="application">PEAR</span> modules they will also
	    automatically be flavorized using <a class="link" href="flavors-auto-php.html" title="7.3. USES=php and Flavors"><span class="application">PHP</span>
	      flavors</a>.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-java.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-python.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.15. Using Java </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.17. Using Python</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>