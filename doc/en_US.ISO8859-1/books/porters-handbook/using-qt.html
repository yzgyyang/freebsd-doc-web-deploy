<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.12. Using Qt</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="gnome-components.html" title="6.11. GNOME Components" /><link rel="next" href="using-kde.html" title="6.13. Using KDE" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.12. Using Qt</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="gnome-components.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-kde.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-qt"></a>6.12. Using Qt</h2></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">For ports that are part of Qt itself, see <a class="xref" href="uses-qt-dist.html" title="17.76. qt-dist">Section 17.76, &#8220;<code class="literal">qt-dist</code>&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-common"></a>6.12.1. Ports That Require Qt</h3></div></div></div><p>The Ports Collection provides support for Qt 5 with
	<code class="varname">USES+=qt:5</code>.  Set <code class="varname">USE_QT</code>
	to the list of required Qt components (libraries, tools,
	plugins).</p><p>The Qt framework exports a number of variables which can
	be used by ports, some of them listed below:</p><div class="table"><a id="using-qt-variables"></a><div class="table-title">Table 6.12. Variables Provided to Ports That Use Qt</div><div class="table-contents"><table class="table" summary="Variables Provided to Ports That Use Qt" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="varname">QMAKE</code></td><td>Full path to <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">LRELEASE</code></td><td>Full path to <code class="command">lrelease</code>
		utility.</td></tr><tr><td><code class="varname">MOC</code></td><td>Full path to <code class="command">moc</code>.</td></tr><tr><td><code class="varname">RCC</code></td><td>Full path to <code class="command">rcc</code>.</td></tr><tr><td><code class="varname">UIC</code></td><td>Full path to <code class="command">uic</code>.</td></tr><tr><td><code class="varname">QT_INCDIR</code></td><td>Qt include directory.</td></tr><tr><td><code class="varname">QT_LIBDIR</code></td><td>Qt libraries path.</td></tr><tr><td><code class="varname">QT_PLUGINDIR</code></td><td>Qt plugins path.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="qt-components"></a>6.12.2. Component Selection</h3></div></div></div><p>Individual Qt tool and library dependencies must be
	specified in <code class="varname">USE_QT</code>.
	Every component can be suffixed with
	<code class="literal">_build</code> or <code class="literal">_run</code>, the
	suffix indicating whether the dependency on the component is
	at buildtime or runtime.  If unsuffixed, the component will be
	depended on at both build- and runtime.  Usually, library
	components are specified unsuffixed, tool components
	are mostly specified with the <code class="literal">_build</code> suffix
	and plugin components are specified with the
	<code class="literal">_run</code> suffix.  The most commonly used
	components are listed below (all available components are
	listed in <code class="varname">_USE_QT_ALL</code>, and
	<code class="varname">_USE_QT5_ONLY</code> in
	<code class="filename">/usr/ports/Mk/Uses/qt.mk</code>):</p><div class="table"><a id="using-qt-library-list"></a><div class="table-title">Table 6.13. Available Qt Library Components</div><div class="table-contents"><table class="table" summary="Available Qt Library Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">3d</code></td><td>Qt3D module</td></tr><tr><td><code class="literal">assistant</code></td><td>Qt 5 documentation browser</td></tr><tr><td><code class="literal">canvas3d</code></td><td>Qt canvas3d module</td></tr><tr><td><code class="literal">charts</code></td><td>Qt 5 charts module</td></tr><tr><td><code class="literal">concurrent</code></td><td>Qt multi-threading module</td></tr><tr><td><code class="literal">connectivity</code></td><td>Qt connectivity (Bluetooth/NFC) module</td></tr><tr><td><code class="literal">core</code></td><td>Qt core non-graphical module</td></tr><tr><td><code class="literal">datavis3d</code></td><td>Qt 5 3D data visualization module</td></tr><tr><td><code class="literal">dbus</code></td><td>Qt D-Bus inter-process communication
		module</td></tr><tr><td><code class="literal">declarative</code></td><td>Qt declarative framework for dynamic user
		interfaces</td></tr><tr><td><code class="literal">designer</code></td><td>Qt 5 graphical user interface designer</td></tr><tr><td><code class="literal">diag</code></td><td>Tool for reporting diagnostic information about
		Qt and its environment</td></tr><tr><td><code class="literal">doc</code></td><td>Qt 5 documentation</td></tr><tr><td><code class="literal">examples</code></td><td>Qt 5 examples sourcecode</td></tr><tr><td><code class="literal">gamepad</code></td><td>Qt 5 Gamepad Module</td></tr><tr><td><code class="literal">graphicaleffects</code></td><td>Qt Quick graphical effects</td></tr><tr><td><code class="literal">gui</code></td><td>Qt graphical user interface module</td></tr><tr><td><code class="literal">help</code></td><td>Qt online help integration module</td></tr><tr><td><code class="literal">l10n</code></td><td>Qt localized messages</td></tr><tr><td><code class="literal">linguist</code></td><td>Qt 5 translation tool</td></tr><tr><td><code class="literal">location</code></td><td>Qt location module</td></tr><tr><td><code class="literal">multimedia</code></td><td>Qt audio, video, radio and camera support
		module</td></tr><tr><td><code class="literal">network</code></td><td>Qt network module</td></tr><tr><td><code class="literal">networkauth</code></td><td>Qt network auth module</td></tr><tr><td><code class="literal">opengl</code></td><td>Qt 5-compatible OpenGL support module</td></tr><tr><td><code class="literal">paths</code></td><td>Command line client to QStandardPaths</td></tr><tr><td><code class="literal">phonon4</code></td><td>KDE multimedia framework</td></tr><tr><td><code class="literal">pixeltool</code></td><td>Qt 5 screen magnifier</td></tr><tr><td><code class="literal">plugininfo</code></td><td>Qt5 plugin metadata dumper</td></tr><tr><td><code class="literal">printsupport</code></td><td>Qt print support module</td></tr><tr><td><code class="literal">qdbus</code></td><td>Qt command-line interface to D-Bus</td></tr><tr><td><code class="literal">qdbusviewer</code></td><td>Qt 5 graphical interface to D-Bus</td></tr><tr><td><code class="literal">qdoc</code></td><td>Qt documentation generator</td></tr><tr><td><code class="literal">qdoc-data</code></td><td>QDoc configuration files</td></tr><tr><td><code class="literal">qev</code></td><td>Qt QWidget events introspection tool</td></tr><tr><td><code class="literal">qmake</code></td><td>Qt Makefile generator</td></tr><tr><td><code class="literal">quickcontrols</code></td><td>Set of controls for building complete interfaces
		in Qt Quick</td></tr><tr><td><code class="literal">quickcontrols2</code></td><td>Set of controls for building complete interfaces
		in Qt Quick</td></tr><tr><td><code class="literal">remoteobjects</code></td><td>Qt5 SXCML module</td></tr><tr><td><code class="literal">script</code></td><td>Qt 4-compatible scripting module</td></tr><tr><td><code class="literal">scripttools</code></td><td>Qt Script additional components</td></tr><tr><td><code class="literal">scxml</code></td><td>Qt5 SXCML module</td></tr><tr><td><code class="literal">sensors</code></td><td>Qt sensors module</td></tr><tr><td><code class="literal">serialbus</code></td><td>Qt functions to access industrial bus
		systems</td></tr><tr><td><code class="literal">serialport</code></td><td>Qt functions to access serial ports</td></tr><tr><td><code class="literal">speech</code></td><td>Accessibilty features for Qt5</td></tr><tr><td><code class="literal">sql</code></td><td>Qt SQL database integration module</td></tr><tr><td><code class="literal">sql-ibase</code></td><td>Qt InterBase/Firebird database plugin</td></tr><tr><td><code class="literal">sql-mysql</code></td><td>Qt MySQL database plugin</td></tr><tr><td><code class="literal">sql-odbc</code></td><td>Qt Open Database Connectivity plugin</td></tr><tr><td><code class="literal">sql-pgsql</code></td><td>Qt PostgreSQL database plugin</td></tr><tr><td><code class="literal">sql-sqlite2</code></td><td>Qt SQLite 2 database plugin</td></tr><tr><td><code class="literal">sql-sqlite3</code></td><td>Qt SQLite 3 database plugin</td></tr><tr><td><code class="literal">sql-tds</code></td><td>Qt TDS Database Connectivity database
		plugin</td></tr><tr><td><code class="literal">svg</code></td><td>Qt SVG support module</td></tr><tr><td><code class="literal">testlib</code></td><td>Qt unit testing module</td></tr><tr><td><code class="literal">uiplugin</code></td><td>Custom Qt widget plugin interface for Qt
		Designer</td></tr><tr><td><code class="literal">uitools</code></td><td>Qt Designer UI forms support module</td></tr><tr><td><code class="literal">virtualkeyboard</code></td><td>Qt 5 Virtual Keyboard Module</td></tr><tr><td><code class="literal">wayland</code></td><td>Qt5 wrapper for Wayland</td></tr><tr><td><code class="literal">webchannel</code></td><td>Qt 5 library for integration of C++/QML with
		HTML/js clients</td></tr><tr><td><code class="literal">webengine</code></td><td>Qt 5 library to render web content</td></tr><tr><td><code class="literal">webkit</code></td><td>QtWebKit with a more modern WebKit code
		base</td></tr><tr><td><code class="literal">websockets</code></td><td>Qt implementation of WebSocket protocol</td></tr><tr><td><code class="literal">websockets-qml</code></td><td>Qt implementation of WebSocket protocol (QML
		bindings)</td></tr><tr><td><code class="literal">webview</code></td><td>Qt component for displaying web content</td></tr><tr><td><code class="literal">widgets</code></td><td>Qt C++ widgets module</td></tr><tr><td><code class="literal">x11extras</code></td><td>Qt platform-specific features for X11-based
		systems</td></tr><tr><td><code class="literal">xml</code></td><td>Qt SAX and DOM implementations</td></tr><tr><td><code class="literal">xmlpatterns</code></td><td>Qt support for XPath, XQuery, XSLT and XML
		Schema</td></tr></tbody></table></div></div><br class="table-break" /><p>To determine the libraries an application
	depends on, run <code class="command">ldd</code> on the main
	executable after a successful compilation.</p><div class="table"><a id="using-qt-tools-list"></a><div class="table-title">Table 6.14. Available Qt Tool Components</div><div class="table-contents"><table class="table" summary="Available Qt Tool Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">buildtools</code></td><td>build tools (<code class="command">moc</code>,
		<code class="command">rcc</code>), needed for almost every
		Qt application.</td></tr><tr><td><code class="literal">linguisttools</code></td><td>localization tools: <code class="command">lrelease</code>,
		<code class="command">lupdate</code></td></tr><tr><td><code class="literal">qmake</code></td><td>Makefile generator/build utility</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-qt-plugins-list"></a><div class="table-title">Table 6.15. Available Qt Plugin Components</div><div class="table-contents"><table class="table" summary="Available Qt Plugin Components" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">imageformats</code></td><td>plugins for TGA, TIFF, and MNG
		image formats</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="qt5-components-example"></a><div class="example-title">Example 6.19. Selecting Qt 5 Components</div><div class="example-contents"><p>In this example, the ported application uses the Qt 5
	  graphical user interface library, the Qt 5 core library,
	  all of the Qt 5 code generation tools and Qt 5's Makefile
	  generator.  Since the <code class="literal">gui</code> library
	  implies a dependency on the core library,
	  <code class="literal">core</code> does not need to be specified.
	  The Qt 5 code generation tools <code class="command">moc</code>,
	  <code class="command">uic</code> and <code class="command">rcc</code>, as well
	  as the Makefile generator <code class="command">qmake</code> are
	  only needed at buildtime, thus they are specified with the
	  <code class="literal">_build</code> suffix:</p><pre class="programlisting">USES=	qt:5
USE_QT=	gui buildtools_build qmake_build</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="using-qmake"></a>6.12.3. Using <code class="command">qmake</code></h3></div></div></div><p>If the application provides a
	<span class="application">qmake</span> project file
	(<code class="filename">*.pro</code>), define
	<code class="literal">USES= qmake</code> along with
	<code class="literal">USE_QT</code>.  <code class="literal">USES= qmake</code>
	already implies a build dependency on qmake, therefore the
	qmake component can be omitted from
	<code class="literal">USE_QT</code>.  Similar to <a class="link" href="building.html#using-cmake" title="6.5.4. Using cmake"><span class="application">CMake</span></a>,
	<span class="application">qmake</span> supports out-of-source
	builds, which can be enabled by specifying the
	<code class="literal">outsource</code> argument (see <a class="link" href="using-qt.html#using-qmake-example" title="Example 6.20. USES= qmake Example"><code class="literal">USES= qmake</code>
	example</a>).  Also see <a class="xref" href="using-qt.html#using-qmake-arguments" title="Table 6.16. Possible Arguments for USES= qmake">Table 6.16, &#8220;Possible Arguments for
	  <code class="literal">USES= qmake</code>&#8221;</a>.</p><div class="table"><a id="using-qmake-arguments"></a><div class="table-title">Table 6.16. Possible Arguments for
	  <code class="literal">USES= qmake</code></div><div class="table-contents"><table class="table" summary="Possible Arguments for&#10;&#9;  USES= qmake" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">no_configure</code></td><td>Do not add the configure target.  This is
		implied by <code class="literal">HAS_CONFIGURE=yes</code>
		and <code class="literal">GNU_CONFIGURE=yes</code>.
		It is required when the build only needs the
		environment setup from
		<code class="literal">USES= qmake</code>, but otherwise runs
		<code class="command">qmake</code> on its own.</td></tr><tr><td><code class="literal">no_env</code></td><td>Suppress modification of the configure and make
		environments.  It is only required when
		<code class="command">qmake</code> is used to configure the
		software and the build fails to understand the
		environment setup by
		<code class="literal">USES= qmake</code>.</td></tr><tr><td><code class="literal">norecursive</code></td><td>Do not pass the <code class="literal">-recursive</code>
		argument to <code class="command">qmake</code>.</td></tr><tr><td><code class="literal">outsource</code></td><td>Perform an out-of-source build.</td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="using-qmake-variables"></a><div class="table-title">Table 6.17. Variables for Ports That Use
	  <code class="command">qmake</code></div><div class="table-contents"><table class="table" summary="Variables for Ports That Use&#10;&#9;  qmake" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">QMAKE_ARGS</code></td><td>Port specific <span class="application">qmake</span>
		flags to be passed to the <code class="command">qmake</code>
		binary.</td></tr><tr><td><code class="varname">QMAKE_ENV</code></td><td>Environment variables to be set for the
		<code class="command">qmake</code> binary.   The default is
		<code class="literal">${CONFIGURE_ENV}</code>.</td></tr><tr><td><code class="varname">QMAKE_SOURCE_PATH</code></td><td>Path to qmake project files
		(<code class="filename">.pro</code>).  The default is
		<code class="literal">${WRKSRC}</code> if an
		out-of-source build is requested, empty
		otherwise.</td></tr></tbody></table></div></div><br class="table-break" /><p>When using <code class="literal">USES= qmake</code>, these
	settings are deployed:</p><pre class="programlisting">CONFIGURE_ARGS+=	--with-qt-includes=${QT_INCDIR} \
			--with-qt-libraries=${QT_LIBDIR} \
			--with-extra-libs=${LOCALBASE}/lib \
			--with-extra-includes=${LOCALBASE}/include

CONFIGURE_ENV+=	QTDIR="${QT_PREFIX}" QMAKE="${QMAKE}" \
		MOC="${MOC}" RCC="${RCC}" UIC="${UIC}" \
		QMAKESPEC="${QMAKESPEC}"

PLIST_SUB+=	QT_INCDIR=${QT_INCDIR_REL} \
		QT_LIBDIR=${QT_LIBDIR_REL} \
		QT_PLUGINDIR=${QT_PLUGINDIR_REL}</pre><p>Some configure scripts do not support the arguments above.
	To suppress modification of <code class="varname">CONFIGURE_ENV</code>
	and <code class="varname">CONFIGURE_ARGS</code>, set
	<code class="literal">USES= qmake:no_env</code>.</p><div class="example"><a id="using-qmake-example"></a><div class="example-title">Example 6.20. <code class="literal">USES= qmake</code> Example</div><div class="example-contents"><p>This snippet demonstrates the use of
	  <span class="application">qmake</span> for a Qt 5 port:</p><pre class="programlisting">USES=	qmake:outsource qt:5
USE_QT=	buildtools_build</pre></div></div><br class="example-break" /><p>Qt applications are often written to be cross-platform
	and often X11/Unix is not the platform they are developed
	on, which in turn leads to certain loose ends,
	like:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Missing additional include
	      paths.</em></span>  Many applications come with
	    system tray icon support, but neglect to look for
	    includes and/or libraries in the X11 directories.  To add
	    directories to <code class="command">qmake</code>'s
	    include and library search paths via the command
	    line, use:</p><pre class="programlisting">QMAKE_ARGS+=	INCLUDEPATH+=${LOCALBASE}/include \
		LIBS+=-L${LOCALBASE}/lib</pre></li><li class="listitem"><p><span class="emphasis"><em>Bogus installation paths.</em></span>
	    Sometimes data such as icons or .desktop files are by
	    default installed into directories which are not scanned
	    by XDG-compatible applications.
	    <a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/editors/texmaker/pkg-descr">editors/texmaker</a> is
	    an example for this - look at
	    <code class="filename">patch-texmaker.pro</code> in the
	    <code class="filename">files</code> directory of that port for a
	    template on how to remedy this directly in the
	    <code class="command">qmake</code> project file.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="gnome-components.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-kde.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.11. GNOME Components </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.13. Using KDE</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>