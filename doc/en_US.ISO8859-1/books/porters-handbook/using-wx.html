<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.21. Using wxWidgets</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="FreeBSD Porter's Handbook" /><link rel="up" href="special.html" title="Chapter 6. Special Considerations" /><link rel="prev" href="using-sdl.html" title="6.20. Using SDL" /><link rel="next" href="using-lua.html" title="6.22. Using Lua" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.21. Using <span class="application">wxWidgets</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="using-sdl.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Special Considerations</th><td width="20%" align="right"> <a accesskey="n" href="using-lua.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-wx"></a>6.21. Using <span class="application">wxWidgets</span></h2></div></div></div><p>This section describes the status of the
      <span class="application">wxWidgets</span> libraries in the ports
      tree and its integration with the ports system.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-introduction"></a>6.21.1. Introduction</h3></div></div></div><p>There are many versions of the
	<span class="application">wxWidgets</span> libraries which
	conflict between them (install files under the same name).
	In the ports tree this problem has been solved by installing
	each version under a different name using version number
	suffixes.</p><p>The obvious disadvantage of this is that each
	application has to be modified to find the expected version.
	Fortunately, most of the applications call the
	<code class="command">wx-config</code> script to determine the
	necessary compiler and linker flags.  The script is named
	differently for every available version.  Majority of
	applications respect an environment variable, or accept a
	configure argument, to specify which
	<code class="command">wx-config</code> script to call.  Otherwise they
	have to be patched.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version"></a>6.21.2. Version Selection</h3></div></div></div><p>To make the port use a specific version of
	<span class="application">wxWidgets</span> there are two variables
	available for defining (if only one is defined the other
	will be set to a default value):</p><div class="table"><a id="wx-ver-sel-table"></a><div class="table-title">Table 6.30. Variables to Select
	  <span class="application">wxWidgets</span> Versions</div><div class="table-contents"><table class="table" summary="Variables to Select&#10;&#9;  wxWidgets Versions" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th><th>Default value</th></tr></thead><tbody><tr><td><code class="varname">USE_WX</code></td><td>List of versions the port can use</td><td>All available versions</td></tr><tr><td><code class="varname">USE_WX_NOT</code></td><td>List of versions the port cannot use</td><td>None</td></tr></tbody></table></div></div><br class="table-break" /><p>The available
	<span class="application">wxWidgets</span> versions and the
	corresponding ports in the tree are:</p><div class="table"><a id="wx-widgets-versions-table"></a><div class="table-title">Table 6.31. Available <span class="application">wxWidgets</span>
	  Versions</div><div class="table-contents"><table class="table" summary="Available wxWidgets&#10;&#9;  Versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Version</th><th>Port</th></tr></thead><tbody><tr><td><code class="literal">2.8</code></td><td><a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk28/pkg-descr">x11-toolkits/wxgtk28</a></td></tr><tr><td><code class="literal">3.0</code></td><td><a xmlns="" class="package" href="https://www.freebsd.org/cgi/url.cgi?ports/x11-toolkits/wxgtk30/pkg-descr">x11-toolkits/wxgtk30</a></td></tr></tbody></table></div></div><br class="table-break" /><p>The variables in <a class="xref" href="using-wx.html#wx-ver-sel-table" title="Table 6.30. Variables to Select wxWidgets Versions">Table 6.30, &#8220;Variables to Select
	  <span class="application">wxWidgets</span> Versions&#8221;</a> can
	be set to one or more of these combinations
	separated by spaces:</p><div class="table"><a id="wx-widgets-versions-specification"></a><div class="table-title">Table 6.32. <span class="application">wxWidgets</span> Version
	  Specifications</div><div class="table-contents"><table class="table" summary="wxWidgets Version&#10;&#9;  Specifications" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>Single version</td><td><code class="literal">2.8</code></td></tr><tr><td>Ascending range</td><td><code class="literal">2.8+</code></td></tr><tr><td>Descending range</td><td><code class="literal">3.0-</code></td></tr><tr><td>Full range (must be ascending)</td><td><code class="literal">2.8-3.0</code></td></tr></tbody></table></div></div><br class="table-break" /><p>There are also some variables to select the preferred
	versions from the available ones.  They can be set to a list
	of versions, the first ones will have higher
	priority.</p><div class="table"><a id="wx-widgets-preferred-version"></a><div class="table-title">Table 6.33. Variables to Select Preferred
	  <span class="application">wxWidgets</span> Versions</div><div class="table-contents"><table class="table" summary="Variables to Select Preferred&#10;&#9;  wxWidgets Versions" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Designed for</th></tr></thead><tbody><tr><td><code class="varname">WANT_WX_VER</code></td><td>the port</td></tr><tr><td><code class="varname">WITH_WX_VER</code></td><td>the user</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-components"></a>6.21.3. Component Selection</h3></div></div></div><p>There are other applications that, while not being
	<span class="application">wxWidgets</span> libraries, are related
	to them.  These applications can be specified in
	<code class="varname">WX_COMPS</code>.  These
	components are available:</p><div class="table"><a id="wx-widgets-components-table"></a><div class="table-title">Table 6.34. Available <span class="application">wxWidgets</span>
	  Components</div><div class="table-contents"><table class="table" summary="Available wxWidgets&#10;&#9;  Components" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th><th>Version restriction</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td>main library</td><td>none</td></tr><tr><td><code class="literal">contrib</code></td><td>contributed libraries</td><td><code class="literal">none</code></td></tr><tr><td><code class="literal">python</code></td><td><span class="application">wxPython</span>
		(<span class="application">Python</span> bindings)</td><td><code class="literal">2.8-3.0</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The dependency type can be selected for each component
	by adding a suffix separated by a semicolon.  If not present
	then a default type will be used (see
	<a class="xref" href="using-wx.html#wx-def-dep-types" title="Table 6.36. Default wxWidgets Dependency Types">Table 6.36, &#8220;Default <span class="application">wxWidgets</span>
	  Dependency Types&#8221;</a>).  These types
	are available:</p><div class="table"><a id="wx-widgets-dependency-table"></a><div class="table-title">Table 6.35. Available <span class="application">wxWidgets</span>
	  Dependency Types</div><div class="table-contents"><table class="table" summary="Available wxWidgets&#10;&#9;  Dependency Types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">build</code></td><td>Component is required for building, equivalent
		to <code class="varname">BUILD_DEPENDS</code></td></tr><tr><td><code class="literal">run</code></td><td>Component is required for running, equivalent
		to <code class="varname">RUN_DEPENDS</code></td></tr><tr><td><code class="literal">lib</code></td><td>Component is required for building and running,
		equivalent to <code class="varname">LIB_DEPENDS</code></td></tr></tbody></table></div></div><br class="table-break" /><p>The default values for the components are detailed in
	this table:</p><div class="table"><a id="wx-def-dep-types"></a><div class="table-title">Table 6.36. Default <span class="application">wxWidgets</span>
	  Dependency Types</div><div class="table-contents"><table class="table" summary="Default wxWidgets&#10;&#9;  Dependency Types" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Component</th><th>Dependency type</th></tr></thead><tbody><tr><td><code class="literal">wx</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">contrib</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">python</code></td><td><code class="literal">run</code></td></tr><tr><td><code class="literal">mozilla</code></td><td><code class="literal">lib</code></td></tr><tr><td><code class="literal">svg</code></td><td><code class="literal">lib</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="wx-components-example"></a><div class="example-title">Example 6.26. Selecting <span class="application">wxWidgets</span>
	  Components</div><div class="example-contents"><p>This fragment corresponds to a port which
	  uses <span class="application">wxWidgets</span> version
	  <code class="literal">2.4</code> and its contributed
	  libraries.</p><pre class="programlisting">USE_WX=		2.8
WX_COMPS=	wx contrib</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-version-detection"></a>6.21.4. Detecting Installed Versions</h3></div></div></div><p>To detect an installed version, define
	<code class="varname">WANT_WX</code>.  If it is not set to a
	specific version then the components will have a version
	suffix.  <code class="varname">HAVE_WX</code> will be
	filled after detection.</p><div class="example"><a id="wx-ver-det-example"></a><div class="example-title">Example 6.27. Detecting Installed
	  <span class="application">wxWidgets</span> Versions and
	  Components</div><div class="example-contents"><p>This fragment can be used in a port that uses
	  <span class="application">wxWidgets</span> if it is installed,
	  or an option is selected.</p><pre class="programlisting">WANT_WX=	yes

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WX) || !empty(PORT_OPTIONS:MWX) || !empty(HAVE_WX:Mwx-2.8)
USE_WX=			2.8
CONFIGURE_ARGS+=	--enable-wx
.endif</pre><p>This fragment can be used in a port that
	  enables <span class="application">wxPython</span> support if it
	  is installed or if an option is selected, in addition to
	  <span class="application">wxWidgets</span>, both version
	  <code class="literal">2.8</code>.</p><pre class="programlisting">USE_WX=		2.8
WX_COMPS=	wx
WANT_WX=	2.8

.include &lt;bsd.port.pre.mk&gt;

.if defined(WITH_WXPYTHON) || !empty(PORT_OPTIONS:MWXPYTHON) || !empty(HAVE_WX:Mpython)
WX_COMPS+=		python
CONFIGURE_ARGS+=	--enable-wxpython
.endif</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-defined-variables"></a>6.21.5. Defined Variables</h3></div></div></div><p>These variables are available in the port (after
	defining one from
	<a class="xref" href="using-wx.html#wx-ver-sel-table" title="Table 6.30. Variables to Select wxWidgets Versions">Table 6.30, &#8220;Variables to Select
	  <span class="application">wxWidgets</span> Versions&#8221;</a>).</p><div class="table"><a id="wx-widgets-variables"></a><div class="table-title">Table 6.37. Variables Defined for Ports That Use
	  <span class="application">wxWidgets</span></div><div class="table-contents"><table class="table" summary="Variables Defined for Ports That Use&#10;&#9;  wxWidgets" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">WX_CONFIG</code></td><td>The path to the
		<span class="application">wxWidgets</span>
		<code class="command">wx-config</code> script (with different
		name)</td></tr><tr><td><code class="varname">WXRC_CMD</code></td><td>The path to the
		<span class="application">wxWidgets</span>
		<code class="command">wxrc</code> program (with different
		name)</td></tr><tr><td><code class="varname">WX_VERSION</code></td><td>The <span class="application">wxWidgets</span>
		version that is going to be used (for example,
		<code class="literal">2.6</code>)</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-premk"></a>6.21.6. Processing in
	<code class="filename">bsd.port.pre.mk</code></h3></div></div></div><p>Define <code class="varname">WX_PREMK</code> to be able to use the
	variables right after including
	<code class="filename">bsd.port.pre.mk</code>.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">When defining <code class="varname">WX_PREMK</code>, then the
	  version, dependencies, components and defined variables
	  will not change if modifying the
	  <span class="application">wxWidgets</span> port variables
	  <span class="emphasis"><em>after</em></span> including
	  <code class="filename">bsd.port.pre.mk</code>.</p></div><div class="example"><a id="wx-premk-example"></a><div class="example-title">Example 6.28. Using <span class="application">wxWidgets</span> Variables
	  in Commands</div><div class="example-contents"><p>This fragment illustrates the use of
	  <code class="varname">WX_PREMK</code> by running the
	  <code class="command">wx-config</code> script to obtain the full
	  version string, assign it to a variable and pass it to the
	  program.</p><pre class="programlisting">USE_WX=		2.8
WX_PREMK=	yes

.include &lt;bsd.port.pre.mk&gt;

.if exists(${WX_CONFIG})
VER_STR!=	${WX_CONFIG} --release

PLIST_SUB+=	VERSION="${VER_STR}"
.endif</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">The <span class="application">wxWidgets</span> variables can
	  be safely used in commands when they are inside targets
	  without the need of <code class="varname">WX_PREMK</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="wx-additional-config-args"></a>6.21.7. Additional <code class="command">configure</code>
	Arguments</h3></div></div></div><p>Some GNU <code class="command">configure</code> scripts cannot
	find <span class="application">wxWidgets</span> with just the
	<code class="literal">WX_CONFIG</code> environment variable set,
	requiring additional arguments.
	<code class="varname">WX_CONF_ARGS</code> can be used for
	provide them.</p><div class="table"><a id="wx-conf-args-values"></a><div class="table-title">Table 6.38. Legal Values for
	  <code class="varname">WX_CONF_ARGS</code></div><div class="table-contents"><table class="table" summary="Legal Values for&#10;&#9;  WX_CONF_ARGS" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Possible value</th><th>Resulting argument</th></tr></thead><tbody><tr><td><code class="literal">absolute</code></td><td><code class="literal">--with-wx-config=${WX_CONFIG}</code></td></tr><tr><td><code class="literal">relative</code></td><td><code class="literal">--with-wx=${LOCALBASE}
		  --with-wx-config=${WX_CONFIG:T}</code></td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="using-sdl.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="special.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="using-lua.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.20. Using SDL </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 6.22. Using <span class="application">Lua</span></td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="https://download.freebsd.org/ftp/doc/">https://download.freebsd.org/ftp/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="https://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>