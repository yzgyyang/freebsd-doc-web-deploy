<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>FreeBSD 5.3-RELEASE Migrationsleitfaden</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content='text/html; charset="iso-8859-1"' />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">FreeBSD 5.3-RELEASE
Migrationsleitfaden</a></h1>

<div class="AUTHORGROUP"><a id="AEN4" name="AEN4"></a>
<h3 class="CORPAUTHOR">The FreeBSD Release Engineering Team</h3>
</div>

<p class="COPYRIGHT">Copyright &copy; 2002, 2003, 2004 The FreeBSD Release Engineering
Team</p>

<p class="PUBDATE">$FreeBSD$<br />
</p>

<div class="LEGALNOTICE"><a id="TRADEMARKS" name="TRADEMARKS"></a>
<p>FreeBSD ist ein eingetragenes Warenzeichen von Wind River Systems, Inc. Dies soll sich
bald ändern.</p>

<p>Apple, FireWire, Mac, Macintosh, Mac OS, Quicktime und TrueType sind eingetragene
Warenzeichen von Apple Computer, Inc., in den Vereinigten Staaten und anderen
Ländern.</p>

<p>IBM, AIX, EtherJet, Netfinity, OS/2, PowerPC, PS/2, S/390 und ThinPad sind
Warenzeichen der International Business Machines Corporation in den Vereinigten Staaten,
anderen Ländern oder beiden.</p>

<p>IEEE, POSIX und 802 sind eingetragene Warenzeichen vom Institute of Electrical and
Electronics Engineers, Inc. in den Vereinigten Staaten.</p>

<p>Intel, Celeron, EtherExpress, i386, i486, Itanium, Pentium und Xeon sind Warenzeichen
oder eingetragene Warenzeichen der Intel Corporation oder ihrer Gesellschaften in den
Vereinigten Staaten und in anderen Ländern.</p>

<p>Microsoft, FrontPage, MS-DOS, Outlook, Windows, Windows Media und Windows NT sind
entweder eingetragene Warenzeichen oder Warenzeichen der Microsoft Corporation in den
Vereinigten Staaten und/oder in anderen Ländern.</p>

<p>Sparc, Sparc64, SPARCEngine und UltraSPARC sind Warenzeichen von SPARC International,
Inc in den Vereinigten Staaten und in anderen Ländern. Produkte, die das
Warenzeichen SPARC tragen, basieren auf einer von Sun Microsystems, Inc. entwickelten
Architektur.</p>

<p>Viele Produktbezeichnungen von Herstellern und Verkäufern sind Warenzeichen.
Soweit dem FreeBSD Project das Warenzeichen bekannt ist, werden die in diesem Dokument
vorkommenden Bezeichnungen mit dem Symbol ``&trade;'' oder dem Symbol ``&reg;''
gekennzeichnet.</p>
</div>

<div>
<div class="ABSTRACT"><a id="AEN23" name="AEN23"></a>
<p>Dieser Leitfaden beschreibt die wesentlichen Unterschiede zwischen FreeBSD&nbsp;4.<var
class="REPLACEABLE">X</var> und FreeBSD 5.3-RELEASE aus Sicht eines Benutzers oder
Administrators, der ein existierendes System aktualisiert. Der Leitfaden beschreibt kurz
die vor und während einer Veröffentlichung ablaufenden Prozesse. Danach
beschreibt er die neuen Funktionen in FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var>
sowie Änderungen, die relevant für Benutzer sind, die bisher mit 4.<var
class="REPLACEABLE">X</var> Releases gearbeitet haben. Weiterhin beschreibt der Leitfaden
wie existierende Systeme mit Hilfe der Quellen oder mit Hilfe von Binärcode migriert
werden. Dieses Dokument erschien vor FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var>
unter dem Titel ``Hinweise für die ersten Anwender von
FreeBSD&nbsp;5.3-RELEASE''.</p>
</div>
</div>

<hr />
</div>

<div class="SECT1">
<h2 class="SECT1"><a id="INTRO" name="INTRO">1. Einführung</a></h2>

<p>Mit FreeBSD&nbsp;5.3-RELEASE startet eine neue Serie von ``FreeBSD-STABLE'' Releases.
Diese Release und künftige Releases der 5.<var class="REPLACEABLE">X</var>-Serie
sind wie die vorhergehenden 4.<var class="REPLACEABLE">X</var>-Releases für den
produktiven Einsatz gedacht.</p>

<p>Dieser Artikel wendet sich an Benutzer, die von 4.<var
class="REPLACEABLE">X</var>-Release auf 5.3-RELEASE migrieren. Zuerst wird beschrieben,
wie eine neue FreeBSD-Version veröffentlicht wird. Anschließend werden einige
der neuen Funktionen in FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> beschrieben. Der
wahrscheinlich wichtigste Abschnitt beschreibt die wesentlichen Änderungen, für
Benutzer sichtbare Änderungen oder Änderungen an externen Schnittstellen.
Zuletzt gibt der Artikel Hinweise, wie bestehende FreeBSD&nbsp;4.<var
class="REPLACEABLE">X</var>-Systeme mit Binärcode oder mit den Quellen auf
FreeBSD&nbsp;5.3-RELEASE migriert werden.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="RELEASE-OVERVIEW" name="RELEASE-OVERVIEW">2.
Veröffentlichung neuer FreeBSD-Versionen</a></h2>

<p>Das Prinzip der FreeBSD-Entwicklung ist die Verwendung mehrerer Entwicklungszweige
innerhalb eines ``CVS Repository''. Der Hauptzweig wird ``CURRENT'' genannt und innerhalb
des Repository mit dem symbolischen Namen <var class="LITERAL">HEAD</var> referenziert.
Neue Funktionen werden zunächst in diesen Zweig eingebracht. Auch wenn neue
Funktionen zuerst nur in CURRENT zur Verfügung stehen, bereitet dieser Zweig von
Zeit zu Zeit Kummer, während die Neuerungen getestet und ihre Fehler entfernt
werden.</p>

<p>Wenn eine neue FreeBSD-Version veröffentlicht wird, basiert diese in der Regel
auf einem der ``STABLE'' (stabil) genannten Entwicklungszweige. Neuerungen werden in
diese Entwicklungszweige übernommen, nachdem sie in CURRENT getestet wurden. In den
letzten zwei Jahren gab es nur einen aktiven STABLE-Entwicklungszweig: ``4-STABLE'';
dieser Zweig war die Grundlage für alle 4.<var class="REPLACEABLE">X</var>
Versionen. Dieser Zweig wird innerhalb des CVS Repository durch den symbolischen Namen
<var class="LITERAL">RELENG_4</var> gekennzeichnet.</p>

<p>Die letzten beiden STABLE-Entwicklungszweige (3-STABLE und 4-STABLE) wurden sehr
früh im Entwicklungsablauf (verzweigt wurde bei 3.1 und 4.0) erzeugt.
Rückblickend müssen wir feststellen, daß dadurch in beiden Fällen
nicht genug Zeit war, um CURRENT zu stabilisieren, bevor der neue Entwicklungszweig
eingerichtet wurde. Dies führte zu unnötiger Mehrarbeit, da Fehlerkorrekturen
von einem Zweig in den anderen Zweig übertragen werden mußten; außerdem
kam es zu einigen Änderungen in der Architektur, die nicht in den jeweils anderen
Zweig übernommen werden konnten.</p>

<p>Die 5.<var class="REPLACEABLE">X</var>-Releases wurden anders gehandhabt.
FreeBSD&nbsp;5.0, 5.1 und 5.2 wurden auf dem CURRENT-Zweig erzeugt. Das erste dieser
Releases wurde nach einer Entwicklungszeit von über zwei Jahren herausgegeben (das
letzte Release aus HEAD war FreeBSD&nbsp;4.0 im März&nbsp;2000).</p>

<p>Der ``5-STABLE-Zweig'' wurde im Gegensatz zu anderen ``STABLE-Zweigen'' erst ein Jahr
nach dem ersten 5.<var class="REPLACEABLE">X</var>-Release im CVS mit dem Tag <var
class="LITERAL">RELENG_5</var> erzeugt (während der Erstellung des 5.3 Releases).
Diese Verzögerung gab den Entwicklern Zeit, Änderungen an der Architektur
vorzunehmen, die Änderungen zu stabilisieren, Schnittstellen fertigzustellen und
damit einen guten Ausgangspunkt für weitere 5.<var
class="REPLACEABLE">X</var>-Releases zu schaffen.</p>

<p>Abgesehen von allgemeinen Verbesserungen und Fehlerbehebungen liegt die Priorität
bei der Entwicklung des 5-STABLE-Zweiges in der Beibehaltung der Application Binary
Interface (ABI) und der Kompatibilität der Application Program Interface (API).
Änderungen, die die Rückwärtskompatibilität gefährden, sind mit
Ausnahme von Fehlerbehebungen für kritische Fehler nicht erlaubt.</p>

<p>Das nächste CURRENT-Release aus dem CVS <var class="LITERAL">HEAD</var> wird
6.0-RELEASE sein. Zum Zeitpunkt von 5.3-Release steht noch nicht fest, wann 6.0
veröffentlicht wird, es wird mit dem Jahr&nbsp;2006 gerechnet.</p>

<p>Die Entwicklung des 4-STABLE-Zweiges wird begrenzt weitergeführt und es wird noch
mindestens ein Release (4.11) nach 5.3-RELEASE geben. Für besonders konservative
Anwender ist es sinnvoll, 4.<var class="REPLACEABLE">X</var>-Releases noch einige Zeit
weiter zu benutzen. Releases aus dem 4-STABLE-Zweig werden weiterhin vom Security Officer
Team <code class="EMAIL">&lt;<a
href="mailto:security-officer@FreeBSD.org">security-officer@FreeBSD.org</a>&gt;</code>
unterstützt. Die Wartungsenden finden Sie auf der Seite <a
href="http://www.FreeBSD.org/de/security/index.html" target="_top">Sicherheit</a> des
FreeBSD-Webauftritts.</p>

<p>Weitere Informationen über den Ablauf bei der Veröffentlichung einer neuen
FreeBSD Version finden Sie auf den <a href="http://www.FreeBSD.org/releng/index.html"
target="_top">Release Engineering Web pages</a> und im Artikel <a
href="http://www.FreeBSD.org/doc/de_DE.ISO8859-1/articles/releng/index.html"
target="_top">FreeBSD Release Engineering</a>.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="NEW" name="NEW">3. Neuerungen</a></h2>

<p>Die Glanzpunkte von FreeBSD 5.<var class="REPLACEABLE">X</var> sind die vielen
Neuerungen. Diese Neuerungen und die neue Funktionalität basieren zum
größten Teil auf massiven Änderungen der Systemarchitektur, die nicht in
den Entwicklungszweig 4-STABLE eingepflegt wurden. Viele in sich abgeschlossene
Änderungen wie neue oder aktualisierte Gerätetreiber oder neue
Benutzerprogramme wurden dagegen schon nach 4-STABLE übernommen. Die folgende Liste
enthält eine kurze Übersicht über die wichtigsten Neuerungen:</p>

<ul>
<li>
<p>SMPng: Die ``nächste Generation'' der Unterstützung für
Mehrprozessorsysteme (SMP). Die Arbeit konzentriert sich zur Zeit darauf, Locks für
möglichst kleine Bereiche der diversen Subsysteme des Kernels zu implementieren,
damit möglichst viele Vorgänge (Threads) gleichzeitig im Kernel ablaufen
können. Dabei wurde besonderes auf die Geschwindigkeit des Netzwerk-Stacks geachtet.</p>
</li>

<li>
<p>KSE: Die ``Kernel Scheduled Entities'' erlauben es einem Prozess, mehrere Threads auf
Kernel-Ebene zu nutzen, analog zur Aktivierung via Scheduler. Die Bibliotheken <tt
class="FILENAME">libpthread</tt> und <tt class="FILENAME">libthr</tt> erlauben auch
normalen Programmen mit mehreren Threads, diese Erweiterung über die <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pthread&sektion=3&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">pthread</span>(3)</span></a> API
zu nutzen. Die voreingestellte Thread-Library ist nun <tt
class="FILENAME">libpthread</tt>.</p>
</li>

<li>
<p>Neue Plattformen: Zusätzlich zu i386 und alpha werden jetzt auch amd64, ia64,
pc98 und sparc64 Systeme unterstützt. An den Plattformen powerpc (läuft auf
<span class="TRADEMARK">PowerPC</span>&reg;-basierenden Systemen von <span
class="TRADEMARK">Macintosh</span>&reg;) und arm wird gearbeitet.</p>
</li>

<li>
<p>GCC: Der Compiler und die dazugehörigen Werkzeuge basieren jetzt auf GCC 3.4.<var
class="REPLACEABLE">X</var> und nicht mehr auf GCC 2.95.<var
class="REPLACEABLE">X</var>.</p>
</li>

<li>
<p>MAC: Unterstützung für erweiterbare ``Mandatory Access Control''
Regelwerke.</p>
</li>

<li>
<p>GEOM: Ein flexibles, modulares Gerüst zur Manipulation des Datentransfers von und
zu Festplatten. Das System bietet einige Funktionen für Laufwerke: Erkennen von
Partitionen, <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">gbde</span>(4)</span></a> ein
Modul zur Verschlüsselung des Festplatteninhaltes, verschiedene RAID-Level, den
Export von Laufwerken (mit <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ggated&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ggated</span>(8)</span></a> und
verwandten Werkzeugen) und transparenter Dekompression von Laufwerken.</p>
</li>

<li>
<p>FFS: Das Dateisystem unterstützt jetzt Hintergrund-<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fsck</span>(8)</span></a> (um das
System nach einem Absturz schneller verfügbar zu machen) sowie
``Schnappschüsse''.</p>
</li>

<li>
<p>UFS2: Dieses neue Dateisystem unterstützt größere Dateien und
zusätzliche Dateiberechtigungen. <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a> erzeugt
jetzt standardmäßig UFS2 Dateisysteme und auf allen Plattformen außer
pc98 gilt dies auch für Dateisysteme, die mit <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
erzeugt werden.</p>
</li>

<li>
<p>Neue Netzwerkfunktionen: In den 5.<var class="REPLACEABLE">X</var>-Releases wurden
neue Funktionen hinzugefügt, unter anderem: Unterstützung für TCP SACK
(selective acknowledgements), der <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=pf&sektion=4&manpath=FreeBSD+5.3-RELEASE"><span
 class="CITEREFENTRY"><span class="REFENTRYTITLE">pf</span>(4)</span></a> Paketfilter von
OpenBSD und das ALTQ Packet Queueing System.</p>
</li>

<li>
<p>Neue Hardware: Es wird mehr Hardware, wie Cardbus, Bluetooth-Geräte und IEEE
802.11a/b/g Netzwerkkarten auf Basis von Atheros-Chipsätzen, unterstützt. Auf
i386-Systemen können mit Hilfe des <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&sektion=4&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">ndis</span>(4)</span></a>-Treibers
einige Netzwerkkarten, für die es keinen FreeBSD-Treiber gibt, mit dem Treiber
für <span class="TRADEMARK">Microsoft</span>&reg; <span
class="TRADEMARK">Windows</span>&reg; benutzt werden.</p>
</li>
</ul>

<p>Eine ausführlichere Übersicht über die Neuerungen finden Sie in den
``Release Notes'' für die verschiedenen FreeBSD 5.<var class="REPLACEABLE">X</var>
Versionen.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="DRAWBACKS" name="DRAWBACKS">4. Beachtenswerte
Änderungen</a></h2>

<p>Einige der Unterschiede zwischen FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var> und
FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> müssen besonders herausgestellt
werden, das sie Änderungen der Architektur sind oder nicht
rückwärtskompatibel sind. Auch wenn diese Änderungen keinen Datenverlust
verursachen, können sie doch zu Verwirrung führen. Einige beachtenswerte
Änderungen sind in der folgenden Liste zusammengefaßt:</p>

<ul>
<li>
<p>Einige Teile des FreeBSD Basissystems wurden in die Ports Collection verschoben, weil
sie so leichter zu warten sind oder weil sie nicht wirklich ein essentieller Bestandteil
des Basissystems waren. Dazu gehört insbesondere <b class="APPLICATION">Perl</b> (in
der Ports-Collection unter <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/lang/perl5.8/pkg-descr"><tt
class="FILENAME">lang/perl5.8</tt></a>), das wegen der Lage im Basissystem
Aktualisierungen des Systems erschwerte. Werkzeuge des Basissystems, die früher auf
<b class="APPLICATION">Perl</b> angewiesen waren, wurden entweder neu geschrieben (wenn
sie noch gebraucht werden) oder entfernt (weil sie überflüssig sind).</p>

<p>Weitere Beispiele sind <b class="APPLICATION">UUCP</b> (in den Ports unter <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/net/freebsd-uucp/pkg-descr"><tt
class="FILENAME">net/freebsd-uucp</tt></a>), das Werkzeug <tt class="COMMAND">doscmd</tt>
und viele der althergebrachten Spiele (<a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/games/freebsd-games/pkg-descr"><tt
class="FILENAME">games/freebsd-games</tt></a>).</p>
</li>

<li>
<p>Durch die Änderungen in den Datenstrukturen des Kernels und der Schnittstellen
für Anwendungen und Programmierer (ABI/API), mußten Treiber anderer Hersteller
angepaßt werden, damit sie korrekt mit FreeBSD&nbsp;5.<var
class="REPLACEABLE">X</var> 5.0 zusammenarbeiten. In einigen (hoffentlich seltenen)
Fällen haben sich für den Anwender sichtbare Datenstrukturen geändert, die
es erfordern, Anwendungen neu zu kompilieren und/oder Ports und Pakete neu zu
installieren. Wie schon in den 4.<var class="REPLACEABLE">X</var>-Releases will das
FreeBSD-Entwicklerteam inkompatible Änderungen in künftigen Releases auf dem
5.<var class="REPLACEABLE">X</var>-Zweig verhindern.</p>
</li>

<li>
<p>Einige Teile des FreeBSD-Basissystems wurden nicht mehr gepflegt, weil es nicht
genügend Anwender und/oder Entwickler gab. Diese Teile wurden entfernt. dazu
zählen unter anderem die Erzeugung von Programmen im Format <tt
class="FILENAME">a.out</tt>, <a id="AEN161" name="AEN161" href="#FTN.AEN161"><span
class="footnote">[1]</span></a> die XNS-Netzwerkprotokolle und der Treiber für den
X-10 Controller. Einige Treiber für alte ISA-Karten waren kaputt und wurden
entfernt. Einzelheiten entnehmen Sie bitte den Release-Notes.</p>
</li>

<li>
<p>Unter FreeBSD/i386 4.<var class="REPLACEABLE">X</var> wurden ISA-Geräte in der
Kernelkonfigurationsdatei konfiguriert. Die Konfiguration konnte beim Systemstart mit dem
interaktiven Werkzeug <b class="APPLICATION">UserConfig</b> geändert werden. Unter
FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> wurden beide Mechanismen durch <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">device.hints</span>(5)</span></a>
ersetzt. Dadurch müssen ISA-Geräte nicht mehr fest im Kernel konfiguriert
werden. Die Konfiguration von ISA-Geräten zur Zeit des Systemstarts ist nicht mehr
menügeführt, sondern wird im Boot-Loader vorgenommen.</p>
</li>

<li>
<p>Es gibt kein <tt class="FILENAME">MAKEDEV</tt> mehr und es wird auch nicht mehr
benötigt. FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> benutzt ein spezielles
Dateisystem für Geräte, das die entsprechenden Gerätedateien bei Bedarf
automatisch erzeugt. Gerätedateien werden mit dem Werkzeug <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(8)</span></a> oder
über die Datei <tt class="FILENAME">/etc/devfs.conf</tt> konfiguriert. Weiteres
entnehmen Sie bitte der Hilfeseite <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">devfs</span>(5)</span></a>.</p>
</li>

<li>
<p>Alle mit <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a>
erzeugten Dateisysteme werden standardmäßig im Format UFS2 angelegt. Dies gilt
auf allen Plattformen außer pc98 auch für Dateisysteme, die mit <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
erzeugt werden. Da FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var> nur UFS1 lesen kann,
müssen alle Dateisysteme, die sowohl mit 4.<var class="REPLACEABLE">X</var> als auch
mit 5.<var class="REPLACEABLE">X</var> nutzbar sein sollen, im Format UFS1 erzeugt
werden. In <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">newfs</span>(8)</span></a> steht
dazu die Option <var class="OPTION">-O1</var> zur Verfügung, auch <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
enthält eine entsprechende Option. Dieser Fall tritt typischerweise auf Systemen
auf, auf denen 4.<var class="REPLACEABLE">X</var> und 5.<var class="REPLACEABLE">X</var>
installiert und abwechselnd betrieben werden. Bitte beachten Sie, daß es kein
Programm zur Umwandlung von UFS1 nach UFS2 (oder umgekehrt) gibt, nur die Variante
Backup, Formatieren, Restore.</p>
</li>

<li>
<p>Wegen des aktualisierten <b class="APPLICATION">GCC</b> Compilers müssen generell
alle C++ Programme neu übersetzt und neu installiert werden. Die Ursache sind
ABI-Änderungen in C++.</p>
</li>

<li>
<p>Es ist zwar möglich, für 4.<var class="REPLACEABLE">X</var> geschriebene
Programme unter 5.<var class="REPLACEABLE">X</var> zu nutzen, allerdings muß dazu
die Distribution <tt class="FILENAME">compat4x</tt> (oder der Port <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/misc/compat4x/pkg-descr"><tt
class="FILENAME">misc/compat4x</tt></a>) installiert sein. Wenn aber einer der
installierten Ports aktualisiert werden muss, empfehlen wir generell <span
class="emphasis"><i class="EMPHASIS">alle</i></span> installierten Ports neu zu bauen und
neu zu installieren. Dies verhindert Probleme mit Programmen, die gegen eine Mischung aus
neuen und alten Bibliotheken gebunden sind. Das Werkzeug <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/sysutils/portupgrade/pkg-descr"><tt
class="FILENAME">sysutils/portupgrade</tt></a> kann Ihnen bei der Neuinstallation von
Ports behilflich sein.</p>

<p>Es gibt Ports, die nicht rückwärtskompatibel sind, beispielsweise <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/devel/gnomevfs2/pkg-descr"><tt
class="FILENAME">devel/gnomevfs2</tt></a>, <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/mail/postfix/pkg-descr"><tt
class="FILENAME">mail/postfix</tt></a> und <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/security/cfs/pkg-descr"><tt
class="FILENAME">security/cfs</tt></a>. Diese Ports müssen wegen Änderungen in
der <var class="LITERAL">statfs</var>-Struktur neu übersetzt werden.</p>
</li>

<li>
<p>Die Datei <tt class="FILENAME">host.conf</tt>, mit der Namensdienste (Resolver)
konfiguriert wurden, ist durch die (allgemeinere) Datei <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nsswitch.conf&sektion=5&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nsswitch.conf</span>(5)</span></a>
ersetzt worden.</p>
</li>

<li>
<p><b class="APPLICATION">BIND</b> wurde von Version&nbsp;8 auf die Version&nbsp;9
aktualisiert. Zwischen BIND&nbsp;8 und BIND&nbsp;9 gibt es viele Unterschiede. Wenn Sie
<a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
produktiv einsetzen, sollten Sie die Migrationsanleitung <tt
class="FILENAME">/usr/share/doc/bind9/misc/migration</tt> lesen. Im Verzeichnis <tt
class="FILENAME">/usr/share/doc/bind9/arm</tt> befindet sich das neue
Adminstrator-Handbuch. Benutzer mit bestehenden <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">named</span>(8)</span></a>-Konfigurationen sollten das Verzeichnis
<tt class="FILENAME">/var/named</tt> vor der Migration sichern. Dies verhindert,
daß Dateien vom <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">named</span>(8)</span></a>-Startskript überschrieben
werden.</p>
</li>

<li>
<p>Ab 5.3-RELEASE ist in FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> <b
class="APPLICATION">Xorg</b> als X-Window-System voreingestellt. Zur Zeit bleibt <b
class="APPLICATION"><span class="TRADEMARK">XFree86</span>&trade;</b> die Vorgabe
für FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var>. Die Unterschiede zwischen
beiden Versionen und eine Migrationsanleitung für bestehende Systeme beschreibt das
Kapitel <a href="http://www.FreeBSD.org/doc/de_DE.ISO8859-1/books/handbook/x11.html"
target="_top">Das X-Window-System</a> des Handbuchs.</p>
</li>

<li>
<p>Die Dokumentation (wie z.B. das FreeBSD <a
href="http://www.FreeBSD.org/doc/de_DE.ISO8859-1/books/handbook/index.html"
target="_top">Handbuch</a> und der <a
href="http://www.FreeBSD.org/doc/de_DE.ISO8859-1/books/faq/index.html"
target="_top">FAQ</a>) ist teilweise noch nicht auf dem Stand von FreeBSD&nbsp;5.<var
class="REPLACEABLE">X</var>.</p>
</li>
</ul>

<p>Weitere Informationen enthalten die Release-Notes der verschiedenen
FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> Releases und die Datei <tt
class="FILENAME">src/UPDATING</tt> im FreeBSD-Quellbaum. Beachtenswerte Änderungen
der Ports-Collection werden in den Dateien <tt class="FILENAME">ports/UPDATING</tt> und
<tt class="FILENAME">ports/CHANGES</tt> im Ports-Baum beschrieben.</p>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="UPGRADE" name="UPGRADE">5. Hinweise für die Aktualisierung
von FreeBSD 4.<var class="REPLACEABLE">X</var></a></h2>

<p>Dieses Kapitel enthält Hinweise für Anwender, die ihr bestehendes FreeBSD
4.<var class="REPLACEABLE">X</var> System auf FreeBSD 5.<var class="REPLACEABLE">X</var>
aktualisieren wollen. Wie bei jeder Aktualisierung ist es auf jeden Fall notwendig,
vorher die Release Notes und die Errata der neuen Version zu lesen; bei Aktualisierung
über den Quellcode ist <tt class="FILENAME">src/UPDATING</tt>
Pflichtlektüre.</p>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN268" name="AEN268">5.1. Aktualisierung ohne
Quellcode</a></h3>

<p>Der einfachste Ansatz ist immer noch ``Sicherheitskopien erstellen, Platte
formatieren, neues System installieren, Benutzerdaten wieder einspielen''. Dadurch werden
alle Probleme mit veralteten und nicht kompatiblen Programmen und Konfigurationsdateien
umgangen. Die neuen Dateisysteme können maximalen Nutzen aus den diversen Neuerungen
(speziell UFS2) ziehen.</p>

<p>Zum gegenwärtigen Zeitpunkt ist die ``Upgrade''-Option in <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">sysinstall</span>(8)</span></a>
zur Migration auf eine neue Hauptversion unzureichend getestet. Wir raten daher dringend
von der Verwendung dieser Funktion ab.</p>

<p>Einige Änderungen betreffen vielleicht Benutzer der FreeBSD&nbsp; 4.<var
class="REPLACEABLE">X</var> Startmedien. Die Installationsdisketten sind (auf
Plattformen, wie i386, die Disketten unterstützen) anders aufgebaut. Unter 4.<var
class="REPLACEABLE">X</var> Releases enthielten die Startdisketten einen Mini-Kernel, der
gerade ausreichte, um das System zu installieren. Mit dieser Aufteilung konnte der Kernel
auf einer einzigen Diskette gespeichert werden, doch fehlten unter Umständen Treiber
für bestimmte Hardware-Konfigurationen. Ab FreeBSD 5.3-RELEASE enthalten die
Startdisketten einen <var class="LITERAL">GENERIC</var>-Kernel, der über mehrere
Disketten verteilt ist und mehr Treiber und mehr Funktionen enthält. Der Boot-Loader
fordert das Einlegen weiterer Disketten an. Benutzer, die Installationsdisketten
herunterladen (vielleicht um eine Netzwerkinstallation durchzuführen), sollten
beachten, daß es jetzt drei Installationsdisketten gibt: <tt
class="FILENAME">boot.flp</tt>, <tt class="FILENAME">kern1.flp</tt> und <tt
class="FILENAME">kern2.flp</tt>.</p>

<p>Bei einer Installation von CD-ROM auf einem <span
class="TRADEMARK">i386</span>&trade;-System wird jetzt ein neues Startprogramm mit dem
Namen ``no-emulation boot loader'' genutzt. Dadurch ist es unter anderem möglich,
auf der CD den Standardkernel (<var class="LITERAL">GENERIC</var>) statt des auf den
Disketten verwendeten Mini-Kernels zu nutzen. Jedes System, das von den Installations-CDs
für <span class="TRADEMARK">Microsoft</span> <span
class="TRADEMARK">Windows&nbsp;NT</span>&reg;&nbsp;4.0 booten kann, sollte auch mit den
FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> CD-ROMs zurechtkommen.</p>
</div>

<div class="SECT2">
<hr />
<h3 class="SECT2"><a id="AEN291" name="AEN291">5.2. Aktualisierung mit Quellcode</a></h3>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Anmerkung:</b> Viele Benutzer und Entwickler bevorzugen eine einfachere Art der
Installation. Sichern Sie alle Daten und Konfigurationsdateien und installieren Sie das
System mit Binärdateien (beispielsweise von einer CD-ROM). Spielen Sie
anschließend die gesicherten Daten zurück. Verglichen mit einer Installation
über den Quellcode, müssen Sie sich bei diesem Verfahren nicht um alte Dateien
und Programme kümmern und Sie können neue Funktionen, wie das UFS2-Dateisystem
benutzen.</p>

<p>Benutzer, die nicht mit der Bauprozedur (<var class="LITERAL">buildworld</var>/<var
class="LITERAL">installworld</var>) vertraut sind, sollten <span class="emphasis"><i
class="EMPHASIS">nicht</i></span> mit dem Quellcode aktualisieren und stattdessen nach
einer Datensicherung mit Binärdateien installieren.</p>
</blockquote>
</div>

<p>Eine Aktualisierung mit Quellcode baut und installiert Binärdateien aus lokal auf
der Maschine liegenden Quellcode. Die Aktualisierung beruht auf der <var
class="LITERAL">buildworld</var>/<var class="LITERAL">installworld</var> Prozedur, die
von erfahrenen Benutzern verwendet wird, um Änderungen in einem Entwicklungszweig
(wie FreeBSD-STABLE oder FreeBSD-CURRENT) zu verfolgen. Allgemein ist diese Prozedur
aufwendiger als die Installation mit Binärdateien, sie kann aber nützlich sein,
wenn die Systemkonfiguration komplex oder stark angepaßt ist. Eine Aktualisierung
mit Quellcode ist auch nützlich für ein entferntes System, auf das der
Administrator keinen Zugriff hat und daher auch keine Installationsmedien einlegen
kann.</p>

<p>Es ist auf jeden Fall erforderlich, vor der Aktualisierung <tt
class="FILENAME">src/UPDATING</tt> zu lesen. Der Abschnitt ``To upgrade in-place from
4.x-stable to current'' enthält eine Schritt-für-Schritt Anleitung, der Sie
unbedingt folgen müssen, die Nutzung der üblichen ``Abkürzungen'' ist
nicht möglich. Die folgende Liste beschreibt und kommentiert die nötigen
Schritte:</p>

<ol type="1">
<li>
<p>Sichern Sie Ihre Daten.</p>

<p>Die Wichtigkeit dieses Schrittes kann nicht oft genug betont werden. Es ist wichtig,
Sicherungen von allen Benutzerdaten und Konfigurationsdateien zu erstellen. Volle
Sicherungen (Level 0) mit <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">dump</span>(8)</span></a> sind
dafür geeignet, es gibt allerdings auch andere Möglichkeiten.</p>
</li>

<li>
<p>Stellen Sie sicher, daß im <tt class="FILENAME">/</tt>-Dateisystem ungefähr
30&nbsp;MB frei sind.</p>

<p>FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> benötigt mehr Platz als
FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var>. Wenn das Verzeichnis <tt
class="FILENAME">/tmp</tt> im <tt class="FILENAME">/</tt>-Dateisystem liegt (was oft der
Fall ist), können Sie Platz schaffen, indem Sie alle Dateien in diesem Verzeichnis
löschen.</p>
</li>

<li>
<p>Wenn nötig, editieren Sie <tt class="FILENAME">/etc/fstab</tt>.</p>

<p>Dieser Punkt betrifft wahrscheinlich nur ältere FreeBSD/i386 Systeme. Auf
Systemen, die Disk-Slices mit MBRs besitzen, unterstützte FreeBSD sogenannte
``compatibility slices''. Der Name dieser Slices war etwa <tt
class="FILENAME">/dev/ad0a</tt> (ohne ausdrücklich die Slice zu benennen). Diese
Slices werden nicht mehr unterstützt. Slices müssen Namen wie <tt
class="FILENAME">/dev/ad0s1a</tt> tragen. Der Name muss das Laufwerk, die Nummer der
Slice und den Buchstaben der Partition enthalten.</p>

<p>Beachten Sie, daß ``compatibility slices'' seit FreeBSD 2.2.6-RELEASE nicht mehr
benutzt werden. Ignorieren Sie diesen Punkt wenn Sie FreeBSD/alpha Systeme oder Systeme
mit ``dangerously dediated'' Platten benutzen.</p>
</li>

<li>
<p>Besorgen Sie sich, beispielsweise mit CVS, eine Kopie der Quellen des Basissystems
(das Modul <tt class="FILENAME">src/</tt>). Mit CVS benutzen Sie für FreeBSD
5.3-RELEASE das Tag <var class="LITERAL">RELENG_5_3_0_RELEASE</var>, für den
5.3-Zweig (in dem Fehlerbehebungen stattfinden) nehmen Sie das Tag <var
class="LITERAL">RELENG_5_3</var>. Wenn Sie den 5-STABLE-Zweig verfolgen wollen, verwenden
Sie das Tag <var class="LITERAL">RELENG_5</var>. Falls Sie die Quellen mit CVS
auschecken, vergessen Sie nicht die Option <var class="OPTION">-P</var> anzugeben, damit
CVS leere Verzeichnisse entfernt.</p>
</li>

<li>
<p>FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> benötigt einige neue
Einträge in der Paßwort- und Gruppendatei. Erzeugen Sie diese Einträge
mit Hilfe des nachstehenden Kommandos:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mergemaster -p</kbd>
</pre>

<p>Dieser Schritt muß ausgeführt werden, damit neue Dateien dem richtigen
Benutzerkonto und der richtigen Gruppe gehören.</p>

<p>Beachten Sie, daß in FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> das
Werkzeug <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(8)</span></a> von
<tt class="FILENAME">/sbin/nologin</tt> nach <tt class="FILENAME">/usr/sbin/nologin</tt>
verschoben wurde. Die Login-Shell einiger Pseudo-Benutzer ist <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=nologin&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">nologin</span>(8)</span></a> daher
entstehen weitere Unterschiede in <tt class="FILENAME">/etc/passwd</tt>.</p>
</li>

<li>
<p>Bauen Sie mit dem nachstehenden Kommando die Benutzerwerkzeuge (Userland):</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/src</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make buildworld</kbd>
</pre>

<p>Wenn die Variable <var class="VARNAME">CPUTYPE</var> in <tt
class="FILENAME">/etc/make.conf</tt> definiert wird, sollte sie mit Operator <var
class="LITERAL">?=</var> definiert werden. Damit kann der <var
class="LITERAL">buildworld</var>-Prozeß, falls es nötig sein sollte, die
Variable überschreiben.</p>

<p>Beachten Sie, daß <var class="VARNAME">MAKEOBJDIRPREFIX</var> <span
class="emphasis"><i class="EMPHASIS">nicht</i></span> in <tt
class="FILENAME">/etc/make.conf</tt> definiert werden darf.</p>

<p>Allgemein sollten die meisten der Bauoptionen in <tt
class="FILENAME">/etc/make.conf</tt> auskommentiert oder entfernt sein. Besonders gilt
das für Optionen, die direkt Bau- oder Basisfunktionen des Systems beeinflussen (wie
<var class="VARNAME">NO_TOOLCHAIN</var>).</p>
</li>

<li>
<p>Bauen und installieren Sie einen neuen Kernel:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make buildkernel</kbd>
</pre>

<p>Das <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=make&sektion=1&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">make</span>(1)</span></a>-Ziel
<var class="LITERAL">buildkernel</var> muß verwendet werden, damit der neue Kernel
mit den im vorigen Schritt (<var class="LITERAL">buildworld</var>) erzeugten
Benutzerwerkzeugen gebaut wird. Sie können die Bauumgebung nicht manuell mit dem
Werkzeug <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=config&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">config</span>(8)</span></a>
erzeugen.</p>

<p>Auch wenn es praktisch ist, in diesem Schritt einen angepaßten Kernel zu
erzeugen, sollten Sie das System mit einem <var class="LITERAL">GENERIC</var>-Kernel
aktualisieren. Diese Vorgehensweise ist weniger fehleranfällig. Wenn Sie das erste
Mal einen angepaßten Kernel erstellen, benutzen Sie bitte den <var
class="LITERAL">GENERIC</var>-Kernel von FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var>
als Vorlage, da viele Treiber und Optionen neu sind oder sich geändert haben. Auf
jeden Fall sollten Sie die Option <var class="LITERAL">COMPAT_FREEBSD4</var> in die
Kernelkonfiguration aufnehmen, da die Option Voraussetzung für eine erfolgreiche
Aktualisierung ist.</p>
</li>

<li>
<p>Erzeugen Sie mit einer Variante des folgenden Kommandos für ISA-Geräte die
Datei <tt class="FILENAME">device.hints</tt>. Setzen Sie für <var
class="REPLACEABLE">MACHINE</var> den Namen der passenden Architektur (beispielsweise
<var class="LITERAL">i386</var>) ein.</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cp sys/<var
class="REPLACEABLE">MACHINE</var>/conf/GENERIC.hints /boot/device.hints</kbd>
</pre>

<p>Mit moderner Hardware kann die Datei <tt class="FILENAME">device.hints</tt> leer sein.
Auf Systemen mit non-PNP ISA-Karten (hier muß die Datei angepaßt werden),
Systemen ohne PNPBIOS oder PNPBIOS-Systemen, die mit Disketten gestartet werden, ist die
Datei zwingend erforderlich.</p>
</li>

<li>
<p>Installieren Sie den neuen Kernel:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make installkernel</kbd>
</pre>

<p>Unter FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var> wurde der Kernel in <tt
class="FILENAME">/kernel</tt> installiert. Unter FreeBSD&nbsp;5.<var
class="REPLACEABLE">X</var> wird der Kernel nach <tt
class="FILENAME">/boot/kernel/kernel</tt> installiert. Kernelmodule wurden unter
FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var> in das Verzeichnis <tt
class="FILENAME">/modules</tt> installiert, unter FreeBSD&nbsp;5.<var
class="REPLACEABLE">X</var> werden die Module in das Verzeichnis <tt
class="FILENAME">/boot/kernel</tt> installiert.</p>
</li>

<li>
<p>Installieren Sie den FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> Boot-Loader:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/src/sys/boot</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make STRIP="" install</kbd>
</pre>

<p>Wir empfehlen diesen Schritt, obwohl er optional ist, auszuführen.</p>
</li>

<li>
<p>Deaktivieren Sie Module Dritter (wie die für VMware). Dies verhindert
Abstürze auf Grund geänderter Kernel-ABIs oder anderen
Inkompatibilitäten.</p>
</li>

<li>
<p>Booten Sie das System in den Einbenutzermodus. Sie müssen das System in diesem
Schritt wirklich neu starten, da der neue Kernel laufen muß, um die
Benutzerwerkzeuge zu installieren. Da nur die erforderlichen Prozesse laufen, verringert
der Einbenutzermodus wirksam das Auftreten unerwarteter Ereignisse.</p>
</li>

<li>
<p>Hängen Sie die erforderlichen Dateisysteme ein:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">fsck -p</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -uw /</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mount -at ufs</kbd>
</pre>

<p>Das Kommando <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">fsck</span>(8)</span></a> ist
erforderlich, damit einige Felder im Superblock der Dateisysteme auf FreeBSD&nbsp;5.<var
class="REPLACEABLE">X</var> angepaßt werden. Wenn die Systemzeit die lokale Zeit
anstelle von UTC verwendet, führen Sie auch noch den nachstehenden Befehl aus:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">adjkerntz -i</kbd>
</pre>

<p>In diesem Schritt kann die folgende Meldung mehrmals auf der Systemkonsole
erscheinen:</p>

<pre class="SCREEN">
WARNING: userland calling deprecated sysctl, please rebuild world
</pre>

<p>Ignorieren Sie diese Meldung.</p>
</li>

<li>
<p>Löschen Sie die C++ Header-Dateien:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">rm -rf /usr/include/g++</kbd>
</pre>

<p>Dieser Schritt verhindert, daß bei künftigen Compiler-Läufen alte
Header vom <b class="APPLICATION">GCC</b>&nbsp;2.95 C++&nbsp;Compiler angezogen
werden.</p>
</li>

<li>
<p>Installieren Sie die Benutzerwerkzeuge (Userland):</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /usr/src</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">make installworld</kbd>
</pre>
</li>

<li>
<p>Auf Systemen, die <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">named</span>(8)</span></a>
verwenden, müssen die <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=named&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">named</span>(8)</span></a>-Konfigurationsdateien in die <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span
class="REFENTRYTITLE">chroot</span>(8)</span></a>-Umgebung im Verzeichnis <tt
class="FILENAME">/var/named</tt> geschoben werden. Befinden sich im Verzeichnis <tt
class="FILENAME">/var/named</tt> schon Dateien, sollten Sie diese jetzt sichern.</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /etc</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mv named named.bak</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mkdir -p /var/named/etc/namedb</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cp -Rp named.bak/* /var/named/etc/namedb</kbd>
</pre>

<p>Falls die Konfiguration die erzeugten Dateien für <tt
class="FILENAME">localhost</tt> verwendet, generieren Sie die Dateien mit den
nachstehenden Kommandos neu:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">cd /var/named/etc/namedb</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">/bin/sh make-localhost</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">rm -f localhost-v6.rev localhost.rev</kbd>
</pre>
</li>

<li>
<p>Aktualisieren Sie die Konfigurationsdateien des Systems:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">mergemaster -i</kbd>
</pre>

<p>Dieser Schritt ist zwingend erforderlich. Der Schritt gewährleistet, daß
die Start- und Konfigurationsdateien im Verzeichnis <tt class="FILENAME">/etc</tt> zu dem
frisch installierten System passen.</p>

<p>Nach dem Lauf von <a
href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&sektion=8&manpath=FreeBSD+5.3-RELEASE">
<span class="CITEREFENTRY"><span class="REFENTRYTITLE">mergemaster</span>(8)</span></a>
sollten Sie die Datei <tt class="FILENAME">/etc/rc.conf</tt> untersuchen und
möglicherweise anpassen. Die Vorgabewerte einiger Variablen haben sich
geändert, insbesondere wurden einige Dienste, die in 4.<var
class="REPLACEABLE">X</var> aktiviert waren, in 5.<var class="REPLACEABLE">X</var>
deaktiviert.</p>
</li>

<li>
<p>Entfernen Sie übrig gebliebene Dateien von <b class="APPLICATION">BIND 8</b>:</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">rm /usr/bin/dnskeygen /usr/bin/dnsquery</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">rm /usr/libexec/named-xfer</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">rm /usr/sbin/named.restart /usr/sbin/ndc</kbd>
</pre>
</li>

<li>
<p>Starten Sie das System neu.</p>
</li>
</ol>

<p>Nachdem Sie das Basissystem migriert haben, müssen Sie noch einige Komponenten,
die nicht zum Basissystem gehören, aktualisieren. <b class="APPLICATION">Perl</b>
ist nicht mehr Teil des Basissystems und sollte aus der Ports-Collection (der Port <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/lang/perl5.8/pkg-descr"><tt
class="FILENAME">lang/perl5.8</tt></a>) oder als Paket nachinstalliert werden. Danach
müssen alle Ports oder Pakete, die von Perl abhängen, neu installiert
werden.</p>

<p>Wenn Sie FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var> Programme laufen lassen
wollen, benötigen Sie Kompatibilitätsbibliotheken. Diese können Sie mit
dem Port oder Paket <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/misc/compat4x/pkg-descr"><tt
class="FILENAME">misc/compat4x</tt></a> installieren.</p>

<p>Wie oben erwähnt, wird <b class="APPLICATION">Xorg</b> in der Voreinstellung als
X-Window-System verwendet. Die Ports und Pakete beachten diese Änderung, um
Abhängigkeiten zwischen Software zu bestimmen. Die Migration von <b
class="APPLICATION"><span class="TRADEMARK">XFree86</span></b> auf <b
class="APPLICATION">Xorg</b> beschreibt das Handbuchkapitel <a
href="http://www.FreeBSD.org/doc/de_DE.ISO8859-1/books/handbook/x-install.html"
target="_top">X11 installieren</a>.</p>
</div>
</div>

<div class="SECT1">
<hr />
<h2 class="SECT1"><a id="SUMMARY" name="SUMMARY">6. Zusammenfassung</a></h2>

<p>Dieser Artikel beschreibt einige der beachtenswerten Funktionen von
FreeBSD&nbsp;5.<var class="REPLACEABLE">X</var> und bespricht wichtige Punkte für
Benutzer von FreeBSD&nbsp;4.<var class="REPLACEABLE">X</var>, die bestehende Systeme
aktualisieren wollen. Der Artikel beschreibt weiterhin zwei Methoden ein System zu
aktualisieren. Die erste Methode benutzt Binärdateien von einem Installationsmedium,
die zweite Methode übersetzt den Quellcode des Basissystems.</p>
</div>
</div>

<h3 class="FOOTNOTES">Fußnoten</h3>

<table border="0" class="FOOTNOTES" width="100%">
<tr>
<td align="LEFT" valign="TOP" width="5%"><a id="FTN.AEN161" name="FTN.AEN161"
href="#AEN161"><span class="footnote">[1]</span></a></td>
<td align="LEFT" valign="TOP" width="95%">
<p>Das Ausführen von <tt class="FILENAME">a.out</tt>-Programmen ist weiterhin mit
der Kerneloption <var class="LITERAL">COMPAT_AOUT</var> möglich. Einige Compiler aus
der Ports-Collection (beispielsweise <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/lang/gcc28/pkg-descr"><tt
class="FILENAME">lang/gcc28</tt></a>) können auch noch <tt
class="FILENAME">a.out</tt>-Programme erzeugen.</p>
</td>
</tr>
</table>

<hr />
<p align="center"><small>Diese Datei und andere Dokumente zu dieser Version sind bei <a
href="ftp://ftp.FreeBSD.org/">ftp://ftp.FreeBSD.org/</a>verfuegbar.</small></p>

<p align="center"><small>Wenn Sie Fragen zu FreeBSD haben, lesen Sie erst die <a
href="http://www.FreeBSD.org/docs.html">Dokumentation,</a> bevor Sie sich an &lt;<a
href="mailto:de-bsd-questions@de.FreeBSD.org">de-bsd-questions@de.FreeBSD.org</a>&gt;
wenden.</small></p>

<p align="center"><small>Alle Anwender von FreeBSD 5-STABLE sollten sich in die
Mailingliste &lt;<a href="mailto:stable@FreeBSD.org">stable@FreeBSD.org</a>&gt;
eintragen.</small></p>

<p align="center"><small>Wenn Sie Fragen zu dieser Dokumentation haben, wenden Sie sich
an &lt;<a
href="mailto:de-bsd-translators@de.FreeBSD.org">de-bsd-translators@de.FreeBSD.org</a>&gt;.</small></p>
</body>
</html>

